<!DOCTYPE html>
<html lang="kr" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.104.1" />
    <meta name="description" content="COM2018 OOP Class Lecture Note">
<meta name="author" content="Soo Young Kim">

    <link rel="icon" href="/images/favicon.png" type="image/png">

    <title>Lecture12. About Gazebo - 2 - Documentation for Hugo Learn Theme</title>

    
    <link href="/css/nucleus.css?1683853056" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css?1683853056" rel="stylesheet">
    <link href="/css/hybrid.css?1683853056" rel="stylesheet">
    <link href="/css/featherlight.min.css?1683853056" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1683853056" rel="stylesheet">
    <link href="/css/auto-complete.css?1683853056" rel="stylesheet">
    <link href="/css/atom-one-dark-reasonable.css?1683853056" rel="stylesheet">
    <link href="/css/theme.css?1683853056" rel="stylesheet">
    <link href="/css/tabs.css?1683853056" rel="stylesheet">
    <link href="/css/hugo-theme.css?1683853056" rel="stylesheet">
    
    <link href="/css/theme-green.css?1683853056" rel="stylesheet">
    
    <link href="/css/foo.css?1683853056" rel="stylesheet"><link href="/css/bar.css?1683853056" rel="stylesheet">

    <script src="/js/jquery-3.3.1.min.js?1683853056"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/kr/ros2_foxy/lecture12/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <img width="1097" alt="image" src="https://user-images.githubusercontent.com/12381733/209764275-05dcbdbf-cef7-47ad-94a6-6d61febad01e.png">
    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js?1683853056"></script>
<script type="text/javascript" src="/js/auto-complete.js?1683853056"></script>
<script type="text/javascript">
    
        var baseurl = "\/\/kr";
    
</script>
<script type="text/javascript" src="/js/search.js?1683853056"></script>

    
  </div>
  
    <section id="homelinks">
      <ul>
        <li>
            <a class="padding" href='/kr'><i class='fas fa-home'></i> Home</a>
        </li>
      </ul>
    </section>
  

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/kr/ros_basic_noetic/" title="ROS Basics" class="dd-item
        
        
        
        ">
      <a href="/kr/ros_basic_noetic/">
          <b>ROS Noetic. </b>ROS Basics
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/kr/ros_basic_noetic/lecture1/" title="Lecture1 - Introduction to ROS" class="dd-item ">
        <a href="/kr/ros_basic_noetic/lecture1/">
        Lecture1 - Introduction to ROS
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros_basic_noetic/lecture2/" title="Lecture2 - Dev Env Setup" class="dd-item ">
        <a href="/kr/ros_basic_noetic/lecture2/">
        Lecture2 - Dev Env Setup
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros_basic_noetic/lecture3/" title="Lecture3 - Core of ROS" class="dd-item ">
        <a href="/kr/ros_basic_noetic/lecture3/">
        Lecture3 - Core of ROS
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros_basic_noetic/lecture4/" title="Lecture4 - ROS Launch, RViz" class="dd-item ">
        <a href="/kr/ros_basic_noetic/lecture4/">
        Lecture4 - ROS Launch, RViz
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros_basic_noetic/lecture5/" title="Lecture5 - First Programming, ROS Topic" class="dd-item ">
        <a href="/kr/ros_basic_noetic/lecture5/">
        Lecture5 - First Programming, ROS Topic
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros_basic_noetic/lecture6/" title="Lecture6 - ROS Service, Parameter" class="dd-item ">
        <a href="/kr/ros_basic_noetic/lecture6/">
        Lecture6 - ROS Service, Parameter
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros_basic_noetic/lecture7/" title="Lecture7 - Rqt Tools and rosbag, ROS Time" class="dd-item ">
        <a href="/kr/ros_basic_noetic/lecture7/">
        Lecture7 - Rqt Tools and rosbag, ROS Time
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros_basic_noetic/lecture8/" title="Lecture8 - Deal with Open Source Projects, Custom Interfaces" class="dd-item ">
        <a href="/kr/ros_basic_noetic/lecture8/">
        Lecture8 - Deal with Open Source Projects, Custom Interfaces
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros_basic_noetic/lecture9/" title="Lecture9 - ROS TF and Examples" class="dd-item ">
        <a href="/kr/ros_basic_noetic/lecture9/">
        Lecture9 - ROS TF and Examples
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros_basic_noetic/lecture10/" title="Lecture10 - TF2 Examples, Outro" class="dd-item ">
        <a href="/kr/ros_basic_noetic/lecture10/">
        Lecture10 - TF2 Examples, Outro
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/kr/advanced_contents_ros1/" title="ROS" class="dd-item
        
        
        
        ">
      <a href="/kr/advanced_contents_ros1/">
          <b>Advanced Contents. </b>ROS
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/kr/advanced_contents_ros1/lecture1/" title="Lecture1 - ROSCPP" class="dd-item ">
        <a href="/kr/advanced_contents_ros1/lecture1/">
        Lecture1 - ROSCPP
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/advanced_contents_ros1/lecture2/" title="Lecture2 - More About ROS System" class="dd-item ">
        <a href="/kr/advanced_contents_ros1/lecture2/">
        Lecture2 - More About ROS System
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/advanced_contents_ros1/lecture3/" title="Lecture3 - SROS" class="dd-item ">
        <a href="/kr/advanced_contents_ros1/lecture3/">
        Lecture3 - SROS
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/kr/ros2_basic_foxy/" title="ROS 2 Basics" class="dd-item
        
        
        
        ">
      <a href="/kr/ros2_basic_foxy/">
          <b>[Old]ROS 2 Foxy. </b>ROS 2 Basics
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/kr/ros2_basic_foxy/lecture1/" title="Lecture1 - Introduction to ROS 2" class="dd-item ">
        <a href="/kr/ros2_basic_foxy/lecture1/">
        Lecture1 - Introduction to ROS 2
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros2_basic_foxy/lecture2/" title="Lecture2 - ROS 2 Node, Package" class="dd-item ">
        <a href="/kr/ros2_basic_foxy/lecture2/">
        Lecture2 - ROS 2 Node, Package
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros2_basic_foxy/lecture3/" title="Lecture3 - ROS 2 Node Programming, ROS 2 parameter" class="dd-item ">
        <a href="/kr/ros2_basic_foxy/lecture3/">
        Lecture3 - ROS 2 Node Programming, ROS 2 parameter
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros2_basic_foxy/lecture4/" title="Lecture4 - ROS 2 Node C&#43;&#43; Programming" class="dd-item ">
        <a href="/kr/ros2_basic_foxy/lecture4/">
        Lecture4 - ROS 2 Node C&#43;&#43; Programming
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros2_basic_foxy/lecture5/" title="Lecture5 - ROS 2 Topic and Examples" class="dd-item ">
        <a href="/kr/ros2_basic_foxy/lecture5/">
        Lecture5 - ROS 2 Topic and Examples
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros2_basic_foxy/lecture6/" title="Lecture6 - ROS 2 Service and Examples" class="dd-item ">
        <a href="/kr/ros2_basic_foxy/lecture6/">
        Lecture6 - ROS 2 Service and Examples
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros2_basic_foxy/lecture7/" title="Lecture7 - Useful ROS 2 Example, Navigation2" class="dd-item ">
        <a href="/kr/ros2_basic_foxy/lecture7/">
        Lecture7 - Useful ROS 2 Example, Navigation2
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros2_basic_foxy/lecture8/" title="Lecture8 - ROS 2 Action and Examples" class="dd-item ">
        <a href="/kr/ros2_basic_foxy/lecture8/">
        Lecture8 - ROS 2 Action and Examples
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros2_basic_foxy/lecture9/" title="Lecture9 - C&#43;&#43; Programming Again, Outro" class="dd-item ">
        <a href="/kr/ros2_basic_foxy/lecture9/">
        Lecture9 - C&#43;&#43; Programming Again, Outro
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/kr/ros2_foxy/" title="ROS 2 Basics" class="dd-item
        parent
        
        
        ">
      <a href="/kr/ros2_foxy/">
          <b>[New]ROS 2 Foxy. </b>ROS 2 Basics
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/kr/ros2_foxy/lecture1/" title="Lecture1. What is ROS?" class="dd-item ">
        <a href="/kr/ros2_foxy/lecture1/">
        Lecture1. What is ROS?
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros2_foxy/lecture2/" title="Lecture2. Dev Env Setup" class="dd-item ">
        <a href="/kr/ros2_foxy/lecture2/">
        Lecture2. Dev Env Setup
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros2_foxy/lecture3/" title="Lecture3. Core of ROS" class="dd-item ">
        <a href="/kr/ros2_foxy/lecture3/">
        Lecture3. Core of ROS
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros2_foxy/lecture4/" title="Lecture4. ROS 2 Node and Parameter Programming" class="dd-item ">
        <a href="/kr/ros2_foxy/lecture4/">
        Lecture4. ROS 2 Node and Parameter Programming
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros2_foxy/lecture5/" title="Lecture5. ROS 2 Communication Mechanisms" class="dd-item ">
        <a href="/kr/ros2_foxy/lecture5/">
        Lecture5. ROS 2 Communication Mechanisms
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros2_foxy/lecture6/" title="Lecture6. ROS 2 Tools" class="dd-item ">
        <a href="/kr/ros2_foxy/lecture6/">
        Lecture6. ROS 2 Tools
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros2_foxy/lecture7/" title="Lecture7. ROS 2 Topic and Programming" class="dd-item ">
        <a href="/kr/ros2_foxy/lecture7/">
        Lecture7. ROS 2 Topic and Programming
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros2_foxy/lecture8/" title="Lecture8. ROS 2 Service and Programming" class="dd-item ">
        <a href="/kr/ros2_foxy/lecture8/">
        Lecture8. ROS 2 Service and Programming
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros2_foxy/lecture9/" title="Lecture9. ROS 2 Action Programming" class="dd-item ">
        <a href="/kr/ros2_foxy/lecture9/">
        Lecture9. ROS 2 Action Programming
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros2_foxy/lecture10/" title="Lecture10. TF and ROS 2" class="dd-item ">
        <a href="/kr/ros2_foxy/lecture10/">
        Lecture10. TF and ROS 2
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros2_foxy/lecture11/" title="Lecture11. About Gazebo - 1" class="dd-item ">
        <a href="/kr/ros2_foxy/lecture11/">
        Lecture11. About Gazebo - 1
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros2_foxy/lecture12/" title="Lecture12. About Gazebo - 2" class="dd-item active">
        <a href="/kr/ros2_foxy/lecture12/">
        Lecture12. About Gazebo - 2
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros2_foxy/lecture13/" title="Lecture13. Useful ROS 2 Examples (Sensor Part)" class="dd-item ">
        <a href="/kr/ros2_foxy/lecture13/">
        Lecture13. Useful ROS 2 Examples (Sensor Part)
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros2_foxy/lecture14/" title="Lecture14. Useful ROS 2 Examples (Control Part)" class="dd-item ">
        <a href="/kr/ros2_foxy/lecture14/">
        Lecture14. Useful ROS 2 Examples (Control Part)
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros2_foxy/lecture15/" title="Lecture15. Advanced ROS 2, Package Management" class="dd-item ">
        <a href="/kr/ros2_foxy/lecture15/">
        Lecture15. Advanced ROS 2, Package Management
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros2_foxy/lecture16/" title="Lecture16. Useful ROS 2 Examples (Misc)" class="dd-item ">
        <a href="/kr/ros2_foxy/lecture16/">
        Lecture16. Useful ROS 2 Examples (Misc)
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros2_foxy/lecture17/" title="Lecture17. Real Hardware Examples" class="dd-item ">
        <a href="/kr/ros2_foxy/lecture17/">
        Lecture17. Real Hardware Examples
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros2_foxy/lecture18/" title="Lecture18. Point Cloud Deep Learning Example (PointNet)" class="dd-item ">
        <a href="/kr/ros2_foxy/lecture18/">
        Lecture18. Point Cloud Deep Learning Example (PointNet)
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros2_foxy/lecture19/" title="Lecture19. NVIDIA Isaac Sim" class="dd-item ">
        <a href="/kr/ros2_foxy/lecture19/">
        Lecture19. NVIDIA Isaac Sim
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros2_foxy/lecture20/" title="Lecture20. NVIDIA Jetson Platform" class="dd-item ">
        <a href="/kr/ros2_foxy/lecture20/">
        Lecture20. NVIDIA Jetson Platform
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/kr/advanced_contents_ros2/" title="ROS 2" class="dd-item
        
        
        
        ">
      <a href="/kr/advanced_contents_ros2/">
          <b>Advanced Contents. </b>ROS 2
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/kr/advanced_contents_ros2/lecture1/" title="Lecture1 - About DDS" class="dd-item ">
        <a href="/kr/advanced_contents_ros2/lecture1/">
        Lecture1 - About DDS
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/advanced_contents_ros2/lecture2/" title="Lecture11 - About DDS (2)" class="dd-item ">
        <a href="/kr/advanced_contents_ros2/lecture2/">
        Lecture11 - About DDS (2)
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/advanced_contents_ros2/lecture3/" title="Lecture12 - SROS2" class="dd-item ">
        <a href="/kr/advanced_contents_ros2/lecture3/">
        Lecture12 - SROS2
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/kr/ros_and_gazebo/" title="Gazebo and ROS" class="dd-item
        
        
        
        ">
      <a href="/kr/ros_and_gazebo/">
          <b>Gazebo. </b>Gazebo and ROS
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/kr/ros_and_gazebo/lecture1/" title="Lecture1 - Gazebo and Robot" class="dd-item ">
        <a href="/kr/ros_and_gazebo/lecture1/">
        Lecture1 - Gazebo and Robot
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros_and_gazebo/lecture2/" title="Lecture2 - Gazebo and Robot(2)" class="dd-item ">
        <a href="/kr/ros_and_gazebo/lecture2/">
        Lecture2 - Gazebo and Robot(2)
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
        
    </ul>

    
    
      <section id="shortcuts">
        <h3></h3>
        <ul>
          
              <li>
                  <a class="padding" href="https://github.com/RB2023ROS/du2023-ros1"><i class='fab fa-fw fa-github'></i> GitHub repo - ROS 1</a>
              </li>
          
              <li>
                  <a class="padding" href="https://github.com/RB2023ROS/du2023-ros2"><i class='fab fa-fw fa-github'></i> GitHub repo - ROS 2</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="prefooter">
      <hr/>
      <ul>
      
        <li>
          <a class="padding">
            <i class="fas fa-language fa-fw"></i>
          <div class="select-style">
            <select id="select-language" onchange="location = this.value;">
          
          
          
              
              
                  
                    
                    
                      <option id="kr" value="/kr/ros2_foxy/lecture12/" selected>Korean</option>
                    
                  
              
                  
              
          
        </select>
        <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
          width="255px" height="255px" viewBox="0 0 255 255" style="enable-background:new 0 0 255 255;" xml:space="preserve">
          <g>
            <g id="arrow-drop-down">
              <polygon points="0,63.75 127.5,191.25 255,63.75 		" />
            </g>
          </g>
        </svg>
        </div>
        </a>
        </li>
      

      
      </ul>
    </section>
    
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fas fa-heart"></i></a> from <a href="https://getgrav.org">Grav</a> and <a href="https://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                  
                  
                  
                  <div id="top-github-link">
                    <a class="github-link" title='' href="https://github.com/com2018-fa22/hugo-blog/tree/main/content/ros2_foxy/lecture12.kr.md" target="blank">
                      <i class="fas fa-code-branch"></i>
                      <span id="top-github-link-text"></span>
                    </a>
                  </div>
                  
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                   Lecture12. About Gazebo - 2
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#gazebo-sensor-plugin">Gazebo Sensor Plugin</a></li>
      </ul>
    </li>
    <li><a href="#sensor-plugin-추가-절차">Sensor Plugin 추가 절차</a>
      <ul>
        <li></li>
        <li><a href="#gazebo-movement-plugin">Gazebo Movement Plugin</a></li>
      </ul>
    </li>
    <li><a href="#gazebo-state-plugin">Gazebo State Plugin</a></li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Lecture12. About Gazebo - 2
            </h1>
          

        


<h3 id="gazebo-sensor-plugin">Gazebo Sensor Plugin</h3>
<blockquote>
<p>Description 예시를 통해 URDF에 대해 습득하였다면, 이제 Gazebo에 로봇을 등장시키고, 이동, 센싱을 구현할 차례입니다. sensor stick을 통해 실습을 진행해보고, fusionbot도 함께 분석해 보겠습니다.</p>
</blockquote>
<p>다뤄볼 센서들은 다음과 같습니다.</p>
<ul>
<li><strong>Mono Camera</strong></li>
<li><strong>Depth Camera</strong></li>
<li><strong>2D Lidar</strong></li>
<li><strong>3D Lidar</strong></li>
</ul>
<p>미리 말하자면 sensor plugin을 사용하는 기본 방법만 알면 gazebo_ros pkg wiki를 통해 얼마든지 응용이 가능합니다. 하지만 적어도 한번은 직접 plugin을 적용해보시기 바랍니다.</p>
<p>⇒ <a href="https://github.com/ros-simulation/gazebo_ros_pkgs/wiki">https://github.com/ros-simulation/gazebo_ros_pkgs/wiki</a></p>
<h2 id="sensor-plugin-추가-절차">Sensor Plugin 추가 절차</h2>
<blockquote>
<p>다음은 일반적으로 제가 Gazebo Model에 센서를 연동할 때 적용하는 절차입니다.</p>
</blockquote>
<ol>
<li>센서가 부착될 link/joint 추가</li>
<li>기본 plugin xml 연동</li>
<li>plugin parameter 수정</li>
<li>Gazebo를 통해 동작 검증</li>
</ol>
<p>⇒ 다시 2로 반복</p>
<h4 id="basic_stick을-통해-카메라-센서들을-fusionbot을-통해-나머지를-실습해봅시다">basic_stick을 통해 카메라 센서들을, fusionbot을 통해 나머지를 실습해봅시다!!</h4>
<hr>
<ol>
<li>센서가 부착될 link/joint 추가</li>
</ol>
<p>⇒ link가 하나 추가되면 필연적으로 joint도 추가됩니다. 이를 기본 로봇 xacro에 반영합니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span>  <span style="color:#f92672">&lt;link</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;camera_rgb_frame&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;joint</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;camera_rgb_joint&#34;</span> <span style="color:#a6e22e">type=</span><span style="color:#e6db74">&#34;fixed&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;origin</span> <span style="color:#a6e22e">rpy=</span><span style="color:#e6db74">&#34;0 0 0&#34;</span> <span style="color:#a6e22e">xyz=</span><span style="color:#e6db74">&#34;0 0.022 0&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;parent</span> <span style="color:#a6e22e">link=</span><span style="color:#e6db74">&#34;camera_link&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;child</span> <span style="color:#a6e22e">link=</span><span style="color:#e6db74">&#34;camera_rgb_frame&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;/joint&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;link</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;camera_rgb_optical_frame&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;joint</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;camera_rgb_optical_joint&#34;</span> <span style="color:#a6e22e">type=</span><span style="color:#e6db74">&#34;fixed&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;origin</span> <span style="color:#a6e22e">rpy=</span><span style="color:#e6db74">&#34;-1.57079632679 0 -1.57079632679&#34;</span> <span style="color:#a6e22e">xyz=</span><span style="color:#e6db74">&#34;0 0 0&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;parent</span> <span style="color:#a6e22e">link=</span><span style="color:#e6db74">&#34;camera_rgb_frame&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;child</span> <span style="color:#a6e22e">link=</span><span style="color:#e6db74">&#34;camera_rgb_optical_frame&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;/joint&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;link</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;camera_depth_frame&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;joint</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;camera_depth_joint&#34;</span> <span style="color:#a6e22e">type=</span><span style="color:#e6db74">&#34;fixed&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;origin</span> <span style="color:#a6e22e">rpy=</span><span style="color:#e6db74">&#34;0 0 0&#34;</span> <span style="color:#a6e22e">xyz=</span><span style="color:#e6db74">&#34;0 0.049 0&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;parent</span> <span style="color:#a6e22e">link=</span><span style="color:#e6db74">&#34;camera_link&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;child</span> <span style="color:#a6e22e">link=</span><span style="color:#e6db74">&#34;camera_depth_frame&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;/joint&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;link</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;camera_depth_optical_frame&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;joint</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;camera_depth_optical_joint&#34;</span> <span style="color:#a6e22e">type=</span><span style="color:#e6db74">&#34;fixed&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;origin</span> <span style="color:#a6e22e">rpy=</span><span style="color:#e6db74">&#34;-1.57079632679 0 -1.57079632679&#34;</span> <span style="color:#a6e22e">xyz=</span><span style="color:#e6db74">&#34;0 0 0&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;parent</span> <span style="color:#a6e22e">link=</span><span style="color:#e6db74">&#34;camera_depth_frame&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;child</span> <span style="color:#a6e22e">link=</span><span style="color:#e6db74">&#34;camera_depth_optical_frame&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;/joint&gt;</span>
</span></span></code></pre></div><ol start="2">
<li>기본 plugin xml 연동</li>
</ol>
<p>⇒ 앞서 제시드린 gazebo_ros pkg wiki 예시를 참고하여 원하는 link에 센서 속성을 부여합니다. 지금은 Mono Camera를 부착해보겠습니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;gazebo</span> <span style="color:#a6e22e">reference=</span><span style="color:#e6db74">&#34;camera_rgb_frame&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;sensor</span> <span style="color:#a6e22e">type=</span><span style="color:#e6db74">&#34;camera&#34;</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;rgb_cam&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;update_rate&gt;</span>60<span style="color:#f92672">&lt;/update_rate&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;visualize&gt;</span>true<span style="color:#f92672">&lt;/visualize&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;always_on&gt;</span>1<span style="color:#f92672">&lt;/always_on&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;camera</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;head&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;horizontal_fov&gt;</span>1.3962634<span style="color:#f92672">&lt;/horizontal_fov&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;image&gt;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&lt;width&gt;</span>1280<span style="color:#f92672">&lt;/width&gt;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&lt;height&gt;</span>720<span style="color:#f92672">&lt;/height&gt;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&lt;format&gt;</span>R8G8B8<span style="color:#f92672">&lt;/format&gt;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#75715e">&lt;!-- &lt;format&gt;B8G8R8&lt;/format&gt; --&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;/image&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;clip&gt;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&lt;near&gt;</span>0.02<span style="color:#f92672">&lt;/near&gt;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&lt;far&gt;</span>300<span style="color:#f92672">&lt;/far&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;/clip&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;noise&gt;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&lt;type&gt;</span>gaussian<span style="color:#f92672">&lt;/type&gt;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&lt;mean&gt;</span>0.0<span style="color:#f92672">&lt;/mean&gt;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&lt;stddev&gt;</span>0.007<span style="color:#f92672">&lt;/stddev&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;/noise&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;/camera&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;plugin</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;camera_controller&#34;</span> <span style="color:#a6e22e">filename=</span><span style="color:#e6db74">&#34;libgazebo_ros_camera.so&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;ros&gt;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&lt;namespace&gt;</span>rgb_cam<span style="color:#f92672">&lt;/namespace&gt;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&lt;remapping&gt;</span>image_raw:=image_raw<span style="color:#f92672">&lt;/remapping&gt;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&lt;remapping&gt;</span>camera_info:=camera_info<span style="color:#f92672">&lt;/remapping&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;/ros&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">&lt;!-- camera_name&gt;omit so it defaults to sensor name&lt;/camera_name--&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">&lt;!-- &lt;frame_name&gt;omit so it defaults to link name&lt;/frame_name&gt; --&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;camera_name&gt;</span>front_camera<span style="color:#f92672">&lt;/camera_name&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;frame_name&gt;</span>camera_rgb_frame<span style="color:#f92672">&lt;/frame_name&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;hack_baseline&gt;</span>0.07<span style="color:#f92672">&lt;/hack_baseline&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;/plugin&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/sensor&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;/gazebo&gt;</span>
</span></span></code></pre></div><ul>
<li>Mono Camera plugin의 매개변수들은 다음과 같습니다.</li>
</ul>

<div class="notices note" ><p>이들을 여러분의 목적에 맞게 수정한 뒤, gazebo에서 실행하여 검증을 합니다.</p>
</div>

<table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>gazebo reference</td>
<td>camera가 장착되는 link</td>
</tr>
<tr>
<td>update_rate</td>
<td>data publish rate</td>
</tr>
<tr>
<td>visualize</td>
<td>시각화 옵션</td>
</tr>
<tr>
<td>horizontal_fov</td>
<td>카메라의 화각</td>
</tr>
<tr>
<td>image</td>
<td>화질, 포맷 옵션</td>
</tr>
<tr>
<td>noise</td>
<td>센서 노이즈</td>
</tr>
<tr>
<td>remapping</td>
<td>topic 이름 재설정</td>
</tr>
<tr>
<td>camera_name</td>
<td>topic의 namespace가 됩니다.</td>
</tr>
<tr>
<td>frame_name</td>
<td>camera가 장착되는 link</td>
</tr>
<tr>
<td>hack_baseline</td>
<td>stereo camera 사용 시 - 카메라 사이 거리</td>
</tr>
<tr>
<td>namespace</td>
<td>동일 센서가 여러개 있을 시 namespace를 통해 구분할 수 있습니다.</td>
</tr>
</tbody>
</table>
<ol start="3">
<li>Gazebo를 통해 검증하기 위해서, 일반 Gazebo가 아닌, gazebo_ros를 사용해야 합니다. 그래야 센서 데이터들이 topic publish 되기 때문입니다. 따라서 launch file 수정 후 실행의 절차를 반복합니다.</li>
</ol>
<blockquote>
<p>gazebo 실행 후 3DGEMS Model을 등장시켜 rviz2로 확인해보겠습니다.</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span>ros2 launch basic_stick sensor_stick.launch.py
</span></span></code></pre></div><p><img src="/kr/ros2_foxy/images12/Untitled.png?height=400px" alt="Untitled.png"></p>
<ol>
<li>Gazebo 연동 후 rqt, topic echo, rviz2, tf2 tree 등 지금까지 배운 모든 기능들을 사용해 검증하고, 디버깅합니다.</li>
</ol>
<p><img src="/kr/ros2_foxy/images12/Untitled1.png?height=350px" alt="Untitled1.png"></p>
<p>위 과정은 반복되므로, 센서 plugin 예시와 매개변수들을 위주로 살펴보겠습니다.</p>
<ul>
<li>Depth Camera</li>
</ul>
<p>⇒ Depth Camera 사용 시 주의해야 할 점이 있습니다. Depth Camera의 좌표계가 ROS 2 좌표계와 일치하지 않아 해당 joint angle을 통해 offset해야 합니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;link</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;camera_rgb_optical_frame&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;joint</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;camera_rgb_optical_joint&#34;</span> <span style="color:#a6e22e">type=</span><span style="color:#e6db74">&#34;fixed&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;origin</span> <span style="color:#a6e22e">rpy=</span><span style="color:#e6db74">&#34;-1.57079632679 0 -1.57079632679&#34;</span> <span style="color:#a6e22e">xyz=</span><span style="color:#e6db74">&#34;0 0 0&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;parent</span> <span style="color:#a6e22e">link=</span><span style="color:#e6db74">&#34;camera_rgb_frame&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;child</span> <span style="color:#a6e22e">link=</span><span style="color:#e6db74">&#34;camera_rgb_optical_frame&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/joint&gt;</span>
</span></span></code></pre></div><ul>
<li>Depth Camera Parameter는 Mono Camera와 차이나는 부분을 살펴봅시다.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;gazebo</span> <span style="color:#a6e22e">reference=</span><span style="color:#e6db74">&#34;depth_camera_link&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;sensor</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;front_depth_camera&#34;</span> <span style="color:#a6e22e">type=</span><span style="color:#e6db74">&#34;depth&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;plugin</span> <span style="color:#a6e22e">filename=</span><span style="color:#e6db74">&#34;libgazebo_ros_camera.so&#34;</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;camera_controller&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;ros&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">&lt;!-- &lt;namespace&gt;custom_ns&lt;/namespace&gt; --&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;remapping&gt;</span>front_depth_camera/image_raw:=front_depth_camera/image_raw<span style="color:#f92672">&lt;/remapping&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;remapping&gt;</span>front_depth_camera/image_depth:=front_depth_camera/image_depth<span style="color:#f92672">&lt;/remapping&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;remapping&gt;</span>front_depth_camera/camera_info:=front_depth_camera/camera_info<span style="color:#f92672">&lt;/remapping&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;remapping&gt;</span>front_depth_camera/camera_info_depth:=front_depth_camera/camera_info_depth<span style="color:#f92672">&lt;/remapping&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;remapping&gt;</span>front_depth_camera/points:=front_depth_camera/points<span style="color:#f92672">&lt;/remapping&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;/ros&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;camera_name&gt;</span>front_depth_camera<span style="color:#f92672">&lt;/camera_name&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;frame_name&gt;</span>depth_camera_optical_link<span style="color:#f92672">&lt;/frame_name&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;hack_baseline&gt;</span>0.07<span style="color:#f92672">&lt;/hack_baseline&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;min_depth&gt;</span>0.001<span style="color:#f92672">&lt;/min_depth&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;max_depth&gt;</span>300.0<span style="color:#f92672">&lt;/max_depth&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/plugin&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;/sensor&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/gazebo&gt;</span>
</span></span></code></pre></div><table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>type=&ldquo;depth&rdquo;</td>
<td></td>
</tr>
<tr>
<td>min_depth, max_depth</td>
<td>depth 최소, 최대 탐지거리</td>
</tr>
<tr>
<td>image_depth</td>
<td>depth image topic이며,</td>
</tr>
<tr>
<td>camera_info_depth</td>
<td>depth camera의 정보를 담고 있는 topic입니다.</td>
</tr>
<tr>
<td>points</td>
<td>pointcloud data topic으로 XYZ와 RGB가 결합된 데이터를 얻게 됩니다.</td>
</tr>
</tbody>
</table>
<ul>
<li>xacro 파일 변경 후 Gazebo 예제 실행</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span>ros2 launch basic_stick sensor_stick.launch.py
</span></span></code></pre></div><p><img src="/kr/ros2_foxy/images12/Untitled2.png?height=350px" alt="Untitled2.png"></p>
<blockquote>
<p>다음으로 2D/3D 라이다 데이터를 연동해봅시다.</p>
</blockquote>
<ul>
<li>2D lidar plugin</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#f92672">&lt;gazebo</span> <span style="color:#a6e22e">reference=</span><span style="color:#e6db74">&#34;lidar&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;sensor</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;lidar&#34;</span> <span style="color:#a6e22e">type=</span><span style="color:#e6db74">&#34;ray&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;pose&gt;</span>0 0 0 0 0 0<span style="color:#f92672">&lt;/pose&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;always_on&gt;</span>1<span style="color:#f92672">&lt;/always_on&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;visualize&gt;</span>1<span style="color:#f92672">&lt;/visualize&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;update_rate&gt;</span>10<span style="color:#f92672">&lt;/update_rate&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;ray&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;scan&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;horizontal&gt;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&lt;samples&gt;</span>360<span style="color:#f92672">&lt;/samples&gt;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&lt;resolution&gt;</span>1.000000<span style="color:#f92672">&lt;/resolution&gt;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&lt;min_angle&gt;</span>-3.14159<span style="color:#f92672">&lt;/min_angle&gt;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&lt;max_angle&gt;</span>3.14159<span style="color:#f92672">&lt;/max_angle&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;/horizontal&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;/scan&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;range&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;min&gt;</span>0.2<span style="color:#f92672">&lt;/min&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;max&gt;</span>10.0<span style="color:#f92672">&lt;/max&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;resolution&gt;</span>0.05<span style="color:#f92672">&lt;/resolution&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;/range&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;noise&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;type&gt;</span>gaussian<span style="color:#f92672">&lt;/type&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;mean&gt;</span>0.0<span style="color:#f92672">&lt;/mean&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;stddev&gt;</span>0.01<span style="color:#f92672">&lt;/stddev&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;/noise&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/ray&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;plugin</span> <span style="color:#a6e22e">filename=</span><span style="color:#e6db74">&#34;libgazebo_ros_ray_sensor.so&#34;</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;scan&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;ros&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;remapping&gt;</span>~/out:=scan<span style="color:#f92672">&lt;/remapping&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;/ros&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;output_type&gt;</span>sensor_msgs/LaserScan<span style="color:#f92672">&lt;/output_type&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;frame_name&gt;</span>lidar<span style="color:#f92672">&lt;/frame_name&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/plugin&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;/sensor&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/gazebo&gt;</span>
</span></span></code></pre></div><table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>type=&ldquo;ray&rdquo;</td>
<td></td>
</tr>
<tr>
<td>samples</td>
<td>라이다의 샘플 수를 지정합니다. 지금은 360개의 point를 각 1도씩 매핑해서 360도를 스캔하게 됩니다.</td>
</tr>
<tr>
<td>resolution</td>
<td>스캔 해상도로 단위는 각도입니다.</td>
</tr>
<tr>
<td>min_angle / max_angle</td>
<td>최대, 최소 각도이며 지금은 -180 ~ 180 즉 360도를 스캔합니다.</td>
</tr>
<tr>
<td>range</td>
<td>탐지거리의 범위, 해상도를 정의합니다.</td>
</tr>
<tr>
<td>scan</td>
<td>라이다의 스캔 결과는 기본적으로 scan이라는 topic으로 publish 됩니다.</td>
</tr>
<tr>
<td>output_type</td>
<td>ROS 2에서 사용하는 2D 라이다 데이터로 기본은 sensor_msgs/msg/LaserScan입니다.</td>
</tr>
</tbody>
</table>
<ul>
<li>예제 실행</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span>ros2 launch fusionbot_description sensor_gz.launch.py
</span></span></code></pre></div><p><img src="/kr/ros2_foxy/images12/Untitled3.png?height=350px" alt="Untitled3.png"></p>
<ul>
<li>3D Lidar plugin</li>
</ul>
<p>⇒ 2D lidar와 plugin은 같지만, vertical이라는 속성이 추가됩니다.</p>

<div class="notices note" ><p>이 센서는 연산량이 많아 gpu 버전을 별도로 제공하고 있습니다.</p>
</div>

<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#75715e">&lt;!-- Gazebo requires the velodyne_gazebo_plugins package --&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;gazebo</span> <span style="color:#a6e22e">reference=</span><span style="color:#e6db74">&#34;velodyne&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;sensor</span> <span style="color:#a6e22e">type=</span><span style="color:#e6db74">&#34;gpu_ray&#34;</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;block_laser_sensor&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;ray&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;scan&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;horizontal&gt;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&lt;samples&gt;</span>1200<span style="color:#f92672">&lt;/samples&gt;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&lt;resolution&gt;</span>1<span style="color:#f92672">&lt;/resolution&gt;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&lt;min_angle&gt;</span>-3.141592653589793<span style="color:#f92672">&lt;/min_angle&gt;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&lt;max_angle&gt;</span>3.141592653589793<span style="color:#f92672">&lt;/max_angle&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;/horizontal&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;vertical&gt;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&lt;samples&gt;</span>64<span style="color:#f92672">&lt;/samples&gt;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&lt;resolution&gt;</span>1<span style="color:#f92672">&lt;/resolution&gt;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&lt;min_angle&gt;</span>-0.436322083<span style="color:#f92672">&lt;/min_angle&gt;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#f92672">&lt;max_angle&gt;</span>0.2617993877991494<span style="color:#f92672">&lt;/max_angle&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;/vertical&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;/scan&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;range&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;min&gt;</span>0.3<span style="color:#f92672">&lt;/min&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;max&gt;</span>201.0<span style="color:#f92672">&lt;/max&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;resolution&gt;</span>0.001<span style="color:#f92672">&lt;/resolution&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;/range&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#75715e">&lt;!-- Using gazebo&#39;s noise instead of plugin&#39;s --&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;noise&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;type&gt;</span>gaussian<span style="color:#f92672">&lt;/type&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;mean&gt;</span>0.0<span style="color:#f92672">&lt;/mean&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;stddev&gt;</span>0.0<span style="color:#f92672">&lt;/stddev&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;/noise&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/ray&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#75715e">&lt;!-- Using gazebo&#39;s update rate instead of plugin&#39;s --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;update_rate&gt;</span>30<span style="color:#f92672">&lt;/update_rate&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;plugin</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;gazebo_ros_block_laser_controller&#34;</span> <span style="color:#a6e22e">filename=</span><span style="color:#e6db74">&#34;libgazebo_ros_ray_sensor.so&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#75715e">&lt;!-- Change namespace and output topic so published topic is /rrbot/laser/pointcloud --&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;ros&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#75715e">&lt;!-- &lt;namespace&gt;/rrbot/laser&lt;/namespace&gt; --&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">&lt;remapping&gt;</span>~/out:=pointcloud<span style="color:#f92672">&lt;/remapping&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;/ros&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#75715e">&lt;!-- Set output to sensor_msgs/PointCloud to get same output type as gazebo_ros_block_laser --&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;output_type&gt;</span>sensor_msgs/PointCloud2<span style="color:#f92672">&lt;/output_type&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#75715e">&lt;!-- &lt;frame_name&gt; ommited, will default to block_laser_link --&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      <span style="color:#75715e">&lt;!-- min_intensity instead of hokuyoMinIntensity --&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;min_intensity&gt;</span>100.0<span style="color:#f92672">&lt;/min_intensity&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/plugin&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;/sensor&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/gazebo&gt;</span>
</span></span></code></pre></div><table>
<thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>type=&ldquo;ray&rdquo;</td>
<td></td>
</tr>
<tr>
<td>horizontal</td>
<td>라이다의 수직 샘플링 속성을 지정합니다. 3D Lidar는 기본적으로 2D lidar를 쌓아둔 것과 유사한 원리를 갖습니다.</td>
</tr>
<tr>
<td>pointcloud</td>
<td>라이다의 스캔 결과는 topic 이름입니다.</td>
</tr>
<tr>
<td>sensor_msgs/PointCloud2</td>
<td>ROS 2에서 사용하는 2D 라이다 데이터로 기본은 sensor_msgs/msg/PointCloud입니다. 하지만 foxy 이후부터 PointCloud2를 사용하고 있습니다.</td>
</tr>
<tr>
<td>min_intensity</td>
<td>PointCloud의 특성 중 물체의 성질에 따라 달라지는 intensity가 있습니다. 이에 대한 임계값입니다.</td>
</tr>
</tbody>
</table>
<ul>
<li>xacro 파일 변경 후 Gazebo 예제 실행</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span>ros2 launch fusionbot_description sensor_gz.launch.py
</span></span></code></pre></div><p><img src="/kr/ros2_foxy/images12/Untitled4.png?height=350px" alt="Untitled4.png"></p>

<div class="notices note" ><p>과제를 통해 위 작업을 충분히 연습해보고 넘어가고자 합니다. ⇒ 직접, basic stick을 sensor stick으로 변환해 보세요!</p>
</div>

<h3 id="gazebo-movement-plugin">Gazebo Movement Plugin</h3>
<blockquote>
<p>지금까지 살펴보았던 gazebo 예시들은 모두 정적인 로봇 + 센서였습니다. 사실 로봇 시뮬레이션은 물체의 정확한 위치와 상태를 알 수 있기 때문에 알고리즘의 검증을 위해 사용됩니다. 이번 시간에는 Gazebo상 물체의 움직임과 관련된 plugin들을 살펴봅시다.</p>
</blockquote>
<h4 id="diff-drive-controller">Diff Drive Controller</h4>
<p>로봇 청소기와 같이 제자리 회전이 가능하며, 양쪽 바퀴 회전수 차이로 로봇을 이동시키는 타입을 DD Type이라고 부릅니다. 일전 fusionbot이 여기에 해당합니다. 이 모델이 하도 많이 사용되어서 그런지 gazebo_ros 차원에서 plugin을 제공하고 있습니다.</p>
<p><img src="https://rb2023ros.github.io/kr/ros_and_gazebo/images1/gz7.png?height=300px" alt="https://rb2023ros.github.io/kr/ros_and_gazebo/images1/gz7.png?height=300px"></p>
<ul>
<li>예시 실행 전 plugin 적용을 위해 fusionbot.gazebo include line 주석을 해제합니다.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#75715e">&lt;?xml version=&#34;1.0&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;robot</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;fusionbot&#34;</span> <span style="color:#a6e22e">xmlns:xacro=</span><span style="color:#e6db74">&#34;http://www.ros.org/wiki/xacro&#34;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;xacro:include</span> <span style="color:#a6e22e">filename=</span><span style="color:#e6db74">&#34;$(find fusionbot_description)/urdf/materials.xacro&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;xacro:include</span> <span style="color:#a6e22e">filename=</span><span style="color:#e6db74">&#34;$(find fusionbot_description)/urdf/fusionbot.gazebo&#34;</span> <span style="color:#f92672">/&gt;</span>
</span></span></code></pre></div><ul>
<li>예시 실행</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span>ros2 launch fusionbot_description gz.launch.py
</span></span></code></pre></div><ul>
<li>dd controller plugin이 제공하는 topic들을 확인해봅시다.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span>$ ros2 topic list
</span></span><span style="display:flex;"><span>/clock
</span></span><span style="display:flex;"><span>/cmd_vel
</span></span><span style="display:flex;"><span>/front_camera/camera_info
</span></span><span style="display:flex;"><span>/front_camera/image_raw
</span></span><span style="display:flex;"><span>/joint_states
</span></span><span style="display:flex;"><span>/odom
</span></span><span style="display:flex;"><span>/parameter_events
</span></span><span style="display:flex;"><span>/performance_metrics
</span></span><span style="display:flex;"><span>/robot_description
</span></span><span style="display:flex;"><span>/rosout
</span></span><span style="display:flex;"><span>/scan
</span></span><span style="display:flex;"><span>/tf
</span></span><span style="display:flex;"><span>/tf_static
</span></span></code></pre></div><table>
<thead>
<tr>
<th>Topic Name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>/cmd_vel</td>
<td>로봇 제어를 위한 topic으로 geometry_msgs/msg/Twist 타입을 갖습니다.</td>
</tr>
<tr>
<td>/odom</td>
<td>로봇의 위치와 속도, 방향을 모두 포함하는 odometry data topic 입니다.</td>
</tr>
<tr>
<td>/tf</td>
<td>tf2 data로 odom 및 fixed tf2들이 publish 됩니다.</td>
</tr>
<tr>
<td>/joint_states</td>
<td>로봇 바퀴가 굴러감에 따라 변화하는 joint angle들을 publish 합니다.</td>
</tr>
</tbody>
</table>
<ul>
<li>rqt_robot_steering을 통해 로봇을 제어해봅시다.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span>rqt_robot_steering
</span></span></code></pre></div><p>⇒ 일전 껍데기에 불과했던 fusionbot이 어떻게 제어될 수 있었는지 과정을 설명해보겠습니다.</p>
<ul>
<li>urdf 폴더에 2가지 plugin을 추가하고, 매개변수를 맞춰줍니다.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#75715e">&lt;?xml version=&#34;1.0&#34; ?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;robot</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#34;fusionbot&#34;</span> <span style="color:#a6e22e">xmlns:xacro=</span><span style="color:#e6db74">&#34;http://www.ros.org/wiki/xacro&#34;</span> <span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;gazebo&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;plugin</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#39;fusionbot_joint_state&#39;</span> <span style="color:#a6e22e">filename=</span><span style="color:#e6db74">&#39;libgazebo_ros_joint_state_publisher.so&#39;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;ros&gt;</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">&lt;remapping&gt;</span>~/out:=joint_states<span style="color:#f92672">&lt;/remapping&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;/ros&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;update_rate&gt;</span>30<span style="color:#f92672">&lt;/update_rate&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;joint_name&gt;</span>right_wheel_joint<span style="color:#f92672">&lt;/joint_name&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;joint_name&gt;</span>left_wheel_joint<span style="color:#f92672">&lt;/joint_name&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;/plugin&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/gazebo&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;gazebo&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;plugin</span> <span style="color:#a6e22e">name=</span><span style="color:#e6db74">&#39;differential_drive_controller&#39;</span> <span style="color:#a6e22e">filename=</span><span style="color:#e6db74">&#39;libgazebo_ros_diff_drive.so&#39;</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;update_rate&gt;</span>30<span style="color:#f92672">&lt;/update_rate&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;left_joint&gt;</span>left_wheel_joint<span style="color:#f92672">&lt;/left_joint&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;right_joint&gt;</span>right_wheel_joint<span style="color:#f92672">&lt;/right_joint&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;wheel_separation&gt;</span>0.2<span style="color:#f92672">&lt;/wheel_separation&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;wheel_diameter&gt;</span>0.1<span style="color:#f92672">&lt;/wheel_diameter&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;max_wheel_torque&gt;</span>50<span style="color:#f92672">&lt;/max_wheel_torque&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;max_wheel_acceleration&gt;</span>1.0<span style="color:#f92672">&lt;/max_wheel_acceleration&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;command_topic&gt;</span>cmd_vel<span style="color:#f92672">&lt;/command_topic&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;publish_odom&gt;</span>1<span style="color:#f92672">&lt;/publish_odom&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;publish_odom_tf&gt;</span>1<span style="color:#f92672">&lt;/publish_odom_tf&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;publish_wheel_tf&gt;</span>0<span style="color:#f92672">&lt;/publish_wheel_tf&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;odometry_topic&gt;</span>odom<span style="color:#f92672">&lt;/odometry_topic&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;odometry_frame&gt;</span>odom<span style="color:#f92672">&lt;/odometry_frame&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">&lt;robot_base_frame&gt;</span>base_footprint<span style="color:#f92672">&lt;/robot_base_frame&gt;</span>
</span></span><span style="display:flex;"><span>  <span style="color:#f92672">&lt;/plugin&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/gazebo&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">&lt;/robot&gt;</span>
</span></span></code></pre></div><ul>
<li>libgazebo_ros_joint_state_publisher</li>
</ul>
<table>
<thead>
<tr>
<th></th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>remapping</td>
<td>?? data type을 갖는 joint state topic 이름을 remapping 합니다.</td>
</tr>
<tr>
<td>update_rate</td>
<td>joint state topic의 publish rate</td>
</tr>
<tr>
<td>joint_name</td>
<td>tracking할 joint들이며 DD robot은 좌-우 2개가 될 것입니다.</td>
</tr>
</tbody>
</table>
<ul>
<li>libgazebo_ros_diff_drive</li>
</ul>
<table>
<thead>
<tr>
<th></th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>update_rate</td>
<td>state topic publish rate</td>
</tr>
<tr>
<td>left_joint, right_joint</td>
<td>DD type 로봇 URDF에서 좌-우 joint를 적어줍니다.</td>
</tr>
<tr>
<td>wheel_separation</td>
<td>좌-우 바퀴 사이의 거리</td>
</tr>
<tr>
<td>wheel_diameter</td>
<td>바퀴의 지름</td>
</tr>
<tr>
<td>max_&ldquo;value&rdquo;</td>
<td>제어와 관련된 물성치입니다. 정확하게 하고 싶다면 실제 모터 스펙을 통해 맞춰줍니다.</td>
</tr>
<tr>
<td>command_topic</td>
<td>Twist type을 갖는 로봇 제어 topic으로, 기본값은 cmd_vel입니다.</td>
</tr>
<tr>
<td>publish_odom</td>
<td>odometry topic의 publish 여부</td>
</tr>
<tr>
<td>publish_odom_tf</td>
<td>odometry tf2의 broadcast 여부 (topic과 tf2는 다른 개념입니다!)</td>
</tr>
<tr>
<td>publish_wheel_tf</td>
<td>양쪽 바퀴의 tf2 publish 여부</td>
</tr>
<tr>
<td>odometry_topic</td>
<td>odometry topic name</td>
</tr>
<tr>
<td>odometry_frame</td>
<td>odometry tf2 broadcast 시 사용될 이름</td>
</tr>
<tr>
<td>robot_base_frame</td>
<td>로봇 tf2가 시작되는 기준 frame</td>
</tr>
</tbody>
</table>
<ul>
<li>rviz2를 통해 odometry topic을 시각화해봅시다.</li>
</ul>
<p><img src="/kr/ros2_foxy/images12/gz_diff.gif?height=300px" alt="gz_diff.gif"></p>
<blockquote>
<p>Differential Drive Type은 Gazebo에서 기본 제공하지만, 이는 gazebo_ros가 만들어지기 전, Gazebo 개발자들이 로봇 예시를 위해 만들어둔 것일 뿐입니다. 따라서 좀 더 모던한 ros2_control 사용을 권장합니다.</p>
</blockquote>
<h2 id="gazebo-state-plugin">Gazebo State Plugin</h2>
<ul>
<li>일전 tf2 예시에서 사용되었던, 마치 행성과 위성 같은 시뮬레이션 기억하시나요?</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span>ros2 launch tf2_world tf2_world.launch.py
</span></span></code></pre></div><p><img src="/kr/ros2_foxy/images12/Untitled5.png?height=350px" alt="Untitled5.png"></p>
<ul>
<li>이 예시에서 gazebo_ros의 기본 topic을 통해 매우 정확한 위치 데이터를 사용하였습니다.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span>$ ros2 topic list
</span></span><span style="display:flex;"><span>/clock
</span></span><span style="display:flex;"><span>/link_states
</span></span><span style="display:flex;"><span>/model_states
</span></span><span style="display:flex;"><span>/parameter_events
</span></span><span style="display:flex;"><span>/performance_metrics
</span></span><span style="display:flex;"><span>/rosout
</span></span></code></pre></div><ul>
<li>이러한 topic들을 사용하고 싶다면, gazebo world file에 libgazebo_ros_state plugin을 추가하면 됩니다.</li>
</ul>


<footer class="footline">
	
</footer>

        
        </div>
        

      </div>

    <div id="navigation">
        
        

        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        

        


	 
	 
		
			<a class="nav nav-prev" href="/kr/ros2_foxy/lecture11/" title="Lecture11. About Gazebo - 1"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/kr/ros2_foxy/lecture13/" title="Lecture13. Useful ROS 2 Examples (Sensor Part)" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>

    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1683853056"></script>
    <script src="/js/perfect-scrollbar.min.js?1683853056"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1683853056"></script>
    <script src="/js/jquery.sticky.js?1683853056"></script>
    <script src="/js/featherlight.min.js?1683853056"></script>
    <script src="/js/highlight.pack.js?1683853056"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom-3.6.0.js?1683853056"></script>
    <script src="/js/learn.js?1683853056"></script>
    <script src="/js/hugo-learn.js?1683853056"></script>
    
        
            <script src="https://unpkg.com/mermaid@8.8.0/dist/mermaid.min.js"></script>
        
        <script>
            mermaid.initialize({ startOnLoad: true });
        </script>
    
    

  </body>
</html>

