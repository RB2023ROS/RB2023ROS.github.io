<!DOCTYPE html>
<html lang="kr" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.104.1" />
    <meta name="description" content="COM2018 OOP Class Lecture Note">
<meta name="author" content="Soo Young Kim">

    <link rel="icon" href="/images/favicon.png" type="image/png">

    <title>Lecture5. ROS 2 Communication Mechanisms - Documentation for Hugo Learn Theme</title>

    
    <link href="/css/nucleus.css?1688985563" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css?1688985563" rel="stylesheet">
    <link href="/css/hybrid.css?1688985563" rel="stylesheet">
    <link href="/css/featherlight.min.css?1688985563" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1688985563" rel="stylesheet">
    <link href="/css/auto-complete.css?1688985563" rel="stylesheet">
    <link href="/css/atom-one-dark-reasonable.css?1688985563" rel="stylesheet">
    <link href="/css/theme.css?1688985563" rel="stylesheet">
    <link href="/css/tabs.css?1688985563" rel="stylesheet">
    <link href="/css/hugo-theme.css?1688985563" rel="stylesheet">
    
    <link href="/css/theme-green.css?1688985563" rel="stylesheet">
    
    <link href="/css/foo.css?1688985563" rel="stylesheet"><link href="/css/bar.css?1688985563" rel="stylesheet">

    <script src="/js/jquery-3.3.1.min.js?1688985563"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/kr/ros2_foxy/lecture5/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <img width="1097" alt="image" src="https://user-images.githubusercontent.com/12381733/209764275-05dcbdbf-cef7-47ad-94a6-6d61febad01e.png">
    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js?1688985563"></script>
<script type="text/javascript" src="/js/auto-complete.js?1688985563"></script>
<script type="text/javascript">
    
        var baseurl = "\/\/kr";
    
</script>
<script type="text/javascript" src="/js/search.js?1688985563"></script>

    
  </div>
  
    <section id="homelinks">
      <ul>
        <li>
            <a class="padding" href='/kr'><i class='fas fa-home'></i> Home</a>
        </li>
      </ul>
    </section>
  

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/kr/ros_basic_noetic/" title="ROS Basics" class="dd-item
        
        
        
        ">
      <a href="/kr/ros_basic_noetic/">
          <b>ROS Noetic. </b>ROS Basics
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/kr/ros_basic_noetic/lecture1/" title="Lecture1 - Introduction to ROS" class="dd-item ">
        <a href="/kr/ros_basic_noetic/lecture1/">
        Lecture1 - Introduction to ROS
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros_basic_noetic/lecture2/" title="Lecture2 - Dev Env Setup" class="dd-item ">
        <a href="/kr/ros_basic_noetic/lecture2/">
        Lecture2 - Dev Env Setup
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros_basic_noetic/lecture3/" title="Lecture3 - Core of ROS" class="dd-item ">
        <a href="/kr/ros_basic_noetic/lecture3/">
        Lecture3 - Core of ROS
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros_basic_noetic/lecture4/" title="Lecture4 - ROS Launch, RViz" class="dd-item ">
        <a href="/kr/ros_basic_noetic/lecture4/">
        Lecture4 - ROS Launch, RViz
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros_basic_noetic/lecture5/" title="Lecture5 - First Programming, ROS Topic" class="dd-item ">
        <a href="/kr/ros_basic_noetic/lecture5/">
        Lecture5 - First Programming, ROS Topic
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros_basic_noetic/lecture6/" title="Lecture6 - ROS Service, Parameter" class="dd-item ">
        <a href="/kr/ros_basic_noetic/lecture6/">
        Lecture6 - ROS Service, Parameter
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros_basic_noetic/lecture7/" title="Lecture7 - Rqt Tools and rosbag, ROS Time" class="dd-item ">
        <a href="/kr/ros_basic_noetic/lecture7/">
        Lecture7 - Rqt Tools and rosbag, ROS Time
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros_basic_noetic/lecture8/" title="Lecture8 - Deal with Open Source Projects, Custom Interfaces" class="dd-item ">
        <a href="/kr/ros_basic_noetic/lecture8/">
        Lecture8 - Deal with Open Source Projects, Custom Interfaces
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros_basic_noetic/lecture9/" title="Lecture9 - ROS TF and Examples" class="dd-item ">
        <a href="/kr/ros_basic_noetic/lecture9/">
        Lecture9 - ROS TF and Examples
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros_basic_noetic/lecture10/" title="Lecture10 - TF2 Examples, Outro" class="dd-item ">
        <a href="/kr/ros_basic_noetic/lecture10/">
        Lecture10 - TF2 Examples, Outro
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/kr/advanced_contents_ros1/" title="ROS" class="dd-item
        
        
        
        ">
      <a href="/kr/advanced_contents_ros1/">
          <b>Advanced Contents. </b>ROS
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/kr/advanced_contents_ros1/lecture1/" title="Lecture1 - ROSCPP" class="dd-item ">
        <a href="/kr/advanced_contents_ros1/lecture1/">
        Lecture1 - ROSCPP
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/advanced_contents_ros1/lecture2/" title="Lecture2 - More About ROS System" class="dd-item ">
        <a href="/kr/advanced_contents_ros1/lecture2/">
        Lecture2 - More About ROS System
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/advanced_contents_ros1/lecture3/" title="Lecture3 - SROS" class="dd-item ">
        <a href="/kr/advanced_contents_ros1/lecture3/">
        Lecture3 - SROS
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/kr/ros2_basic_foxy/" title="ROS 2 Basics" class="dd-item
        
        
        
        ">
      <a href="/kr/ros2_basic_foxy/">
          <b>[Old]ROS 2 Foxy. </b>ROS 2 Basics
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/kr/ros2_basic_foxy/lecture1/" title="Lecture1 - Introduction to ROS 2" class="dd-item ">
        <a href="/kr/ros2_basic_foxy/lecture1/">
        Lecture1 - Introduction to ROS 2
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros2_basic_foxy/lecture2/" title="Lecture2 - ROS 2 Node, Package" class="dd-item ">
        <a href="/kr/ros2_basic_foxy/lecture2/">
        Lecture2 - ROS 2 Node, Package
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros2_basic_foxy/lecture3/" title="Lecture3 - ROS 2 Node Programming, ROS 2 parameter" class="dd-item ">
        <a href="/kr/ros2_basic_foxy/lecture3/">
        Lecture3 - ROS 2 Node Programming, ROS 2 parameter
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros2_basic_foxy/lecture4/" title="Lecture4 - ROS 2 Node C&#43;&#43; Programming" class="dd-item ">
        <a href="/kr/ros2_basic_foxy/lecture4/">
        Lecture4 - ROS 2 Node C&#43;&#43; Programming
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros2_basic_foxy/lecture5/" title="Lecture5 - ROS 2 Topic and Examples" class="dd-item ">
        <a href="/kr/ros2_basic_foxy/lecture5/">
        Lecture5 - ROS 2 Topic and Examples
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros2_basic_foxy/lecture6/" title="Lecture6 - ROS 2 Service and Examples" class="dd-item ">
        <a href="/kr/ros2_basic_foxy/lecture6/">
        Lecture6 - ROS 2 Service and Examples
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros2_basic_foxy/lecture7/" title="Lecture7 - Useful ROS 2 Example, Navigation2" class="dd-item ">
        <a href="/kr/ros2_basic_foxy/lecture7/">
        Lecture7 - Useful ROS 2 Example, Navigation2
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros2_basic_foxy/lecture8/" title="Lecture8 - ROS 2 Action and Examples" class="dd-item ">
        <a href="/kr/ros2_basic_foxy/lecture8/">
        Lecture8 - ROS 2 Action and Examples
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros2_basic_foxy/lecture9/" title="Lecture9 - C&#43;&#43; Programming Again, Outro" class="dd-item ">
        <a href="/kr/ros2_basic_foxy/lecture9/">
        Lecture9 - C&#43;&#43; Programming Again, Outro
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/kr/ros2_foxy/" title="ROS 2 Basics" class="dd-item
        parent
        
        
        ">
      <a href="/kr/ros2_foxy/">
          <b>[New]ROS 2 Foxy. </b>ROS 2 Basics
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/kr/ros2_foxy/lecture1/" title="Lecture1. What is ROS?" class="dd-item ">
        <a href="/kr/ros2_foxy/lecture1/">
        Lecture1. What is ROS?
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros2_foxy/lecture2/" title="Lecture2. Dev Env Setup" class="dd-item ">
        <a href="/kr/ros2_foxy/lecture2/">
        Lecture2. Dev Env Setup
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros2_foxy/lecture3/" title="Lecture3. Core of ROS" class="dd-item ">
        <a href="/kr/ros2_foxy/lecture3/">
        Lecture3. Core of ROS
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros2_foxy/lecture4/" title="Lecture4. ROS 2 Node and Parameter Programming" class="dd-item ">
        <a href="/kr/ros2_foxy/lecture4/">
        Lecture4. ROS 2 Node and Parameter Programming
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros2_foxy/lecture5/" title="Lecture5. ROS 2 Communication Mechanisms" class="dd-item active">
        <a href="/kr/ros2_foxy/lecture5/">
        Lecture5. ROS 2 Communication Mechanisms
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros2_foxy/lecture6/" title="Lecture6. ROS 2 Tools" class="dd-item ">
        <a href="/kr/ros2_foxy/lecture6/">
        Lecture6. ROS 2 Tools
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros2_foxy/lecture7/" title="Lecture7. ROS 2 Topic and Programming" class="dd-item ">
        <a href="/kr/ros2_foxy/lecture7/">
        Lecture7. ROS 2 Topic and Programming
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros2_foxy/lecture8/" title="Lecture8. ROS 2 Service and Programming" class="dd-item ">
        <a href="/kr/ros2_foxy/lecture8/">
        Lecture8. ROS 2 Service and Programming
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros2_foxy/lecture9/" title="Lecture9. ROS 2 Action Programming" class="dd-item ">
        <a href="/kr/ros2_foxy/lecture9/">
        Lecture9. ROS 2 Action Programming
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros2_foxy/lecture10/" title="Lecture10. TF and ROS 2" class="dd-item ">
        <a href="/kr/ros2_foxy/lecture10/">
        Lecture10. TF and ROS 2
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros2_foxy/lecture11/" title="Lecture11. About Gazebo - 1" class="dd-item ">
        <a href="/kr/ros2_foxy/lecture11/">
        Lecture11. About Gazebo - 1
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros2_foxy/lecture12/" title="Lecture12. About Gazebo - 2" class="dd-item ">
        <a href="/kr/ros2_foxy/lecture12/">
        Lecture12. About Gazebo - 2
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros2_foxy/lecture13/" title="Lecture13. Useful ROS 2 Examples (Sensor Part)" class="dd-item ">
        <a href="/kr/ros2_foxy/lecture13/">
        Lecture13. Useful ROS 2 Examples (Sensor Part)
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros2_foxy/lecture14/" title="Lecture14. Useful ROS 2 Examples (Control Part)" class="dd-item ">
        <a href="/kr/ros2_foxy/lecture14/">
        Lecture14. Useful ROS 2 Examples (Control Part)
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros2_foxy/lecture15/" title="Lecture15. Advanced ROS 2, Package Management" class="dd-item ">
        <a href="/kr/ros2_foxy/lecture15/">
        Lecture15. Advanced ROS 2, Package Management
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros2_foxy/lecture16/" title="Lecture16. Useful ROS 2 Examples (Misc)" class="dd-item ">
        <a href="/kr/ros2_foxy/lecture16/">
        Lecture16. Useful ROS 2 Examples (Misc)
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros2_foxy/lecture17/" title="Lecture17. Real Hardware Examples" class="dd-item ">
        <a href="/kr/ros2_foxy/lecture17/">
        Lecture17. Real Hardware Examples
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros2_foxy/lecture18/" title="Lecture18. Point Cloud Deep Learning Example (PointNet)" class="dd-item ">
        <a href="/kr/ros2_foxy/lecture18/">
        Lecture18. Point Cloud Deep Learning Example (PointNet)
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros2_foxy/lecture19/" title="Lecture19. Orbbec ROS 2 Package - Final" class="dd-item ">
        <a href="/kr/ros2_foxy/lecture19/">
        Lecture19. Orbbec ROS 2 Package - Final
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros2_foxy/lecture20/" title="Lecture20. NVIDIA Jetson Platform" class="dd-item ">
        <a href="/kr/ros2_foxy/lecture20/">
        Lecture20. NVIDIA Jetson Platform
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/kr/advanced_contents_ros2/" title="ROS 2" class="dd-item
        
        
        
        ">
      <a href="/kr/advanced_contents_ros2/">
          <b>Advanced Contents. </b>ROS 2
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/kr/advanced_contents_ros2/lecture1/" title="Lecture1 - About DDS" class="dd-item ">
        <a href="/kr/advanced_contents_ros2/lecture1/">
        Lecture1 - About DDS
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/advanced_contents_ros2/lecture2/" title="Lecture11 - About DDS (2)" class="dd-item ">
        <a href="/kr/advanced_contents_ros2/lecture2/">
        Lecture11 - About DDS (2)
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/advanced_contents_ros2/lecture3/" title="Lecture12 - SROS2" class="dd-item ">
        <a href="/kr/advanced_contents_ros2/lecture3/">
        Lecture12 - SROS2
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/kr/ros_and_gazebo/" title="Gazebo and ROS" class="dd-item
        
        
        
        ">
      <a href="/kr/ros_and_gazebo/">
          <b>Gazebo. </b>Gazebo and ROS
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/kr/ros_and_gazebo/lecture1/" title="Lecture1 - Gazebo and Robot" class="dd-item ">
        <a href="/kr/ros_and_gazebo/lecture1/">
        Lecture1 - Gazebo and Robot
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros_and_gazebo/lecture2/" title="Lecture2 - Gazebo and Robot(2)" class="dd-item ">
        <a href="/kr/ros_and_gazebo/lecture2/">
        Lecture2 - Gazebo and Robot(2)
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
        
    </ul>

    
    
      <section id="shortcuts">
        <h3></h3>
        <ul>
          
              <li>
                  <a class="padding" href="https://github.com/RB2023ROS/du2023-ros1"><i class='fab fa-fw fa-github'></i> GitHub repo - ROS 1</a>
              </li>
          
              <li>
                  <a class="padding" href="https://github.com/RB2023ROS/du2023-ros2"><i class='fab fa-fw fa-github'></i> GitHub repo - ROS 2</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="prefooter">
      <hr/>
      <ul>
      
        <li>
          <a class="padding">
            <i class="fas fa-language fa-fw"></i>
          <div class="select-style">
            <select id="select-language" onchange="location = this.value;">
          
          
          
              
              
                  
                    
                    
                      <option id="kr" value="/kr/ros2_foxy/lecture5/" selected>Korean</option>
                    
                  
              
                  
              
          
        </select>
        <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
          width="255px" height="255px" viewBox="0 0 255 255" style="enable-background:new 0 0 255 255;" xml:space="preserve">
          <g>
            <g id="arrow-drop-down">
              <polygon points="0,63.75 127.5,191.25 255,63.75 		" />
            </g>
          </g>
        </svg>
        </div>
        </a>
        </li>
      

      
      </ul>
    </section>
    
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fas fa-heart"></i></a> from <a href="https://getgrav.org">Grav</a> and <a href="https://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                  
                  
                  
                  <div id="top-github-link">
                    <a class="github-link" title='' href="https://github.com/com2018-fa22/hugo-blog/tree/main/content/ros2_foxy/lecture5.kr.md" target="blank">
                      <i class="fas fa-code-branch"></i>
                      <span id="top-github-link-text"></span>
                    </a>
                  </div>
                  
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                   Lecture5. ROS 2 Communication Mechanisms
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li><a href="#ros-2-topic">ROS 2 Topic</a>
      <ul>
        <li><a href="#topic을-통해-데이터가-전달되는-과정은-다음과-같습니다">topic을 통해 데이터가 전달되는 과정은 다음과 같습니다.</a></li>
      </ul>
    </li>
    <li><a href="#ros-2-topic-msg">ROS 2 Topic msg</a></li>
    <li><a href="#ros-2-topic-cli">ROS 2 Topic CLI</a></li>
    <li><a href="#ros-2-service">ROS 2 Service</a>
      <ul>
        <li><a href="#service-개념-정리">Service 개념 정리</a></li>
      </ul>
    </li>
    <li><a href="#ros-2-service-cli">ROS 2 Service CLI</a></li>
    <li><a href="#ros-2-action">ROS 2 Action</a></li>
    <li><a href="#ros-2-action-cli">ROS 2 Action CLI</a></li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Lecture5. ROS 2 Communication Mechanisms
            </h1>
          

        


<blockquote>
<p>이번 시간에는 ROS 2의 핵심인 3가지 통신 메커니즘(Topic,Service, Action)에 대해서 개념을 다잡고 넘어가고자 합니다. 프로그래밍은 없지만, 각각의 통신 메커니즘들에 대해 반드시 숙지하고 넘어가시기 바랍니다!</p>
</blockquote>
<h2 id="ros-2-topic">ROS 2 Topic</h2>
<ul>
<li>3강의 husky 예시 실행 후 살펴보았던 rqt_graph 이미지입니다.</li>
</ul>
<p><img src="/kr/ros2_foxy/images5/rosgraph.png?height=300px" alt="rosgraph.png"></p>
<p>⇒ 위 그림에서 동그라미는 Node를 뜻하고, 화살표는 topic을 뜻하는데요, 첫번째로 이 <strong>Topic</strong>이라는 것이 무엇인지 배워보고자 합니다.</p>
<ul>
<li>Topic은 Node들 사이에 데이터(Message)가 오가는 길(Bus)의 이름이며, 적절한 이름으로 데이터를 송수신하지 않으면 원하는 동작을 수행할 수 없습니다. ROS 2에서 사용하는 DDS는 목적지를 정해두고 통신하는 것이 아니라 통신 매개체의 ID를 통해 송수신하기 때문에 기존 웹 기반 통신과는 다른 개념임을 상기드립니다.</li>
</ul>
<p><img src="/kr/ros2_foxy/images5/topic.gif?height=300px" alt="topic.gif"></p>
<p>image from : <a href="https://docs.ros.org/en/foxy/Tutorials/Topics/Understanding-ROS2-Topics.html">docs.ros.org</a></p>
<ul>
<li>Topic은 N:N 통신이 가능합니다. (여러 Node들로부터 데이터를 받을 수 있고, 전송 시에도 여러 Node들에게 전송이 가능합니다. 하지만 대부분 1:N 혹은 1:1, N:1로 사용합니다.)</li>
</ul>
<p><img src="/kr/ros2_foxy/images5/topic2.gif?height=300px" alt="topic2.gif"></p>
<p>image from : <a href="https://docs.ros.org/en/foxy/Tutorials/Topics/Understanding-ROS2-Topics.html">docs.ros.org</a></p>
<h3 id="topic을-통해-데이터가-전달되는-과정은-다음과-같습니다">topic을 통해 데이터가 전달되는 과정은 다음과 같습니다.</h3>
<ul>
<li>데이터를 보내는 주체인 <strong>publisher</strong>는 데이터를 받는 주체, <strong>subscriber</strong>를 지정한 뒤, topic을 통해 원하는 정보를 전달합니다. 이것을 <strong>topic publish</strong>라고 부르지요.</li>
<li>반대로, 데이터를 받는 주체인 <strong>subscriber</strong> 입장에선 topic을 통해 데이터를 받게 되며 이것은 <strong>topic subscribe</strong>라고 불립니다.</li>
</ul>
<h2 id="ros-2-topic-msg">ROS 2 Topic msg</h2>
<ul>
<li>로봇 프로그래밍 시 센서, 제어 데이터를 비롯하여 다양한 유형의 데이터들이 Topic을 통해 오고 갑니다. ROS에서는 이러한 데이터 형식을 msg(Message)라는 형태로 제공하며, 원하는 데이터에 적합한 topic msg를 사용하면 더욱 효율적인 로봇 프로그래밍이 가능해집니다.</li>
</ul>
<p><img src="/kr/ros2_foxy/images5/Untitled.png?height=300px" alt="Untitled.png"></p>
<p>image from : <a href="https://ethz.ch/content/dam/ethz/special-interest/mavt/robotics-n-intelligent-systems/rsl-dam/ROS2021/lec4/ROS%20Course%20Slides%20Course%204.pdf">ethz.ch</a></p>
<ul>
<li>ROS 1과 ROS 2는, msg를 구분하는 필드에서 차이를 보입니다.</li>
</ul>
<table>
<thead>
<tr>
<th>ROS 1</th>
<th>geometry_msgs/Twist</th>
</tr>
</thead>
<tbody>
<tr>
<td>ROS 2</td>
<td>geometry_msgs/msg/Twist</td>
</tr>
</tbody>
</table>
<ul>
<li>세부 필드 정보를 위해 구글링을 하면 ROS 1 결과가 나올 때가 있는데 해당하는 필드를 중간에 추가해주시면 됩니다.</li>
</ul>
<p><img src="/kr/ros2_foxy/images5/Untitled1.png?height=300px" alt="Untitled1.png"></p>
<ul>
<li>출처 : <a href="http://docs.ros.org/en/melodic/api/geometry_msgs/html/msg/Twist.html">http://docs.ros.org/</a></li>
</ul>
<h2 id="ros-2-topic-cli">ROS 2 Topic CLI</h2>
<blockquote>
<p>ROS에서는 topic에 대한 정보, 파싱, 송수신과 같은 여러 인터페이싱이 가능하도록 CLI를 제공하고 있습니다. topic과 msg에 대한 CLI들을 살펴봅시다!</p>
</blockquote>
<ul>
<li>이번 예시를 위해 2개의 터미널을 실행하고 아래와 같은 명령어를 각각 입력합니다. (그리고 세번째 터미널에서 이어지는 학습을 진행하시면 됩니다.)</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Terminal 1</span>
</span></span><span style="display:flex;"><span>$ ros2 topic pub /chatter std_msgs/String <span style="color:#e6db74">&#34;data: Hello ROS Developers&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Terminal 2</span>
</span></span><span style="display:flex;"><span>$ ros2 topic echo /chatter
</span></span></code></pre></div><ul>
<li><strong>ros2 topic list</strong> ⇒ 사용중인 topic list 조회</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ ros2 topic list
</span></span><span style="display:flex;"><span>/topic_a
</span></span><span style="display:flex;"><span>/topic_b
</span></span><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span>/clock
</span></span><span style="display:flex;"><span>/parameter_events
</span></span><span style="display:flex;"><span>/performance_metrics
</span></span><span style="display:flex;"><span>/rosout
</span></span></code></pre></div><ul>
<li><strong>ros2 topic info</strong> ⇒ 특정 topic에 대한 자세한 정보 조회</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ ros2 topic info /chatter
</span></span><span style="display:flex;"><span>Type: std_msgs/msg/String
</span></span><span style="display:flex;"><span>Publisher count: <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>Subscription count: <span style="color:#ae81ff">1</span>
</span></span></code></pre></div><p>⇒ verbose option을 통해 더욱 자세한 내용을 알 수 있지만 지금은 넘어가겠습니다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-cpp" data-lang="cpp"><span style="display:flex;"><span><span style="color:#960050;background-color:#1e0010">$</span> ros2 topic info <span style="color:#f92672">/</span>chatter <span style="color:#f92672">--</span>verbose
</span></span><span style="display:flex;"><span>Type: std_msgs<span style="color:#f92672">/</span>msg<span style="color:#f92672">/</span>String
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Publisher count: <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Node name: _ros2cli_84037
</span></span><span style="display:flex;"><span>Node <span style="color:#66d9ef">namespace</span><span style="color:#f92672">:</span> <span style="color:#f92672">/</span>
</span></span><span style="display:flex;"><span>Topic type: std_msgs<span style="color:#f92672">/</span>msg<span style="color:#f92672">/</span>String
</span></span><span style="display:flex;"><span>Endpoint type: PUBLISHER
</span></span><span style="display:flex;"><span>GID: <span style="color:#ae81ff">30.06.10.01.46.68</span>.e4<span style="color:#ae81ff">.44.22</span>.bd.f2<span style="color:#ae81ff">.21.00.00.08.03.00.00.00.00.00.00.00.00</span>
</span></span><span style="display:flex;"><span>QoS profile:
</span></span><span style="display:flex;"><span>  Reliability: RMW_QOS_POLICY_RELIABILITY_RELIABLE
</span></span><span style="display:flex;"><span>  Durability: RMW_QOS_POLICY_DURABILITY_VOLATILE
</span></span><span style="display:flex;"><span>  Lifespan: <span style="color:#ae81ff">9223372036854775807</span> nanoseconds
</span></span><span style="display:flex;"><span>  Deadline: <span style="color:#ae81ff">9223372036854775807</span> nanoseconds
</span></span><span style="display:flex;"><span>  Liveliness: RMW_QOS_POLICY_LIVELINESS_AUTOMATIC
</span></span><span style="display:flex;"><span>  Liveliness lease duration: <span style="color:#ae81ff">9223372036854775807</span> nanoseconds
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Subscription count: <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Node name: _ros2cli_84065
</span></span><span style="display:flex;"><span>Node <span style="color:#66d9ef">namespace</span><span style="color:#f92672">:</span> <span style="color:#f92672">/</span>
</span></span><span style="display:flex;"><span>Topic type: std_msgs<span style="color:#f92672">/</span>msg<span style="color:#f92672">/</span>String
</span></span><span style="display:flex;"><span>Endpoint type: SUBSCRIPTION
</span></span><span style="display:flex;"><span>GID: <span style="color:#ae81ff">48.95.10.01</span>.ea.a0.fa.d5<span style="color:#ae81ff">.31</span>.c6<span style="color:#ae81ff">.85.40.00.00.08.04.00.00.00.00.00.00.00.00</span>
</span></span><span style="display:flex;"><span>QoS profile:
</span></span><span style="display:flex;"><span>  Reliability: RMW_QOS_POLICY_RELIABILITY_BEST_EFFORT
</span></span><span style="display:flex;"><span>  Durability: RMW_QOS_POLICY_DURABILITY_VOLATILE
</span></span><span style="display:flex;"><span>  Lifespan: <span style="color:#ae81ff">9223372036854775807</span> nanoseconds
</span></span><span style="display:flex;"><span>  Deadline: <span style="color:#ae81ff">9223372036854775807</span> nanoseconds
</span></span><span style="display:flex;"><span>  Liveliness: RMW_QOS_POLICY_LIVELINESS_AUTOMATIC
</span></span><span style="display:flex;"><span>  Liveliness lease duration: <span style="color:#ae81ff">9223372036854775807</span> nanoseconds
</span></span></code></pre></div><ul>
<li>ros2 topic type ⇒ 해당 topic이 사용중인 msg 조회</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ ros2 topic type /chatter
</span></span><span style="display:flex;"><span>std_msgs/msg/String
</span></span></code></pre></div><ul>
<li>ros2 interface show ⇒ 특정 msg 정보 조회</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ ros2 interface show std_msgs/msg/String
</span></span><span style="display:flex;"><span><span style="color:#75715e"># This was originally provided as an example message.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># It is deprecated as of Foxy</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># It is recommended to create your own semantically meaningful message.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># However if you would like to continue using this please use the equivalent in example_msgs.</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>string data
</span></span></code></pre></div><ul>
<li>ros2 topic echo ⇒ 특정 topic 데이터를 엿볼 수 있습니다.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ ros2 topic echo /chatter
</span></span><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span>data: Hello ROS Developers
</span></span><span style="display:flex;"><span>---
</span></span><span style="display:flex;"><span>data: Hello ROS Developers
</span></span><span style="display:flex;"><span>---
</span></span></code></pre></div><ul>
<li>ros2 topic hz ⇒ topic의 publish/subscribe 주기를 분석할 수 있습니다.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ ros2 topic hz /chatter
</span></span><span style="display:flex;"><span>average rate: 1.000
</span></span><span style="display:flex;"><span>	min: 1.000s max: 1.000s std dev: 0.00013s window: <span style="color:#ae81ff">3</span>
</span></span><span style="display:flex;"><span>average rate: 1.000
</span></span><span style="display:flex;"><span>	min: 1.000s max: 1.000s std dev: 0.00017s window: <span style="color:#ae81ff">5</span>
</span></span><span style="display:flex;"><span>...
</span></span></code></pre></div><ul>
<li>ros2 topic pub ⇒ 프로그래밍 없이 터미널 라인에서 publish가 가능합니다. (단, 주로 간단한 문자열 정도에만 사용되며 이미지 데이터 등에는 사용이 불가합니다.)</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ ros2 topic pub /chatter std_msgs/String <span style="color:#e6db74">&#34;data: Hello ROS Developers&#34;</span>
</span></span><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span>publishing <span style="color:#75715e">#1: std_msgs.msg.String(data=&#39;Hello ROS Developers&#39;)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>publishing <span style="color:#75715e">#2: std_msgs.msg.String(data=&#39;Hello ROS Developers&#39;)</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>publishing <span style="color:#75715e">#3: std_msgs.msg.String(data=&#39;Hello ROS Developers&#39;)</span>
</span></span></code></pre></div><ul>
<li>ROS 2 Topic CLI 정리</li>
</ul>
<table>
<thead>
<tr>
<th>CMD</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>ros2 topic list</td>
<td>전체 topic 조회</td>
</tr>
<tr>
<td>ros2 topic info</td>
<td>특정 topic 정보 조회</td>
</tr>
<tr>
<td>ros2 topic type</td>
<td>특정 topic type 조회</td>
</tr>
<tr>
<td>ros2 interface show</td>
<td>msg type 조회</td>
</tr>
<tr>
<td>ros2 topic echo</td>
<td>topic 엿보기</td>
</tr>
<tr>
<td>ros2 topic hz</td>
<td>topic pub/sub 주기 조회</td>
</tr>
<tr>
<td>ros2 topic pub</td>
<td>간단한 publish</td>
</tr>
</tbody>
</table>
<h2 id="ros-2-service">ROS 2 Service</h2>
<blockquote>
<p>Topic에 이어 ROS의 통신 메커니즘 두번째로 Service를 배워보겠습니다.</p>
</blockquote>
<ul>
<li>Client Node가 Server Node로 <strong>request</strong>를 주면, 해당 request에 대응하는 적절한 <strong>response</strong>가 다시 Client에게로 전달됩니다. 이 과정을 <strong>Service Call</strong>이라고 부릅니다.</li>
</ul>
<p><img src="/kr/ros2_foxy/images5/service1.gif?height=300px" alt="service1.gif"></p>
<p>image from : <a href="https://docs.ros.org/en/foxy/Tutorials/Services/Understanding-ROS2-Services.html">docs.ros.org</a></p>
<ul>
<li>하나의 Service Server에는 여러 Client Node가 request 할 수 있지만, <strong>Server는 동시에 여러 request를 처리하지는 못합니다.</strong> 두 Node에서 동시에 request가 왔다면, 조금이라도 먼저 통신한 Node의 작업을 우선 진행하고, 그동안 다른 Node는 기다리고 있어야 합니다.</li>
</ul>
<p><img src="/kr/ros2_foxy/images5/service2.gif?height=300px" alt="service2.gif"></p>
<p>image from : <a href="https://docs.ros.org/en/foxy/Tutorials/Services/Understanding-ROS2-Services.html">https://docs.ros.org/en/foxy/Tutorials/Services/Understanding-ROS2-Services.html</a></p>
<h3 id="service-개념-정리">Service 개념 정리</h3>
<ul>
<li>Service를 요청하는 주체를 <strong>Service Client</strong>라고 하며, Service 요청 자체를 <strong>Request</strong>(혹은 Call)라고 합니다.</li>
<li>Service를 요청받는 주체를 <strong>Service Server</strong>라고 하며, Service Server는 Request에 대한 응답, 즉 Service <strong>Response</strong>를 다시 Service Client에게 회답합니다.</li>
<li>Request와 Response를 위해 사용되는 데이터 타입은 <strong>srv</strong>라고 하며 Request와 Response로 나뉩니다.</li>
</ul>
<p>Service의 중요한 특징 ⇒ 하나의 Service Server에 여러 Client가 request 할 수 있지만, <strong>Server는 동시에 여러 request를 처리하지 못합니다.</strong></p>
<p><img src="/kr/ros2_foxy/images5/service2.gif?height=300px" alt="service2.gif"></p>
<p>image from : <a href="https://docs.ros.org/en/foxy/Tutorials/Services/Understanding-ROS2-Services.html">docs.ros.org</a></p>
<p><strong>마지막으로, Topic과 비교하여 Service의 특징을 알아봅시다.</strong></p>
<ul>
<li>1:1 통신 : Topic publish를 하면 여러 Node가 Subscribe 가능합니다. 반면, <strong>Service는 request가 온 대상에게만 response를 줍니다.</strong></li>
<li>순차적 통신 : Service Server는 동시에 여러 request를 처리할 수 없습니다. <strong>현재 작업중인 request가 처리될 때 까지 다른 request는 기다리고 있어야 합니다.</strong></li>
<li>단발성 : Topic은 대부분 <strong>지속적으로</strong> publish를 진행하는 반면, Service는 <strong>1회성</strong> 통신입니다.</li>
</ul>
<h2 id="ros-2-service-cli">ROS 2 Service CLI</h2>
<blockquote>
<p>Service는 Topic과는 다르게 일회성이기 때문에 CLI를 사용할 일이 매우 잦습니다. 자주 사용되는 만큼 얼른 학습해봅시다!</p>
</blockquote>
<ul>
<li>이번 학습을 위해 일전의 husky simulator를 실행하겠습니다.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>ros2 launch husky_gazebo husky_playpen.launch.py
</span></span></code></pre></div><p><img src="/kr/ros2_foxy/images5/Untitled2.png?height=400px" alt="Untitled2.png"></p>
<ul>
<li>ros2 service list ⇒ 전체 service list를 조회합니다.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ ros2 service list
</span></span><span style="display:flex;"><span>/controller_manager/configure_and_start_controller
</span></span><span style="display:flex;"><span>/controller_manager/configure_controller
</span></span><span style="display:flex;"><span>/controller_manager/describe_parameters
</span></span><span style="display:flex;"><span>...
</span></span></code></pre></div><ul>
<li>ros2 service type ⇒ 특정 service에 대한 정보를 조회합니다. (사용되는 type 정도를 알 수 있습니다.)</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ ros2 service type /controller_manager/configure_and_start_controller
</span></span><span style="display:flex;"><span>controller_manager_msgs/srv/ConfigureStartController
</span></span></code></pre></div><ul>
<li>ros2 interface show ⇒ Topic의 msg와 유사하게, Service에는 srv가 존재하는데요, 이 타입에 대한 자세한 정보를 조회할 수 있습니다.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ ros2 interface show controller_manager_msgs/srv/ConfigureStartController
</span></span><span style="display:flex;"><span><span style="color:#75715e"># The ConfigureStartController service allows you to configure and start a single controller</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># inside controller_manager</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># To configure and start a controller, specify the &#34;name&#34; of the controller.</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># The return value &#34;ok&#34; indicates if the controller was successfully</span>
</span></span><span style="display:flex;"><span><span style="color:#75715e"># configured and started or not.</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>string name
</span></span><span style="display:flex;"><span>---
</span></span><span style="display:flex;"><span>bool ok
</span></span></code></pre></div><p>서비스 타입 중간에 보이는 <strong>- - -</strong> 부분은 request와 response의 구분자라고 생각하시면 됩니다.</p>
<ul>
<li>ros2 service call ⇒ 커멘드 라인 상에서 Service Call을 할 수 있습니다. 간단한 service를 실행해보겠습니다.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ ros2 service call /get_model_list gazebo_msgs/srv/GetModelList <span style="color:#f92672">{}</span>
</span></span><span style="display:flex;"><span>requester: making request: gazebo_msgs.srv.GetModelList_Request<span style="color:#f92672">()</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>response:
</span></span><span style="display:flex;"><span>gazebo_msgs.srv.GetModelList_Response<span style="color:#f92672">(</span>header<span style="color:#f92672">=</span>std_msgs.msg.Header<span style="color:#f92672">(</span>stamp<span style="color:#f92672">=</span>builtin_interfaces.msg.Time<span style="color:#f92672">(</span>sec<span style="color:#f92672">=</span>1594, nanosec<span style="color:#f92672">=</span>330000000<span style="color:#f92672">)</span>, frame_id<span style="color:#f92672">=</span><span style="color:#e6db74">&#39;&#39;</span><span style="color:#f92672">)</span>, model_names<span style="color:#f92672">=[</span><span style="color:#e6db74">&#39;ground_plane&#39;</span>, <span style="color:#e6db74">&#39;jersey_barrier&#39;</span>, <span style="color:#e6db74">&#39;jersey_barrier_0&#39;</span>, <span style="color:#e6db74">&#39;jersey_barrier_1&#39;</span>, <span style="color:#e6db74">&#39;jersey_barrier_2&#39;</span>, <span style="color:#e6db74">&#39;jersey_barrier_3&#39;</span>, <span style="color:#e6db74">&#39;jersey_barrier_4&#39;</span>, <span style="color:#e6db74">&#39;jersey_barrier_5&#39;</span>, <span style="color:#e6db74">&#39;jersey_barrier_6&#39;</span>, <span style="color:#e6db74">&#39;jersey_barrier_7&#39;</span>, <span style="color:#e6db74">&#39;jersey_barrier_8&#39;</span>, <span style="color:#e6db74">&#39;jersey_barrier_9&#39;</span>, <span style="color:#e6db74">&#39;jersey_barrier_10&#39;</span>, <span style="color:#e6db74">&#39;jersey_barrier_11&#39;</span>, <span style="color:#e6db74">&#39;jersey_barrier_12&#39;</span>, <span style="color:#e6db74">&#39;jersey_barrier_13&#39;</span>, <span style="color:#e6db74">&#39;jersey_barrier_14&#39;</span>, <span style="color:#e6db74">&#39;fire_hydrant&#39;</span>, <span style="color:#e6db74">&#39;fire_hydrant_0&#39;</span>, <span style="color:#e6db74">&#39;fire_hydrant_1&#39;</span>, <span style="color:#e6db74">&#39;Dumpster&#39;</span>, <span style="color:#e6db74">&#39;Dumpster_0&#39;</span>, <span style="color:#e6db74">&#39;jersey_barrier_15&#39;</span>, <span style="color:#e6db74">&#39;Construction Cone&#39;</span>, <span style="color:#e6db74">&#39;Construction Barrel&#39;</span>, <span style="color:#e6db74">&#39;Construction Cone_0&#39;</span>, <span style="color:#e6db74">&#39;Construction Barrel_0&#39;</span>, <span style="color:#e6db74">&#39;asphalt_plane&#39;</span>, <span style="color:#e6db74">&#39;Construction Barrel_1&#39;</span>, <span style="color:#e6db74">&#39;Construction Barrel_2&#39;</span>, <span style="color:#e6db74">&#39;Construction Barrel_3&#39;</span>, <span style="color:#e6db74">&#39;Construction Barrel_4&#39;</span>, <span style="color:#e6db74">&#39;Construction Barrel_5&#39;</span>, <span style="color:#e6db74">&#39;Construction Barrel_6&#39;</span>, <span style="color:#e6db74">&#39;Construction Barrel_7&#39;</span>, <span style="color:#e6db74">&#39;Construction Cone_1&#39;</span>, <span style="color:#e6db74">&#39;husky&#39;</span><span style="color:#f92672">]</span>, success<span style="color:#f92672">=</span>True<span style="color:#f92672">)</span>
</span></span></code></pre></div><p>⇒ Gazebo 상에 존재하는 모델들의 리스트를 response로 받았습니다. (gazebo ros에서 이러한 기능들이 제공됩니다.)</p>
<ul>
<li>ROS 2 Service CLI 정리</li>
</ul>
<table>
<thead>
<tr>
<th>CMD</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>ros2 service list</td>
<td>전체 Service 리스트</td>
</tr>
<tr>
<td>ros2 service type</td>
<td>특정 Service가 사용하는 데이터 타입 조회</td>
</tr>
<tr>
<td>ros2 interface show</td>
<td>특정 srv에 대한 자세한 정보 조회</td>
</tr>
<tr>
<td>ros2 service call</td>
<td>터미널을 통해 Service Call</td>
</tr>
</tbody>
</table>
<h2 id="ros-2-action">ROS 2 Action</h2>
<blockquote>
<p>ROS 2의 마지막 통신 메커니즘인 Action을 배워보겠습니다.</p>
</blockquote>
<ul>
<li>복습 차원에서 Service의 중요한 특징 한 가지를 복기해보겠습니다. 하나의 Service Server에 여러 Client가 request 할 수 있지만, <strong>Server는 동시에 여러 request를 처리하지 못합니다.</strong></li>
</ul>
<p><img src="/kr/ros2_foxy/images5/service2.gif?height=300px" alt="service2.gif"></p>
<ul>
<li>image from : <a href="https://docs.ros.org/en/foxy/Tutorials/Services/Understanding-ROS2-Services.html">docs.ros.org</a></li>
</ul>
<p>Action은 바로 이러한 Service의 단점을 극복하기 위해 탄생한 통신 메커니즘입니다. Action은 Service와 Topic의 특성을 모두 갖고 있으며, 실제로 가장 늦게 탄생한 통신 메커니즘입니다.</p>
<p><strong>Action의 특징</strong></p>
<ol>
<li><strong>action client</strong>는 action server가 Result를 보내기 전까지 마냥 기다리지 않고, 다른 일을 할 수 있습니다.</li>
<li><strong>action client</strong>는 Result Response를 받기 전에도 지속적으로 Feedback을 받을 수 있습니다.</li>
<li>따라서, Feedback을 받고 있다가, 뭔가 잘못 돌아가고 있다는 것을 감지한 경우 cancel을 할 수도 있습니다.</li>
</ol>
<p>⇒ 하지만, 여러 request를 동시에 작업하는 것이나, Feedback 중에 topic subscribe와 같은 작업은 본질적으로 불가합니다. 이에 대한 해결 방법도 후에 살펴보겠습니다.</p>
<p><img src="/kr/ros2_foxy/images5/action.gif?height=300px" alt="action.gif"></p>
<ul>
<li>image from : <a href="https://docs.ros.org/en/foxy/Tutorials/Understanding-ROS2-Actions.html">https://docs.ros.org/en/foxy/Tutorials/Understanding-ROS2-Actions.html</a></li>
</ul>
<p>사진과 같이 Action Client와 Server가 주고받는 내용은 크게 5가지가 있습니다.</p>
<ol>
<li>Client ⇒ Server, Goal Request (service request와 유사합니다.)</li>
<li>server ⇒ client, Goal Response</li>
<li>client ⇒ server, Result Request</li>
<li>server ⇒ client, Feedback (topic과 유사합니다.)</li>
<li>server ⇒ client, Result Response</li>
</ol>

<div class="notices tip" ><p>만약 4번 도중 cancel이 발생하면 Action은 종료됩니다.</p>
</div>

<blockquote>
<p>이렇게 Action은 Topic, Service의 특징을 모두 갖고 있으며 Feedback 결과에 따라 Cancel이라는 추가 기능까지 갖추고 있는 복잡한 통신 메커니즘입니다.</p>
</blockquote>
<h2 id="ros-2-action-cli">ROS 2 Action CLI</h2>
<ul>
<li>이번 예시를 위해 turtlesim이라는 프로그램을 실행시킨 뒤, 실습을 진행해봅시다.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo apt install ros-foxy-turtlesim -y
</span></span><span style="display:flex;"><span>ros2 run turtlesim turtlesim_node
</span></span></code></pre></div><p><img src="/kr/ros2_foxy/images5/Untitled3.png?height=400px" alt="Untitled3.png"></p>
<ul>
<li>ros2 action list ⇒ 실행 중인 action들을 조회 가능합니다.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ ros2 action list
</span></span><span style="display:flex;"><span>/turtle1/rotate_absolute
</span></span></code></pre></div><ul>
<li>ros2 action info ⇒ ****특정 action의 정보를 조회합니다.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ ros2 action info /turtle1/rotate_absolute
</span></span><span style="display:flex;"><span>Action: /turtle1/rotate_absolute
</span></span><span style="display:flex;"><span>Action clients: <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>Action servers: <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>    /turtlesim
</span></span></code></pre></div><ul>
<li>ros2 interface show ⇒ Action에서 사용되는 데이터 타입은 <strong>action</strong>입니다. 이에 대한 자세한 정보를 조회합니다.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ ros2 interface show turtlesim/action/RotateAbsolute
</span></span><span style="display:flex;"><span><span style="color:#75715e"># The desired heading in radians</span>
</span></span><span style="display:flex;"><span>float32 theta
</span></span><span style="display:flex;"><span>---
</span></span><span style="display:flex;"><span><span style="color:#75715e"># The angular displacement in radians to the starting position</span>
</span></span><span style="display:flex;"><span>float32 delta
</span></span><span style="display:flex;"><span>---
</span></span><span style="display:flex;"><span><span style="color:#75715e"># The remaining rotation in radians</span>
</span></span><span style="display:flex;"><span>float32 remaining
</span></span></code></pre></div><ul>
<li>ros2 action send_goal ⇒ 커멘드 라인에서 손쉽게 Action Goal을 보낼 수 있습니다. (feedback option을 제공합니다.)</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ ros2 action send_goal &lt;action_name&gt; &lt;action_type&gt; &lt;values&gt;
</span></span><span style="display:flex;"><span>$ ros2 action send_goal /turtle1/rotate_absolute turtlesim/action/RotateAbsolute <span style="color:#e6db74">&#34;{theta : 0.0}&#34;</span> --feedback
</span></span><span style="display:flex;"><span>1657646954.088327 <span style="color:#f92672">[</span>0<span style="color:#f92672">]</span>       ros2: using network interface enp7s0 <span style="color:#f92672">(</span>udp/166.104.135.89<span style="color:#f92672">)</span> selected arbitrarily from: enp7s0, docker0
</span></span><span style="display:flex;"><span>Waiting <span style="color:#66d9ef">for</span> an action server to become available...
</span></span><span style="display:flex;"><span>Sending goal:
</span></span><span style="display:flex;"><span>     theta: 0.0
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Goal accepted with ID: d3ddca85948d4099a13dbeb8183e5ecc
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Result:
</span></span><span style="display:flex;"><span>    delta: -0.7839995622634888
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Goal finished with status: SUCCEEDED
</span></span></code></pre></div><p><img src="/kr/ros2_foxy/images5/action.gif?height=300px" alt="action_turn_turtle.gif"></p>
<p>/turtle1/rotate_absolute는 거북이를 특정한 절대 각도로 회전시키는 action으로 feedback 옵션 지정 시 커멘드 라인 상에 변화하는 각도록 실시간으로 확인 가능합니다.</p>
<ul>
<li>ROS 2 Action CLI 정리</li>
</ul>
<table>
<thead>
<tr>
<th>CMD</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>ros2 action list</td>
<td>전체 action list 조회</td>
</tr>
<tr>
<td>ros2 action info</td>
<td>특정 action 정보 조회</td>
</tr>
<tr>
<td>ros2 interface show</td>
<td>특정 action 데이터 타입에 대한 조회</td>
</tr>
<tr>
<td>ros2 action send_goal</td>
<td>터미널을 통한 action goal request</td>
</tr>
</tbody>
</table>
<p>여기까지 배웠다면 ROS 2의 개념적인 부분은 대부분 습득하셨다고 보아도 좋습니다. 그럼 앞으로 프로그래밍과 예시들을 통해 ROS 2 시스템에 더욱 능숙해져보겠습니다.</p>


<footer class="footline">
	
</footer>

        
        </div>
        

      </div>

    <div id="navigation">
        
        

        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        

        


	 
	 
		
			<a class="nav nav-prev" href="/kr/ros2_foxy/lecture4/" title="Lecture4. ROS 2 Node and Parameter Programming"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/kr/ros2_foxy/lecture6/" title="Lecture6. ROS 2 Tools" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>

    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1688985563"></script>
    <script src="/js/perfect-scrollbar.min.js?1688985563"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1688985563"></script>
    <script src="/js/jquery.sticky.js?1688985563"></script>
    <script src="/js/featherlight.min.js?1688985563"></script>
    <script src="/js/highlight.pack.js?1688985563"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom-3.6.0.js?1688985563"></script>
    <script src="/js/learn.js?1688985563"></script>
    <script src="/js/hugo-learn.js?1688985563"></script>
    
        
            <script src="https://unpkg.com/mermaid@8.8.0/dist/mermaid.min.js"></script>
        
        <script>
            mermaid.initialize({ startOnLoad: true });
        </script>
    
    

  </body>
</html>

