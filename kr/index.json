[
{
	"uri": "/kr/ros_basic_noetic/",
	"title": "ROS Basics",
	"tags": [],
	"description": "",
	"content": "\nLecture1. Lecture1 - Introduction to ROS Lecture2. Dev Env Setup Lecture3. Core of ROS Lecture4. ROS Launch, RViz Lecture5. First Programming, ROS Topic Lecture6. ROS Service, Parameter Lecture7. Rqt Tools and rosbag, ROS Time Lecture8. Deal with Open Source Projects, Custom Interfaces Lecture9. ROS TF and Examples Lecture10. TF2 Examples, Outro "
},
{
	"uri": "/kr/ros2_basic_foxy/",
	"title": "ROS 2 Basics",
	"tags": [],
	"description": "",
	"content": "\nLecture1. Lecture1 - Introduction to ROS 2 Lecture2. Dev Env Setup Lecture3. Core of ROS Lecture4. ROS Launch, RViz Lecture5. First Programming, ROS Topic Lecture6. ROS Service, Parameter Lecture7. Rqt Tools and rosbag, ROS Time Lecture8. Deal with Open Source Projects, Custom Interfaces Lecture9. ROS TF and Examples Lecture10. TF2 Examples, Outro "
},
{
	"uri": "/kr/",
	"title": "2023 Road Balance ROS Lecture Note",
	"tags": [],
	"description": "",
	"content": "2023 ROAD BALANCE ROS LECTURE NOTE ë³¸ ì‚¬ì´íŠ¸ëŠ” 2023ë…„ Road Balanceì˜ ROS/ROS 2 ê°•ì˜ì— ì‚¬ìš©ë˜ëŠ” ê°•ì˜ ë…¸íŠ¸ì…ë‹ˆë‹¤.\nROS Noetic Lecture Lecture 1. Lecture 2. Lecture 3. Lecture 4. Lecture 5. Lecture 6. Lecture 7. Lecture 8. Lecture 9. Lecture 10. ROS 2 Foxy Lecture Lecture 1. Lecture 2. Lecture 3. Lecture 4. Lecture 5. Lecture 6. Lecture 7. Lecture 8. Lecture 9. Lecture 10. "
},
{
	"uri": "/kr/ros2_basic_foxy/lecture1/",
	"title": "Lecture1 - Introduction to ROS 2",
	"tags": [],
	"description": "",
	"content": "About ROS 2 image from : foxglove.dev ROSì˜ ì‹œì‘ì€ ì—°êµ¬ì‹¤ì´ì—ˆìŠµë‹ˆë‹¤. êµ¬ê¸€ì˜ í•µì‹¬ ê°œë°œìì˜€ë˜ Scott Hassanì€ 2006ë…„ Willow Garageë¥¼ ì„¤ë¦½í•˜ì˜€ê³ , ì—¬ê¸°ì„œ ì²˜ìŒìœ¼ë¡œ ROSê°€ íƒ„ìƒí•˜ì˜€ìŠµë‹ˆë‹¤. ì´í›„ Willow GarageëŠ” ì—¬ëŸ¬ Spin-offë¥¼ ê±°ì¹œ ë’¤ OSRFì™€ OSRCë“±ìœ¼ë¡œ ë‚˜ë‰˜ê²Œ ë˜ì—ˆê³ , í˜„ì¬ Gazeboì™€ ROSëŠ” ì´ë“¤ì— ì˜í•´ ê´€ë¦¬ë˜ê³  ìˆìŠµë‹ˆë‹¤.\n2022ë…„ 12ì›” ê¸°ì¤€ êµ¬ê¸€ì˜ ìíšŒì‚¬ì¸ Alphabetì˜ Intrinsicì´ OSRFë¥¼ í’ˆê²Œ ë˜ì—ˆìœ¼ë©°, Ubuntu Linuxë¥¼ ê´€ë¦¬í•˜ëŠ” Canonicalì—ì„œ ROSì˜ ê³µì‹ ì„œí¬íŠ¸ë¥¼ ì•½ì†í•˜ê³ , Jetson ë³´ë“œì™€ Issac Simë“¤ì„ ê°œë°œí•˜ê³  ìˆëŠ” Nvidiaì—ì„œë„ ROSë¥¼ ê³µì‹ ì§€ì›í•˜ê³  ìˆìŠµë‹ˆë‹¤.\nì´ë ‡ê²Œ ë§ì€ ê¸°ì—…ë“¤ì´ ROSì— ê±°ëŠ” ê¸°ëŒ€ê°€ í° ë§Œí¼ ë¡œë´‡ ì‹œì¥ì˜ ì„±ì¥ì„±ë„ ê¸°ëŒ€ê°€ ë©ë‹ˆë‹¤. í•˜ì§€ë§Œ, ë¡œë´‡ì´ ìƒìš©í™”ë˜ê¸° ìœ„í•´ì„œëŠ” ì—¬ëŸ¬ ë‚œê´€ì´ ìˆìŠµë‹ˆë‹¤.\në³´ì•ˆ ì•ˆì •ì„± ì‹¤ì‹œê°„ì„± ê°œë°œ ìš©ì´ì„± ê¸°ìˆ  ì§€ì› í•˜ë“œì›¨ì–´ ì—°ë™ etcâ€¦ ì—°êµ¬ìš©ìœ¼ë¡œ ì„¤ê³„ëœ ê¸°ì¡´ ROSë¥¼ í†µí•´ì„œëŠ” ì´ëŸ¬í•œ ëª¨ë“  ì¡°ê±´ì„ ì¶©ì¡±í•  ìˆ˜ ì—†ë‹¤ëŠ” ê²°ë¡ ì„ ë‚´ë ¸ê³ , Open RoboticsëŠ” ROS 2ë¥¼ ìƒˆë¡­ê²Œ ì„ ë³´ì´ê²Œ ë©ë‹ˆë‹¤.\nROS 1 vs ROS 2 ê¸°ì¡´ ì–¸ê¸‰ë˜ì—ˆë˜ ROS 1ì˜ ëª¨ë“  ë¬¸ì œë“¤ì´ ROS 2ì—ì„œ í•´ê²°ë˜ì—ˆë‹¤ê³  í•  ìˆ˜ëŠ” ì—†ì§€ë§Œ ì ì–´ë„ í•´ê²°ì„ ê³ ë ¤í•˜ì—¬ ì„¤ê³„ë˜ì—ˆë‹¤ê³  ë§í•˜ê³  ì‹¶ìŠµë‹ˆë‹¤.\nROS 1ê³¼ ë¹„êµí•˜ì—¬ ROS 2ì˜ ì¥ì ë“¤ì„ ê°„ë‹¨íˆ ì‚´í´ë´…ì‹œë‹¤.\nimage from : maker.pro ìƒìš©í™”ë¥¼ ê³ ë ¤í•œ ê°€ì¥ í° ë³€í™”ë¡œ íŒ¨í‚· í†µì‹ ì— TCPROS/UPDROSê°€ ì•„ë‹Œ DDS(Data Distribution Service)ë¥¼ ë„ì…í•˜ì˜€ë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤.\nimage from : omg.org ë¿ë§Œ ì•„ë‹ˆë¼, ì„ë² ë””ë“œ ì‹œìŠ¤í…œì„ ìœ„í•œ micro-rosì™€ ê°™ì€ ë©‹ì§„ í”„ë¡œì íŠ¸ë“¤ë„ ROS 2ì—ì„œ ìƒˆë¡­ê²Œ ë“±ì¥í•˜ì˜€ìŠµë‹ˆë‹¤.\nimage from : freertos ì´ë ‡ê²Œ ë©‹ì§„ ROS 2ë¥¼ ì§€ê¸ˆë¶€í„° í•¨ê»˜ ë°°ì›Œë³´ê² ìŠµë‹ˆë‹¤.\nAbout this lecture ROS 1 ê°•ì˜ì—ì„œëŠ” ROS Noetic ë²„ì „ì„ ì‚¬ìš©í•˜ì˜€ìœ¼ë©°, ë™ì¼í•œ Ubuntu 20.04 ë²„ì „ì—ì„œ êµ¬ë™ë˜ëŠ” ROS 2 Foxyë¥¼ ì‚¬ìš©í•  ì˜ˆì •ì…ë‹ˆë‹¤.\nROS ì„¤ì •ì„ ì˜ ë”°ë¼ì˜¤ì…¨ë‹¤ë©´ ë³„ë„ì˜ ì„¤ì¹˜ ê³¼ì •ì€ í•„ìš” ì—†ìœ¼ë©°, ë¦¬ëˆ…ìŠ¤ ì»¤ë©˜ë“œ ì‚¬ìš©ë²•, íŒ¨í‚¤ì§€ ì„¤ì¹˜ ë“± ê¸°ë³¸ì ì¸ ë‚´ìš©ì€ ì•Œê³  ìˆë‹¤ëŠ” ê°€ì • í•˜ì— ê°•ì˜ë¥¼ ì§„í–‰í•´ë³´ê² ìŠµë‹ˆë‹¤.\nimage from : docs.ros.org ROS 1ê°•ì˜ë¥¼ í†µí•´ íƒ„íƒ„í•˜ê²Œ ë‹¤ì§„ ê¸°ë³¸ê¸°ë¥¼ ë°”íƒ•ìœ¼ë¡œ ì•„ë˜ì™€ ê°™ì€ ë‚´ìš©ë“¤ì„ ë‹¤ë¤„ë´…ë‹ˆë‹¤.\nROS 2 ê¸°ë³¸ ì»¤ë©˜ë“œ C++ ROS í”„ë¡œê·¸ë˜ë° Nav 2ë¥¼ ì‚¬ìš©í•œ ììœ¨ì£¼í–‰ ì‹¤ì œ ë¡œë´‡ ë°ì´í„° í™œìš©í•´ë³´ê¸° ê³¼ì œë¥¼ í†µí•œ ROS 2 ì‘ìš© í”„ë¡œê·¸ë˜ë° ë”ë¶ˆì–´, ì´ë²ˆ ê°•ì˜ë¥¼ í†µí•´ ì‹¤ì œ ë¡œë´‡ì´ ì–´ë–»ê²Œ ê°œë°œë˜ëŠ”ì§€ ë°”ë‹¥ë¶€í„° ì‚´í´ë³´ê³ ì í•©ë‹ˆë‹¤.\në¡œë´‡ ì„¤ê³„ ì‹œë®¬ë ˆì´ì…˜ ì œì‘ê³¼ ì‹¤ìŠµ ì‹¤ì œ ë¡œë´‡ì„ ë§Œë“¤ê¸° ìœ„í•´ í•„ìš”í•œ ìš”ì†Œë“¤ ìœ ì§€ ë³´ìˆ˜ì™€ ë¡œë´‡ ì œí’ˆ ê°œë°œ Road Balanceì˜ ì°¨ëŸ‰í˜• êµìœ¡ ë¡œë´‡, SRCë¥¼ í†µí•´ ì‹¤ìŠµí•´ë³´ê² ìŠµë‹ˆë‹¤.\nê°•ì˜ë¥¼ ìˆ˜ê°•í•˜ê¸° ìœ„í•´ í•„ìš”í•œ ì„ ìˆ˜ì§€ì‹ ROS 2ëŠ” Python 3ì™€ C++ 11ì´ìƒì˜ ë²„ì „ì„ ì§€ì›í•©ë‹ˆë‹¤. ë”°ë¼ì„œ ìµœì†Œí•œì˜ í”„ë¡œê·¸ë˜ë° ì§€ì‹ì´ ìˆë‹¤ëŠ” ê°€ì • í•˜ì— ê°•ì˜ê°€ ì§„í–‰ë˜ë©°, í™˜ê²½ ì„¤ì •, ROS ê°œë… ë“± ROS 1 ê°•ì˜ë¥¼ ëª¨ë‘ ìˆ˜ê°•í–ˆë‹¤ëŠ” ì „ì œ í•˜ì— ì§„í–‰ë©ë‹ˆë‹¤.\nimage from : docs.ros.org ì´ë²ˆ ê°•ì˜ì—ì„œëŠ” ì¢€ ë” ì‹¤ì§ˆì ì¸ ROS 2 ê°œë°œì„ ë§›ë³´ê³ ì C++ë¥¼ í™œìš©í•œ í”„ë¡œê·¸ë˜ë°ë„ ì¤€ë¹„í•´ ë³´ì•˜ìœ¼ë‹ˆ ì´ë²ˆ ê¸°íšŒì— C++ë¥¼ ê³µë¶€í•´ ë³´ëŠ” ê²ƒë„ ì¢‹ì€ ê¸°íšŒê°€ ë˜ì‹¤ ê²ë‹ˆë‹¤.\nROS 2 Workspace ìƒì„± ROS 1ì—ì„œ catkin build systemì„ ì‚¬ìš©í•œ ê²ƒê³¼ ìœ ì‚¬í•˜ê²Œ, ROS 2ì—ì„œëŠ” colconì´ë¼ëŠ” ë¹Œë“œ ì‹œìŠ¤í…œì„ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤. colconì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œ Workspaceê°€ í•„ìš”í•˜ë©°, ROS 1ê³¼ ROS 2ë¥¼ ëª¨ë‘ ì‚¬ìš©í•˜ëŠ” í˜„ì¬ ì‹œìŠ¤í…œ ê°™ì€ ê²½ìš°, í˜¼ë€ìŠ¤ëŸ½ì§€ ì•Šë„ë¡ ì´ë¦„ì„ ë‹¬ë¦¬ ì„¤ì •í•˜ê² ìŠµë‹ˆë‹¤.\ncd ~/ mkdir -p ros2_ws/src cd ros2_ws colcon build ì•„ë˜ì™€ ê°™ì€ í´ë” êµ¬ì¡°ê°€ ìƒì„±ë˜ì—ˆì„ ê²ƒì…ë‹ˆë‹¤. build : ì»´íŒŒì¼ ëœ C++ í”„ë¡œê·¸ë¨, custom interface ë“±ì´ ìœ„ì¹˜í•˜ê²Œ ë©ë‹ˆë‹¤. install : ros2 launchì™€ ros2 run ë“±ì˜ ëª…ë ¹ì–´ëŠ” í”„ë¡œê·¸ë¨ì˜ ì‹¤í–‰ ì‹œ ì´ install í´ë” ë‚´ íŒŒì¼ë“¤ì„ ì¡°íšŒí•©ë‹ˆë‹¤. ì¼ì¢…ì˜ ë°”ë¡œê°€ê¸°ë“¤ì˜ ëª¨ì„ì´ë¼ê³  ìƒê°í•˜ë©´ ë©ë‹ˆë‹¤. log : colcon build ì‹œ ë°œìƒí•˜ëŠ” ë¡œë“œë“¤ì´ ìœ„ì¹˜í•˜ê²Œ ë©ë‹ˆë‹¤. src : ëª¨ë“  ì†ŒìŠ¤ ì½”ë“œë“¤ì´ ìœ„ì¹˜í•˜ê²Œ ë©ë‹ˆë‹¤. Packageë¥¼ ì§€ìš°ê³  ì‹¶ì€ ê²½ìš° â‡’ buildì™€ install í´ë”ì—ì„œ í•´ë‹¹ packageì— í•´ë‹¹í•˜ëŠ” ë‚´ìš©ë“¤ì„ ì‚­ì œí•©ë‹ˆë‹¤.\ncolconì„ ì‚¬ìš©í•˜ì—¬ packageë¥¼ ë¹Œë“œí•˜ëŠ” ë°©ë²•ë“¤ì„ ê°„ë‹¨íˆ ì†Œê°œí•©ë‹ˆë‹¤.\ncolcon build : src í´ë” ë‚´ë¶€ì— ì¡´ì¬í•˜ëŠ” ëª¨ë“  packageë“¤ì„ ë¹Œë“œí•©ë‹ˆë‹¤. colcon build \u0026ndash;packages-up-to : í•´ë‹¹ packageì˜ ì¢…ì†ì„±ì´ ì¡´ì¬í•  ì‹œ, ì´ë“¤ì„ ë¨¼ì € ë¹Œë“œí•˜ê³  pkg-nameì„ ë¹Œë“œí•©ë‹ˆë‹¤. colcon build \u0026ndash;packages-select : í•´ë‹¹ packageë§Œì„ ë¹Œë“œí•©ë‹ˆë‹¤. ìƒˆë¡œìš´ Packageë¥¼ ë¹Œë“œí•œ ë‹¤ìŒ ROS 2ì—ì„œë„ setup.bashë¥¼ source í•´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤. ì´ ì‘ì—…ì—ëŠ” í¬ê²Œ ë‘ê°€ì§€ê°€ ì¡´ì¬í•©ë‹ˆë‹¤.\nsource install/setup.bash â‡’ workspaceë¥¼ sourceí•˜ê³  ROS 2ì‹œìŠ¤í…œ ì „ì²´ë¥¼ ê°±ì‹ í•©ë‹ˆë‹¤. source install/local_setup.bash â‡’ workspaceë§Œì„ sourcesí•©ë‹ˆë‹¤. (ì—¬ëŸ¬ ROS 2 workspaceê°€ ìˆëŠ” ê²½ìš° local_setup.bashë¥¼ ì‚¬ìš©í•©ì‹œë‹¤.) # source chained prefixes # setting COLCON_CURRENT_PREFIX avoids determining the prefix in the sourced script COLCON_CURRENT_PREFIX=\u0026#34;/opt/ros/foxy\u0026#34; _colcon_prefix_chain_bash_source_script \u0026#34;$COLCON_CURRENT_PREFIX/local_setup.bash\u0026#34; # source this prefix # setting COLCON_CURRENT_PREFIX avoids determining the prefix in the sourced script COLCON_CURRENT_PREFIX=\u0026#34;$(builtin cd \u0026#34;`dirname \u0026#34;${BASH_SOURCE[0]}\u0026#34;`\u0026#34; \u0026gt; /dev/null \u0026amp;\u0026amp; pwd)\u0026#34; _colcon_prefix_chain_bash_source_script \u0026#34;$COLCON_CURRENT_PREFIX/local_setup.bash\u0026#34; unset COLCON_CURRENT_PREFIX unset _colcon_prefix_chain_bash_source_script ë§ˆì§€ë§‰ìœ¼ë¡œ, ì´ë²ˆ ì‹¤ìŠµì— í•„ìš”í•œ ì†ŒìŠ¤ ì½”ë“œë¥¼ clone í•˜ê³ , apt íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•˜ë©´ì„œ, ê°•ì˜ë¥¼ ë§ˆì¹˜ê² ìŠµë‹ˆë‹¤.\ncd ~/ros2_ws/src git clone https://github.com/RB2023ROS/du2023-ros2.git cd du2023-ros2 ./setup_scripts.sh ì°¸ê³ ìë£Œ\nhttps://www.theconstructsim.com/infographic-ros-1-vs-ros-2-one-better-2/ https://rsl.ethz.ch/education-students/lectures/ros.html https://velog.io/@hwang-chaewon/ROS2006 "
},
{
	"uri": "/kr/ros2_basic_foxy/lecture2/",
	"title": "Lecture2 - ROS 2 Node, Package",
	"tags": [],
	"description": "",
	"content": " ROS Noetic ê°•ì˜ë¥¼ ì´ë¯¸ í•™ìŠµí•˜ì˜€ê¸° ë•Œë¬¸ì—, Node, Package, launch file, Topic, Message, Serviceì™€ ê°™ì€ ê°œë…ì€ ì´ë¯¸ ì•Œê³  ê³„ì‹¤ ê²ƒì´ë¼ ìƒê°í•©ë‹ˆë‹¤. (ë§ì£ ?)\ní˜¹ì‹œë‚˜ ìŠì–´ë²„ë¦¬ì…¨ì„ ìˆ˜ ìˆìœ¼ë‹ˆ ê°•ì˜ ì¤‘ê°„ì¤‘ê°„ ì œê°€ ê°„ë‹¨íˆ ë¦¬ë·°ë¥¼ í•˜ë©´ì„œ ì§„í–‰í•˜ê² ìŠµë‹ˆë‹¤.\nROS 2 Node image from : docs.rog.org ROSì—ì„œì˜ NodeëŠ” í•˜ë‚˜ì˜ ì‹¤í–‰ ê°€ëŠ¥í•œ í”„ë¡œê·¸ë¨ì„ ì´ì•¼ê¸°í•˜ë©°, ê°ê°ì˜ NodeëŠ” ë³¸ì¸ ê³ ìœ ì˜ ê¸°ëŠ¥ì„ ë‹´ë‹¹í•©ë‹ˆë‹¤.\nì„œë¡œ ë‹¤ë¥¸ ì—­í• ì„ ë‹´ë‹¹í•˜ëŠ” Nodeë“¤ì´ ê°ìì˜ ë™ì‘ì„ ìˆ˜í–‰í•˜ê³  ì„œë¡œ ê°„ì˜ ë°ì´í„°ë¥¼ ì£¼ê³ ë°›ê²Œ ë¨ìœ¼ë¡œ ì‹œìŠ¤í…œì„ í˜•ì„±í•˜ê²Œ ë˜ê³ , ë”°ë¼ì„œ, ROSë¥¼ í†µí•œ ë¡œë´‡ ê°œë°œì€ ê³§, ì ì ˆí•œ Nodeë“¤ì˜ ê°œë°œì´ë¼ê³ ë„ ë§í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nROS 2 Node ì‹¤í–‰ - ROS 2ì—ì„œ Nodeì˜ ì‹¤í–‰ì€ ros2 run \u0026lt;pkg-name\u0026gt; \u0026lt;executable-name\u0026gt;ì…ë‹ˆë‹¤. sudo apt install ros-foxy-turtlesim -y ros2 run turtlesim turtlesim_node ROS 2ì˜ Nodeë¥¼ ë‹¤ë£¨ëŠ” ëª…ë ¹ì–´ëŠ” ROS 1ê³¼ í¬ê²Œ ë‹¤ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤. $ ros2 node list /teleop_turtle /turtlesim $ ros2 node info /turtlesim /turtlesim Subscribers: /parameter_events: rcl_interfaces/msg/ParameterEvent /turtle1/cmd_vel: geometry_msgs/msg/Twist Publishers: /parameter_events: rcl_interfaces/msg/ParameterEvent /rosout: rcl_interfaces/msg/Log /turtle1/color_sensor: turtlesim/msg/Color /turtle1/pose: turtlesim/msg/Pose Service Servers: /clear: std_srvs/srv/Empty â€¦ rqt_graphë„ ë™ì¼í•˜ê²Œ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤. $ rqt_graph ROS 2 Package ROSì˜ PackageëŠ” íŒŒì¼ ê´€ì ì—ì„œ ê´€ë ¨ëœ ì†ŒìŠ¤ì½”ë“œ, ë¼ì´ë¸ŒëŸ¬ë¦¬, ëª¨ë¸ë§ íŒŒì¼ë“¤, ì„¤ì • íŒŒì¼ë“¤ì„ í•œë° ëª¨ì•„ë‘” í´ë”ë¡œ ìƒê°í•  ìˆ˜ ìˆìœ¼ë©°, ê¸°ëŠ¥ ê´€ì ì—ì„œ ì‹œë®¬ë ˆì´ì…˜, í•˜ë“œì›¨ì–´ ì œì–´, ì„¼ì„œ ë‹¤ë£¨ê¸° ë“±ìœ¼ë¡œ ë¶„ë¦¬ì‹œí‚¨ ëª¨ë“ˆë¡œ ìƒê°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nimage from : packthub ìƒˆë¡œìš´ íŒ¨í‚¤ì§€ë¥¼ ìƒì„±í•˜ëŠ” ê³¼ì •ì—ì„œ, ROS 2ëŠ” ROS 1ê³¼ ì°¨ì´ì ì´ ìˆìŠµë‹ˆë‹¤.\nROS 1ì—ì„œ catkin_create_packageë¥¼ ì‚¬ìš©í–ˆë˜ ê²ƒì²˜ëŸ¼, ROS 2ì—ì„œëŠ” colconì„ ì‚¬ìš©í•˜ì—¬ ìƒˆë¡œìš´ packageë¥¼ ìƒì„±í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ, ROS 2ì—ì„œëŠ” ì‚¬ìš©í•˜ëŠ” í”„ë¡œê·¸ë˜ë° ì–¸ì–´(python/c++)ì— ë”°ë¼ ë‹¤ë¥¸ build typeì„ ì§€ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nROS 2 Python Package íŒŒì´ì¬ íŒ¨í‚¤ì§€ì˜ ìƒì„±ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤. $ ros2 pkg create --build-type ament_python \u0026lt;package_name\u0026gt; $ ros2 pkg create --build-type ament_python my_first_pkg going to create a new package package name: my_first_pkg destination directory: /home/kimsooyoung/ros2_ws/src package format: 3 version: 0.0.0 ... ê·¸ë¦¬ê³ , ë‹¤ìŒê³¼ ê°™ì€ í´ë” êµ¬ì¡°ê°€ ìë™ ìƒì„±ë©ë‹ˆë‹¤. my_first_pkg/ â”œâ”€â”€ my_first_pkg â”‚Â â””â”€â”€ __init__.py â”œâ”€â”€ package.xml â”œâ”€â”€ resource â”‚Â â””â”€â”€ my_first_pkg â”œâ”€â”€ setup.cfg â”œâ”€â”€ setup.py â””â”€â”€ test â”œâ”€â”€ test_copyright.py â”œâ”€â”€ test_flake8.py â””â”€â”€ test_pep257.py ìƒˆë¡­ê²Œ ë§Œë“  íŒ¨í‚¤ì§€ë¥¼ ë¹Œë“œí•´ë´…ì‹œë‹¤. $ cd ~/ros2_ws $ colcon build --packages-select my_first_pkg Starting \u0026gt;\u0026gt;\u0026gt; my_first_pkg Finished \u0026lt;\u0026lt;\u0026lt; my_first_pkg [1.56s] Summary: 1 package finished [1.96s] $ source install/local_setup.bash ìƒì„±í•œ íŒŒì´ì¬ ì½”ë“œ íŒ¨í‚¤ì§€ì—ì„œ, ì‹¤ì œ íŒŒì´ì¬ ì½”ë“œëŠ” ì–´ë””ì— ìœ„ì¹˜í• ê¹Œìš”?\nìƒˆë¡œìš´ íŒ¨í‚¤ì§€ë¥¼ ìƒì„±í•˜ë©´ í•´ë‹¹ íŒ¨í‚¤ì§€ í´ë” ì•ˆì— íŒ¨í‚¤ì§€ ì´ë¦„ê³¼ ë™ì¼í•œ í´ë”ê°€ í•˜ë‚˜ ìœ„ì¹˜í•˜ê²Œ ë©ë‹ˆë‹¤. ì´ í´ë” ì•ˆì—ëŠ” init.py íŒŒì¼ì´ ê¸°ë³¸ì ìœ¼ë¡œ ìœ„ì¹˜í•©ë‹ˆë‹¤. ì°¸ê³ ë¡œ, wslì—ì„œ íŒŒì¼ íƒìƒ‰ê¸°ë¥¼ ì—´ê¸° ìœ„í•´ì„œëŠ” explorer.exe . ë¥¼ ì…ë ¥í•˜ì‹œë©´ ë©ë‹ˆë‹¤.\nê°•ì˜ ì˜ˆì‹œ ì†ŒìŠ¤ì½”ë“œë¥¼ í•˜ë‚˜ ëŒì–´ì™€ ë¹Œë“œí•´ë³´ê² ìŠµë‹ˆë‹¤. ì•„ì£¼ ê°„ë‹¨í•œ íŒŒì´ì¬ ì˜ˆì‹œê°€ ì‹¤í–‰ë  ê²ƒì…ë‹ˆë‹¤. $ cd ~/ros2_sw $ colcon build --packages-select py_node_tutorial Starting \u0026gt;\u0026gt;\u0026gt; py_node_tutorial Finished \u0026lt;\u0026lt;\u0026lt; py_node_tutorial [1.85s] Summary: 1 package finished [2.14s] $ source install/local_setup.bash $ ros2 run py_node_tutorial example_node_1 [INFO] [1672462290.252773294] [example_node_1]: ==== Hello ROS 2 ==== ì—¬ê¸°ì„œ ì£¼ëª©í•  ì ì€, nodeì˜ ì‹¤í–‰ ì‹œ roscoreê°€ ì—†ì–´ë„ ëœë‹¤ëŠ” ì ì…ë‹ˆë‹¤. DDSë¥¼ ì‚¬ìš©í•¨ìœ¼ë¡œ ê°ê°ì˜ nodeê°€ ë¶„ì‚° ì²˜ë¦¬ê°€ ê°€ëŠ¥í•˜ê¸° ë•Œë¬¸ì— ê°€ëŠ¥í•œ ê²ƒì…ë‹ˆë‹¤.\nimage from : design.ros2.org ROS 2 C++ Package ëŒ€ë¶€ë¶„ì˜ ì˜¤í”ˆì†ŒìŠ¤ íŒ¨í‚¤ì§€ë“¤ì€ C++ë¡œ ê°œë°œë˜ì–´ ìˆëŠ” ê²½ìš°ê°€ ë§ìŠµë‹ˆë‹¤. turtlesimì˜ ì†ŒìŠ¤ì½”ë“œë¥¼ í™•ì¸í•´ë´…ì‹œë‹¤.\nhttps://github.com/ros/ros_tutorials\nëª¨ë‘ C++ë¡œ ê°œë°œë˜ì–´ ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ, ì‹¤ì œ ì‘ì—… ì‹œ íŒŒì´ì¬ì„ ìœ„ì£¼ë¡œ ì‚¬ìš©í•˜ë”ë¼ë„ ì ì–´ë„ C++ íŒ¨í‚¤ì§€ì˜ êµ¬ì¡°ëŠ” íŒŒì•…í•˜ê³  ìˆì–´ì•¼ ì˜¤ë¥˜ ìƒí™©ì— ëŒ€ì²˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nC++ íŒ¨í‚¤ì§€ì˜ ìƒì„±ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤. $ ros2 pkg create --build-type ament_cmake \u0026lt;package_name\u0026gt; $ ros2 pkg create --build-type ament_cmake my_first_cpp_pkg going to create a new package package name: my_first_cpp_pkg destination directory: /home/kimsooyoung/ros2_ws/src package format: 3 version: 0.0.0 ... C++ íŒ¨í‚¤ì§€ëŠ” ë‹¤ìŒê³¼ ê°™ì€ êµ¬ì¡°ë¥¼ ê°–ìŠµë‹ˆë‹¤. íŒŒì´ì¬ê³¼ ë‹¬ë¦¬, C++ëŠ” ì»´íŒŒì¼ ì–¸ì–´ì´ê¸° ë•Œë¬¸ì— CMakeë¥¼ ìœ„í•œ CMakeLists.txt íŒŒì¼ì´ ì¶”ê°€ë˜ì–´ ìˆìŠµë‹ˆë‹¤. my_first_cpp_pkg â”œâ”€â”€ CMakeLists.txt â”œâ”€â”€ include â”‚Â â””â”€â”€ my_first_cpp_pkg â”œâ”€â”€ package.xml â””â”€â”€ src ì¼ë°˜ì ìœ¼ë¡œ C++ ê°œë°œì„ í•˜ë‹¤ë³´ë©´ headerì™€ sourceì˜ ë¶„ë¦¬ë¥¼ ì‹œí‚¤ê³¤ í•©ë‹ˆë‹¤.\nì´ë¥¼ ìœ„í•´ ë³´í†µ include í´ë” ì•ˆì— í—¤ë” íŒŒì¼ì„ ìœ„ì¹˜ì‹œí‚¤ê³ , src í´ë” ì•ˆì— ì†ŒìŠ¤ ì½”ë“œë¥¼ ìœ„ì¹˜ì‹œí‚µë‹ˆë‹¤.\në¹Œë“œì™€ ì‹¤í–‰ì€ C++ íŒ¨í‚¤ì§€ë„ ë™ì¼í•œ ì»¤ë©˜ë“œ ë¼ì¸ì„ ì‚¬ìš©í•©ë‹ˆë‹¤. $ colcon build --packages-select cpp_node_tutorial $ source install/local_setup.bash Starting \u0026gt;\u0026gt;\u0026gt; cpp_node_tutorial Finished \u0026lt;\u0026lt;\u0026lt; cpp_node_tutorial [0.42s] Summary: 1 package finished [0.64s] $ ros2 run cpp_node_tutorial example_node_1 [INFO] [1672462275.581606122] [example_node_1]: ==== Hello ROS 2 ==== aptë¥¼ í†µí•œ íŒ¨í‚¤ì§€ ì‚¬ìš©í•˜ê¸° ë„ë¦¬ ì‚¬ìš©ë˜ê³  ê²€ì¦ëœ íŒ¨í‚¤ì§€ë“¤ì€ ì†ŒìŠ¤ ì½”ë“œ ë¹Œë“œ ì—†ì´ ëª…ë ¹ì–´ í•˜ë‚˜ë§Œìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¤ë§Œ, ROS 1ê³¼ ROS 2, ê·¸ë¦¬ê³  ê°™ì€ ROS 2ì¼ì§€ë¼ë„ ë²„ì „ì— ë”°ë¼ ì¬ì„¤ì¹˜ë¥¼ í•´ì¤˜ì•¼ í•©ë‹ˆë‹¤.\n$ sudo apt install ros-\u0026lt;DISTRO\u0026gt;-\u0026lt;pkg-name\u0026gt; $ sudo apt install ros-foxy-turtlesim ì§€ê¸ˆê¹Œì§€ ìš°ë¦¬ê°€ ì‚¬ìš©í–ˆë˜ turtlesim, turtle_teleop_keyëŠ” ëª¨ë‘ apt install turtlesimì„ í†µí•´ ì„¤ì¹˜ê°€ ê°€ëŠ¥í•˜ì˜€ê¸°ì— ì½”ë“œì— ëŒ€í•œ ê³ ë ¤ ì—†ì´ ë°”ë¡œ ì‹¤í–‰í•  ìˆ˜ ìˆë˜ ê²ƒì…ë‹ˆë‹¤.\nì´ë¥¼ ì‚¬ìš©í•˜ì—¬ ROS ê°œë°œ ì´ˆê¸°ì—ëŠ” ë°”ë¡œ ì„¤ì¹˜ ê°€ëŠ¥í•œ íŒ¨í‚¤ì§€ë“¤ì„ ì¡°í•©í•˜ì—¬ ë¹ ë¥´ê²Œ ê²€ì¦ì„ í•˜ê³ , ì´í›„ ì§ì ‘ Customizingí•´ì•¼ í•˜ëŠ” ë¶€ë¶„ì€ ë³„ë„ ì†ŒìŠ¤ì½”ë“œ ë¹Œë“œë¥¼ í†µí•´ ì—…ê·¸ë ˆì´ë“œë¥¼ í•˜ê³¤ í•©ë‹ˆë‹¤.\nROS 2 Launch ROS 2ì˜ launchíŒŒì¼ì€ ê¸°ë³¸ì ìœ¼ë¡œ Python ë¬¸ë²•ì„ ì‚¬ìš©í•©ë‹ˆë‹¤. ê¸°ì¡´ ROS 1ì—ì„œ xml ë¬¸ë²•ì„ ì‚¬ìš©í•˜ë˜ ê²ƒì—ì„œ ë¹„êµí•˜ë©´, ë³´ë‹¤ ì†ì‰½ê²Œ ì ‘ê·¼í•  ìˆ˜ ìˆì–´ì¡ŒìŠµë‹ˆë‹¤.\nì˜ˆì œë¥¼ í†µí•´ ê¸°ë³¸ êµ¬ì¡°ì— ëŒ€í•´ ì§šê³  ë„˜ì–´ê°€ê² ìŠµë‹ˆë‹¤. $ cd ~/ros2_ws $ colcon build --packages-select src_description $ source install/local_setup.bash $ ros2 launch src_description src_description.launch.py ì‚¬ì§„ê³¼ ê°™ì´ RViz2ì™€ joint state publisher guiê°€ ë“±ì¥í•  ê²ƒì…ë‹ˆë‹¤. joint state publisher guiì˜ ìŠ¬ë¼ì´ë“œë°”ë¥¼ ì´ë¦¬ì €ë¦¬ ì˜®ê²¨ë³´ì„¸ìš”.\nROS 1 ê°•ì˜ì—ì„œ ë°°ì›Œë³´ì•˜ë˜ tfì— ëŒ€í•´ì„œë„ ë³µìŠµí•  ìˆ˜ ìˆëŠ” ê¸°íšŒì…ë‹ˆë‹¤.\nros2ì˜ launch ëª…ë ¹ì–´ëŠ” ë‹¤ìŒê³¼ ê°™ì´ êµ¬ì„±ë˜ì–´ ìˆìŠµë‹ˆë‹¤. $ ros2 launch \u0026lt;package-name\u0026gt; \u0026lt;launch-file-name\u0026gt; íŒ¨í‚¤ì§€ ë‚´ì— ì¡´ì¬í•˜ëŠ” íŠ¹ì • launch íŒŒì¼ì„ ì‹¤í–‰í•´ë¼, ë¼ëŠ” ëœ»ì´ ë©ë‹ˆë‹¤.\nì˜ˆì œ launch fileì„ ì‚´í´ë´…ì‹œë‹¤. ros2ì˜ launch fileì€ pythonê³¼ xmlì„ ì§€ì›í•©ë‹ˆë‹¤. python íŒŒì¼ì˜ ê²½ìš° .launch.pyë¡œ ì´ë¦„ì§“ëŠ” ê²ƒì´ ì¼ë°˜ì ì…ë‹ˆë‹¤.\ní•­ìƒ launch fileì˜ ë¶„ì„ì€ ê°€ì¥ í•˜ë‹¨ë¶€í„° ì‹œì‘í•©ë‹ˆë‹¤. return LaunchDescription([ TimerAction( period=3.0, actions=[rviz2] ), robot_state_publisher, joint_state_publisher_gui, ]) LaunchDescription[] ì•ˆì— ìœ„ì¹˜í•œ í”„ë¡œê·¸ë¨ë“¤ì„ ë™ì‹œì— ì‹¤í–‰í•˜ëŠ” ê²ƒì´ launch fileì„ ì‘ì„±í•˜ëŠ” ì´ìœ ì…ë‹ˆë‹¤.\nìƒë‹¨ ì˜µì…˜ì„ í•˜ë‚˜ì”© ì‚´í”¼ê² ìŠµë‹ˆë‹¤. launch fileì—ì„œ íŠ¹ì • í´ë”, íŒŒì¼ì— ì ‘ê·¼í•˜ê¸° ìœ„í•´ packageì— ê¸°ë°˜í•˜ì—¬ ê²½ë¡œë¥¼ íƒìƒ‰í•©ë‹ˆë‹¤. def generate_launch_description(): pkg_path = os.path.join(get_package_share_directory(\u0026#34;src_description\u0026#34;)) rviz_config_file = os.path.join(pkg_path, \u0026#34;rviz\u0026#34;, \u0026#34;description.rviz\u0026#34;) urdf_file = os.path.join(pkg_path, \u0026#34;urdf\u0026#34;, \u0026#34;src_body.urdf\u0026#34;) urdf - Unified Robotics Description Formatë€ ë¡œë´‡ì˜ í˜•ìƒì„ íŒŒì¼ë¡œ í‘œí˜„í•˜ëŠ” ì¼ì¢…ì˜ í¬ë©§ì…ë‹ˆë‹¤. \u0026lt;?xml version=\u0026#34;1.0\u0026#34; ?\u0026gt; \u0026lt;!-- =================================================================================== --\u0026gt; \u0026lt;!-- | This document was autogenerated by xacro from /home/kimsooyoung/ros2_ws/src/du2023-ros2/src_gazebo/urdf/src_body.urdf.xacro | --\u0026gt; \u0026lt;!-- | EDITING THIS FILE BY HAND IS NOT RECOMMENDED | --\u0026gt; \u0026lt;!-- =================================================================================== --\u0026gt; \u0026lt;robot name=\u0026#34;src_body\u0026#34;\u0026gt; \u0026lt;material name=\u0026#34;silver\u0026#34;\u0026gt; \u0026lt;color rgba=\u0026#34;0.700 0.700 0.700 1.000\u0026#34;/\u0026gt; \u0026lt;/material\u0026gt; \u0026lt;material name=\u0026#34;black\u0026#34;\u0026gt; \u0026lt;color rgba=\u0026#34;1.000 1.000 1.000 1.000\u0026#34;/\u0026gt; \u0026lt;/material\u0026gt; \u0026lt;material name=\u0026#34;blue\u0026#34;\u0026gt; \u0026lt;color rgba=\u0026#34;0.0 0.0 0.8 1.0\u0026#34;/\u0026gt; \u0026lt;/material\u0026gt; \u0026lt;material name=\u0026#34;green\u0026#34;\u0026gt; \u0026lt;color rgba=\u0026#34;0.0 0.8 0.0 1.0\u0026#34;/\u0026gt; \u0026lt;/material\u0026gt; \u0026lt;material name=\u0026#34;grey\u0026#34;\u0026gt; \u0026lt;color rgba=\u0026#34;0.2 0.2 0.2 1.0\u0026#34;/\u0026gt; \u0026lt;/material\u0026gt; ... image from : http://library.isr.ist.utl.pt/ srcì˜ urdfì™€ description ê²°ê³¼ë¥¼ í•¨ê»˜ ì‚´í´ë³´ë©´ì„œ urdfì— ëŒ€í•œ ê°œë…ì„ ìµí˜€ë´…ì‹œë‹¤.\nurdfë¥¼ ìƒì„±í•˜ëŠ” ì—¬ëŸ¬ ë°©ë²•ë“¤ì´ ìˆìŠµë‹ˆë‹¤.\nxacroì™€ í•¨ê»˜ ì§ì ‘ í…ìŠ¤íŠ¸ë¥¼ ì‘ì„±í•˜ê¸° CAD í”„ë¡œê·¸ë¨ì„ ì‚¬ìš©í•˜ê¸° SOLIDWORKS Fusion 360 blender ì‹œë®¬ë ˆì´ì…˜ í”„ë¡œê·¸ë¨ ë‚´ model builder ì‚¬ìš©í•˜ê¸° Gazebo Colleliasim ì €ì˜ ê²½ìš°, Fusion 360ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ì˜¤í”ˆì†ŒìŠ¤ urdf exporterë¥¼ í†µí•´ ì‹œë®¬ë ˆì´ì…˜ì„ ê°œë°œí•˜ì˜€ìŠµë‹ˆë‹¤.\nhttps://github.com/syuntoku14/fusion2urdf\nurdfë¥¼ ì‚¬ìš©í•˜ì—¬ ROSì—ê²Œ ë¡œë´‡ì— ëŒ€í•œ ì •ë³´ë¥¼ ì „ë‹¬í•˜ê³  ì§€ì† ì£¼ì‹œí•˜ëŠ” ê²ƒì´ ì•„ë˜ ë‘ Nodeì˜ ì—­í• ì…ë‹ˆë‹¤. joint_state_publisher_gui = Node( package=\u0026#34;joint_state_publisher_gui\u0026#34;, executable=\u0026#34;joint_state_publisher_gui\u0026#34;, name=\u0026#34;joint_state_publisher_gui\u0026#34;, ) robot_state_publisher = Node( package=\u0026#39;robot_state_publisher\u0026#39;, node_executable=\u0026#39;robot_state_publisher\u0026#39;, node_name=\u0026#39;robot_state_publisher\u0026#39;, output=\u0026#39;screen\u0026#39;, parameters=[{\u0026#39;use_sim_time\u0026#39;: True}], arguments=[urdf_file], ) launch file ë¶„ì„ì˜ ë§ˆì§€ë§‰ìœ¼ë¡œ Rviz2 ì‹¤í–‰ì…ë‹ˆë‹¤. Rvizì™€ ë™ì¼í•˜ê²Œ launch fileì—ì„œ config optionì„ ì¤„ ìˆ˜ ìˆìœ¼ë©°, TimerActionì„ í†µí•´ 3ì´ˆì˜ ì—¬ìœ ë¥¼ ê°–ê³  ì‹¤í–‰í•˜ë„ë¡ í•˜ì˜€ìŠµë‹ˆë‹¤. # Launch RViz rviz2 = Node( package=\u0026#34;rviz2\u0026#34;, executable=\u0026#34;rviz2\u0026#34;, name=\u0026#34;rviz2\u0026#34;, output=\u0026#34;screen\u0026#34;, arguments=[\u0026#34;-d\u0026#34;, rviz_config_file], ) return LaunchDescription([ TimerAction( period=3.0, actions=[rviz2] ), ROS 2ì˜ launch file ì‘ì„±ë²•ì„ ê°„ë‹¨í•˜ê²Œ ì„¤ëª…í•˜ê³  ë„˜ì–´ê°€ê² ìŠµë‹ˆë‹¤. robot_state_publisher = Node( package=\u0026#39;robot_state_publisher\u0026#39;, executable=\u0026#39;robot_state_publisher\u0026#39;, output=\u0026#39;screen\u0026#39;, parameters=[robot_description] ) Node : Node í•˜ë‚˜ë¥¼ ì‹¤í–‰ì‹œí‚¬ ìˆ˜ ìˆëŠ” ì˜µì…˜ì…ë‹ˆë‹¤. package : ì‹¤í–‰ì‹œí‚¬ Nodeê°€ í¬í•¨ëœ packageë¥¼ ì„ íƒí•´ì¤ë‹ˆë‹¤. executable : c++ Nodeì˜ ê²½ìš°, colcon buildë¥¼ í•˜ë©´ ì‹¤í–‰ ê°€ëŠ¥í•œ í”„ë¡œê·¸ë¨ì´ ìƒì„±ë©ë‹ˆë‹¤. pythonì˜ ê²½ìš°ë„ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì‹¤í–‰ ì‹œí‚¤ê²Œ ë˜ë©°, ì¶”í›„ ì½”ë”© ì‹¤ìŠµì„ ê±°ì¹˜ë©´ ì™„ë²½íˆ ì´í•´í•˜ì‹¤ ìˆ˜ ìˆì„ ê²ƒì…ë‹ˆë‹¤. parameters : ì‹¤í–‰ì‹œí‚¬ Nodeì˜ ì¶”ê°€ ë§¤ê°œë³€ìˆ˜ê°€ ìˆë‹¤ë©´ ì´ ë¶€ë¶„ì— ì¶”ê°€ë©ë‹ˆë‹¤. ì´ë ‡ê²Œ launch file í•˜ë‚˜ë¥¼ ë¶„ì„í•´ ë³´ì•˜ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ, ì œê°€ ë³´ì—¬ë“œë¦° ê²ƒì€ í•˜ë‚˜ì˜ ì˜ˆì‹œì¼ ë¿ì´ë©°, launch fileì€ ì—¬ëŸ¬ í˜•ì‹ìœ¼ë¡œ ì‚¬ìš©ë˜ê³  ìˆìŠµë‹ˆë‹¤.\nì¼ë¡€ë¡œ, ììœ¨ ì£¼í–‰ ì‹œ ì‚¬ìš©ë˜ëŠ” nav2 íŒ¨í‚¤ì§€ì˜ lanuch fileì€ ë‹¤ìŒê³¼ ê°™ì€ í˜•íƒœë¥¼ ê°–ìŠµë‹ˆë‹¤.\ndeclare_namespace_cmd = DeclareLaunchArgument( \u0026#39;namespace\u0026#39;, default_value=\u0026#39;\u0026#39;, description=\u0026#39;Top-level namespace\u0026#39;) ... # Create the launch description and populate ld = LaunchDescription() # Set environment variables ld.add_action(stdout_linebuf_envvar) # Declare the launch options ld.add_action(declare_namespace_cmd) ld.add_action(declare_use_namespace_cmd) ld.add_action(declare_slam_cmd) ld.add_action(declare_map_yaml_cmd) ld.add_action(declare_use_sim_time_cmd) ld.add_action(declare_params_file_cmd) ld.add_action(declare_autostart_cmd) ld.add_action(declare_bt_xml_cmd) # Add the actions to launch all of the navigation nodes ld.add_action(bringup_cmd_group) return ld ì•„ì§ í”„ë¡œê·¸ë˜ë°ì„ ì‹œì‘í•˜ì§€ë„ ì•Šì•˜ê¸° ë•Œë¬¸ì—, launch fileì— ëŒ€í•´ì„œ ëª¨ë‘ ì´í•´í•˜ë ¤ í•˜ì§€ëŠ” ì•Šìœ¼ì…”ë„ ë©ë‹ˆë‹¤. ë‚¨ì€ ê°•ì˜ë“¤ì—ì„œ ê³„ì†í•´ì„œ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.\n"
},
{
	"uri": "/kr/ros2_basic_foxy/lecture4/",
	"title": "Lecture4 - ROS 2 Node C++ Programming",
	"tags": [],
	"description": "",
	"content": " ì‹¤ì œ ë¡œë´‡ ê°œë°œì—ì„œ Pythonë§Œ ì‚¬ìš©ë˜ì§€ëŠ” ì•ŠìŠµë‹ˆë‹¤. tensorflow, pytorchì™€ ê°™ì€ ë”¥ëŸ¬ë‹ í”„ë ˆì„ì›Œí¬ë“¤ì´ ëª¨ë‘ Pythonì„ ì‚¬ìš©í•˜ê³  ìˆê³ , ìƒëŒ€ì ìœ¼ë¡œ ê°œë°œ ê³¼ì •ì´ ì‰¬ì›Œ ë§ì€ ì‚¬ëŒë“¤ì´ Pythonì„ ì‚¬ìš©í•˜ê³  ìˆì§€ë§Œ, ì œì–´, ì„¼ì‹±ì„ ìœ„í•´ì„œëŠ” C++ë¥¼ ëŒ€ë¶€ë¶„ ì‚¬ìš©í•œë‹¤ê³  ë³´ì‹œë©´ ë©ë‹ˆë‹¤.\nimage from : wikipedia ë”°ë¼ì„œ ì•ì„  node í”„ë¡œê·¸ë˜ë° ì˜ˆì‹œë“¤ì„ ëª¨ë‘ C++ë¡œ êµ¬í˜„í•´ ë³¼ ì˜ˆì •ì…ë‹ˆë‹¤. ì•„ë˜ì™€ ê°™ì€ C++ ì§€ì‹ì´ í•„ìš”í•˜ì§€ë§Œ í•„ìˆ˜ëŠ” ì•„ë‹™ë‹ˆë‹¤.\ní´ë˜ìŠ¤ ìƒì„± (OOP) ìŠ¤ë§ˆíŠ¸ í¬ì¸í„° í—¤ë” ë¶„ë¦¬ ëŒë‹¤ í•¨ìˆ˜ std::bindì™€ placeholders C++ ë¹Œë“œ ì‹œìŠ¤í…œ (CMake) ì½”ë“œ ì„¤ëª…ì— ì•ì„œ ROS 2 C++ íŒ¨í‚¤ì§€ë¥¼ ê°œë°œí•˜ëŠ” ì ˆì°¨ì— ëŒ€í•´ ë¹ ë¥´ê²Œ í›‘ì–´ë³´ê² ìŠµë‹ˆë‹¤.\níŒ¨í‚¤ì§€ ìƒì„± í›„ src \u0026amp; include í´ë”ì—ì„œ ì½”ë“œ ì‘ì„± ros2 pkg create --build-type ament_cmake \u0026lt;package_name\u0026gt; CMakeLists.txt \u0026amp; package.xml ìˆ˜ì • add_executable(example_node_1 src/node_example_1.cpp) ament_target_dependencies(example_node_1 rclcpp) install( TARGETS example_node_1 DESTINATION lib/${PROJECT_NAME} ) ì½”ë“œ ë¹Œë“œì™€ ë””ë²„ê¹… colcon build --packages-select \u0026lt;package_name\u0026gt; source install/local_setup.bash ì½”ë“œ ì‹¤í–‰ ros2 run \u0026lt;pkg-name\u0026gt; \u0026lt;executable-name\u0026gt; ê°œë°œ ê³¼ì • ìì²´ëŠ” íŒŒì´ì¬ packageì™€ í¬ê²Œ ë‹¤ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.\ní•˜ì§€ë§Œ, C++ ê°œë°œì€ ì½”ë“œë¥¼ ë¹Œë“œí•˜ëŠ” ê³¼ì •ì—ì„œ ê°ì¢… ì»´íŒŒì¼ ì—ëŸ¬ì™€ ë§í¬ ì—ëŸ¬, ëŸ°íƒ€ì„ ì—ëŸ¬ê¹Œì§€ ë°œìƒí•˜ê¸° ë•Œë¬¸ì— ê°œë°œì— ì—¬ëŸ¬ì›€ì´ ìƒê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nâ‡’ ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ, í•™ìƒ ë¼ì´ì„¼ìŠ¤ë¡œ ë¬´ë£Œ ì‚¬ìš© ê°€ëŠ¥í•œ IDEë¥¼ ì†Œê°œí•˜ê³ , í•¨ê»˜ ì…‹ì—…í•´ë³´ê³ ì í•©ë‹ˆë‹¤.\nCLion ì„¤ì¹˜ì™€ ROS 2 ê°œë°œí™˜ê²½ ì„¤ì • CLionì€ IDEì˜ ëª…ê°€ Jetbrainsì—ì„œ ë§Œë“  C/C++ìš© í†µí•© ê°œë°œ í™˜ê²½ì…ë‹ˆë‹¤. C++ ê°œë°œìë¥¼ í˜ë“¤ê²Œ í•˜ëŠ” ê°ì¢… ì—ëŸ¬ë“¤ì˜ ë””ë²„ê¹…ì„ í¸ë¦¬í•˜ê²Œ í•´ì¤„ ë¿ë”ëŸ¬ ROS 2 ê°œë°œì„ ìœ„í•œ ì†”ë£¨ì…˜ë„ ì œê³µí•˜ê³  ìˆìŠµë‹ˆë‹¤.\nimage from : wikipedia CLionì€ ì˜¤í”ˆì†ŒìŠ¤ê°€ ì•„ë‹Œ íŒë§¤ë˜ê³  ìˆëŠ” ì†Œí”„íŠ¸ì›¨ì–´ì…ë‹ˆë‹¤.\ní•˜ì§€ë§Œ í•™ìƒì—ê²ŒëŠ” ë¬´ë£Œ ë¼ì´ì„¼ìŠ¤ë¥¼ ì œê³µí•˜ê³  ìˆìŠµë‹ˆë‹¤. ì•„ë˜ ë§í¬ë¥¼ í†µí•´ì„œ íšŒì›ê°€ì…ê³¼ í•™ìƒì¸ì¦ì„ ì§„í–‰í•œ ë‹¤ìŒ, CLionì„ ì„¤ì¹˜í•©ì‹œë‹¤.\nhttps://www.jetbrains.com/clion/\nhttps://www.jetbrains.com/community/education/#students\nì´ë©”ì¼ ì¸ì¦ì„ ê±°ì¹˜ë©´ ì–´ë µì§€ ì•Šê²Œ í•™ìƒì¸ì¦ì´ ì™„ë£Œë©ë‹ˆë‹¤. ì´ ê³¼ì •ì€ ìƒëµí•˜ê² ìŠµë‹ˆë‹¤.\ní•™ìƒ ë¼ì´ì„¼ìŠ¤ë¥¼ í†µí•´ CLionì„ ë¹„ë¡¯í•˜ì—¬ IntelliJ, PyCharm, WebStormê³¼ ê°™ì€ ë‹¤ì–‘í•œ ì–¸ì–´ì˜ IDEë¥¼ ë¬´ë£Œë¡œ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤. snapcraftë¥¼ í†µí•´ CLionì„ ì„¤ì¹˜í•˜ê³  ì‹¤í–‰ í•´ë´…ì‹œë‹¤. $ sudo snap install clion --classic [sudo] password for kimsooyoung: clion 2022.3.1 from jetbrainsâœ“ installed $ clion ì•½ê´€ ë™ì˜ ë° ë¡œê·¸ì¸ì„ í†µí•œ í•™ìƒ ì¸ì¦ì„ ê±°ì¹˜ë©´ ëª¨ë“  ì„¤ì¹˜ ì ˆì°¨ê°€ ì™„ë£Œë©ë‹ˆë‹¤. colcon buildë¥¼ í†µí•´ ë¹Œë“œí–ˆë˜ cpp_node_tutorial packageë¥¼ clion í”„ë¡œì íŠ¸ë¡œ ì—´ì–´ë³´ê² ìŠµë‹ˆë‹¤. clionì—ì„œ File â‡’ Openì„ ì‹¤í–‰í•œ ë’¤ cpp_node_tutorialì˜ CMakeLists.txtë¥¼ ì„ íƒí•©ë‹ˆë‹¤. build targetë¥¼ ì§€ì •í•˜ê³  ì‹¤í–‰í•˜ë©´ CLionìƒì—ì„œ ROS 2 í”„ë¡œê·¸ë¨ì„ ì‹¤í–‰ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. CLionì—ì„œì˜ ì¥ì ì„ ì§ì ‘ ì‚´í´ë³´ê¸° ìœ„í•´ í”„ë¡œê·¸ë¨ ê°œë°œì„ í•¨ê»˜ í•´ë³´ê² ìŠµë‹ˆë‹¤. ë¼ì´ë¸Œ ì½”ë”© Time!!\nëª¨ë“  ì„¤ì •ì´ ì™„ë£Œë˜ì—ˆë‹¤ë©´, ì´ì œ ë³¸ê²©ì ìœ¼ë¡œ C++ ì˜ˆì œ ì½”ë“œë¥¼ ì‚´í´ë´…ì‹œë‹¤.\nexample 1 - Hello ROS 2 íŒŒì´ì¬ì—ì„œ í•œì°¨ë¡€ ì‚´í´ë³¸ ë°” ìˆê¸°ì— ìì„¸í•œ ë¡œì§ë“¤ì€ ìƒëµí•©ë‹ˆë‹¤.\nì˜ˆì œ ì‹¤í–‰ $ ros2 run cpp_node_tutorial example_node_1 [INFO] [1666431282.586519100] [example_node_1]: ==== Hello ROS 2 ==== ì½”ë“œ ë¶„ì„ #include \u0026lt;rclcpp/rclcpp.hpp\u0026gt; int main(int argc, char **argv) { rclcpp::init(argc, argv); auto node = rclcpp::Node::make_shared(\u0026#34;example_node_1\u0026#34;); RCLCPP_INFO(node-\u0026gt;get_logger(), \u0026#34;==== Hello ROS 2 ====\u0026#34;); rclcpp::shutdown(); return 0; } rclcppì€ ROS 2ë¥¼ C++ì—ì„œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ í•„ìš”í•œ ì½”ë“œì˜ ì§‘í•©ì…ë‹ˆë‹¤.\nNode ìƒì„± ì‹œ ì£¼ì˜í•˜ì…”ì•¼ í•  ì ì€ â€œëª¨ë“  Nodeê°€ í¬ì¸í„°ì˜ í˜•ì‹ì„ ê°–ëŠ”ë‹¤â€ëŠ” ê²ƒì…ë‹ˆë‹¤. shared_ptrë¥¼ ì‚¬ìš©í•˜ì—¬ ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ë¥¼ ë§‰ê¸° ìœ„í•´ íŒŒìƒëœ ëª¨ë“  ë°ì´í„°ë“¤ì„ ì¶”ì í•˜ê³  ìˆìŠµë‹ˆë‹¤.\nrclcppì—ì„œ ë¡œê·¸ì˜ ì‹¤í–‰ì€ RCLCPP_INFOì™€ get_logger() ë©”ì†Œë“œë¥¼ í†µí•´ ì‹¤í–‰í•  ìˆ˜ ìˆìœ¼ë©°, ë¡œê·¸ëŠ” Nodeì—ì„œ ì‹¤í–‰ëœë‹¤ëŠ” ì ì„ ê¸°ì–µí•©ì‹œë‹¤.\nCMakeLists.txt ìˆ˜ì •\n# find_packageë¥¼ í†µí•´ ì¢…ì†ì„±ë“¤ì„ ì¶”ê°€í•©ë‹ˆë‹¤. find_package(\u0026lt;depends\u0026gt; REQUIRED) # ì‹¤í–‰ í”„ë¡œê·¸ë¨ ë¹Œë“œ ì„¤ì • add_executable(\u0026lt;program_name\u0026gt; include/\u0026lt;header\u0026gt;.hpp src/\u0026lt;code\u0026gt;.cpp ...) ament_target_dependencies(\u0026lt;program_name\u0026gt; \u0026lt;dependency1\u0026gt; \u0026lt;dependency2\u0026gt; ...) install( TARGETS \u0026lt;program_name\u0026gt; DESTINATION lib/${PROJECT_NAME} ) íŒ¨í‚¤ì§€ ë¹Œë“œ \u0026amp; ì‹¤í–‰ colcon build --packages-select cpp_node_tutorial source install/local_setup.bash ros2 run cpp_node_tutorial example_node_1 ì˜ˆì œ ì†ŒìŠ¤ ì½”ë“œë¥¼ ì¡°ê¸ˆì´ë¼ë„ ìˆ˜ì •í•˜ì—¬ ì—¬ëŸ¬ë¶„ë“¤ë§Œì˜ ì½”ë“œë¥¼ ì‘ì„±í•´ë³´ê³  CLionì„ í†µí•œ ë¹Œë“œê¹Œì§€ ìŠ¤ìŠ¤ë¡œ í•œ ë²ˆ í•´ë´…ì‹œë‹¤.\nexample 2 - Timer ì˜ˆì œ ì‹¤í–‰ $ ros2 run cpp_node_tutorial example_node_2 ==== Hello ROS 2 : 0 ==== ==== Hello ROS 2 : 1 ==== ==== Hello ROS 2 : 2 ==== ==== Hello ROS 2 : 3 ==== ==== Hello ROS 2 : 4 ==== ... rclcppì—ì„œ timerëŠ” create_wall_timerë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. #include \u0026lt;iostream\u0026gt; #include \u0026lt;memory\u0026gt; #include \u0026#34;rclcpp/rclcpp.hpp\u0026#34; static int count = 0; void timer_callback(){ std::cout \u0026lt;\u0026lt; \u0026#34;==== Hello ROS 2 : \u0026#34; \u0026lt;\u0026lt; count \u0026lt;\u0026lt; \u0026#34; ====\u0026#34; \u0026lt;\u0026lt; std::endl; count++; } int main(int argc, char **argv) { rclcpp::init(argc, argv); auto node = rclcpp::Node::make_shared(\u0026#34;example_node_2\u0026#34;); auto timer = node-\u0026gt;create_wall_timer(std::chrono::milliseconds(200), timer_callback); rclcpp::spin(node); rclcpp::shutdown(); return 0; } example 3 - OOP Node ê¸°ëŠ¥ ìì²´ëŠ” í° ì˜ë¯¸ê°€ ì—†ìœ¼ë¯€ë¡œ ì½”ë“œë¥¼ ìœ„ì£¼ë¡œ ì„¤ëª…í•˜ê² ìŠµë‹ˆë‹¤. #include \u0026lt;memory\u0026gt; #include \u0026#34;rclcpp/rclcpp.hpp\u0026#34; class NodeClass: public rclcpp::Node { public: NodeClass(): Node(\u0026#34;example_node_4\u0026#34;) {} }; int main(int argc, char **argv) { rclcpp::init(argc, argv); auto node = std::make_shared\u0026lt;NodeClass\u0026gt;(); RCLCPP_INFO(node-\u0026gt;get_logger(), \u0026#34;==== Hello ROS 2 ====\u0026#34;); rclcpp::shutdown(); return 0; } ëª¨ë“  NodeëŠ” rclcpp::Nodeë¡œë¶€í„° ìƒì†ì„ ë°›ìŠµë‹ˆë‹¤. ìƒì† í›„ ìƒì„±ìì—ì„œ Nodeì˜ ì´ë¦„ì„ ì§€ì •í•´ì¤˜ì•¼ í•˜ë©°, topic pub/sub, loggerì™€ ê°™ì€ ê¸°ëŠ¥ë“¤ì€ ëª¨ë‘ rclcpp::Nodeì— êµ¬í˜„ë˜ì–´ ìˆìŠµë‹ˆë‹¤.\në”ë¶ˆì–´, Node ìì²´ëŠ” í¬ì¸í„°ë¡œ ì·¨ê¸‰ëœë‹¤ëŠ” ì ë„ ë‹¤ì‹œ í•œ ë²ˆ ê°•ì¡°ë“œë¦½ë‹ˆë‹¤.\nexample 4 - OOP Timer Node callback í•¨ìˆ˜ë¥¼ bindingí•˜ëŠ” ë¶€ë¶„ì— ì§‘ì¤‘í•˜ì„¸ìš”. timer_callbackëŠ” í´ë˜ìŠ¤ ë©”ì†Œë“œì´ê¸° ë•Œë¬¸ì— binding ì‹œ NodeClass::timer_callbackì™€ ê°™ì´ ëª…ì‹œí•´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤. #include \u0026lt;memory\u0026gt; #include \u0026#34;rclcpp/rclcpp.hpp\u0026#34; class NodeClass: public rclcpp::Node { private: size_t count; rclcpp::TimerBase::SharedPtr timer; void timer_callback() { RCLCPP_INFO(this-\u0026gt;get_logger(), \u0026#34;==== Hello ROS 2 : %d\u0026#34;, count); count++; } public: NodeClass() : Node(\u0026#34;example_node_5\u0026#34;) { timer = this-\u0026gt;create_wall_timer( std::chrono::milliseconds(200), std::bind(\u0026amp;NodeClass::timer_callback, this) ); } }; int main(int argc, char **argv) { rclcpp::init(argc, argv); auto node = std::make_shared\u0026lt;NodeClass\u0026gt;(); rclcpp::spin(node); rclcpp::shutdown(); return 0; } ë§ˆì§€ë§‰ìœ¼ë¡œ rclcpp logger levelì„ ê°„ë‹¨íˆ ì‚´í´ë³´ê³  ë§ˆë¬´ë¦¬ì§“ê² ìŠµë‹ˆë‹¤. void timer_callback() { RCLCPP_DEBUG(this-\u0026gt;get_logger(), \u0026#34;==== Hello ROS 2 : %d ====\u0026#34;, count); RCLCPP_INFO(this-\u0026gt;get_logger(), \u0026#34;==== Hello ROS 2 : %d ====\u0026#34;, count); RCLCPP_WARN(this-\u0026gt;get_logger(), \u0026#34;==== Hello ROS 2 : %d ====\u0026#34;, count); RCLCPP_ERROR(this-\u0026gt;get_logger(), \u0026#34;==== Hello ROS 2 : %d ====\u0026#34;, count); RCLCPP_FATAL(this-\u0026gt;get_logger(), \u0026#34;==== Hello ROS 2 : %d ====\u0026#34;, count); count++; } ì°¸ê³ ìë£Œ\nhttps://roboticsbackend.com/ros2-yaml-params/ https://roboticsbackend.com/rclpy-params-tutorial-get-set-ros2-params-with-python/ https://www.jetbrains.com/help/clion/ros2-tutorial.html#change-prj-root "
},
{
	"uri": "/kr/ros2_basic_foxy/lecture5/",
	"title": "Lecture5 - ROS 2 Topic and Examples",
	"tags": [],
	"description": "",
	"content": " Topicì— ëŒ€í•´ ë°°ì›Œë³´ê¸° ì „ì—, ì‹¤ìŠµ ì‹œìŠ¤í…œì„ êµ¬ì¶•í•´ë´…ì‹œë‹¤.\nSRC Gazebo ì´ë²ˆ ROS 2 ê°•ì˜ì˜ ì‹¤ìŠµë“¤ì€ Road Balanceì˜ ì°¨ëŸ‰í˜• ë¡œë´‡ SRCë¥¼ í†µí•´ ì§„í–‰í•˜ê³ ì í•©ë‹ˆë‹¤. ì‹¤ìŠµì„ ì§„í–‰í•˜ê¸° ì „ Gazebo í™˜ê²½ì„ í•¨ê»˜ ì„¸íŒ…í•´ë³´ê² ìŠµë‹ˆë‹¤.\nsrc_gazebo ì‹¤í–‰ ì„¸íŒ… - ë‹¤ì†Œ ë²ˆê±°ë¡œìš´ ì‘ì—…ì´ë¯€ë¡œ gifë¥¼ ë³´ì‹œë©´ì„œ ì°¨ê·¼ì°¨ê·¼ ì˜ ë”°ë¼ì™€ì£¼ì„¸ìš”! cd ~/ros2_ws/src/du2023-ros2 ./setup_scripts.sh # CMakeLists.txt ìˆ˜ì • (ì£¼ì„) colcon build --packages-select src_gazebo source install/local_setup.bash # CMakeLists.txt ìˆ˜ì • (ì£¼ì„ í•´ì œ) colcon build --packages-select src_gazebo colcon build --packages-select src_controller source install/local_setup.bash empty world ì‹¤í–‰ ros2 launch src_gazebo empty_world.launch.py ë¹ˆ gazebo í™˜ê²½ì— ì°¨ëŸ‰í˜• ë¡œë´‡ì´ ë“±ì¥í•  ê²ƒì…ë‹ˆë‹¤. í•¨ê»˜ ë“±ì¥í•˜ëŠ” rqt_robot_steeringì„ í†µí•´ ë¡œë´‡ì„ ì›€ì§ì—¬ë³´ì„¸ìš”. ì‹¤í–‰ ì¤‘ ë°œìƒí•  ìˆ˜ ìˆëŠ” ì˜¤ë¥˜ì™€ í•´ê²°ë°©ë²•ì„ ì œì‹œë“œë¦½ë‹ˆë‹¤. ì•„ë˜ì™€ ê°™ì€ ì—ëŸ¬ ë°œìƒ ì‹œ sudo apt dist-upgradeë¥¼ ì…ë ¥í•˜ë©´ ë©ë‹ˆë‹¤. ë¡œë´‡ì— ë¶€ì°©ë˜ì–´ ìˆëŠ” ì„¼ì„œ ë°ì´í„°ë“¤ê³¼ ì œì–´ ë°ì´í„°ë¥¼ ros2 topic listë¡œ í™•ì¸í•´ë´…ì‹œë‹¤.\n/cmd_vel : Twist msgë¥¼ í†µí•´ ë¡œë´‡ì„ ì œì–´í•˜ëŠ” topic /imu/data : imu ë°ì´í„° /scan : 2D lidar /logi_camera_sensor/image_raw : ì „ë°© ì¹´ë©”ë¼ ë°ì´í„° ROS 2 Topic ê°•ì˜ë¥¼ ì—´ì‹¬íˆ ë”°ë¼ì˜¤ë©´ì„œ ROS ê°œë…ì„ ìŠì–´ë²„ë ¸ì„ ìˆ˜ë„ ìˆìœ¼ë¯€ë¡œ ê°„ë‹¨íˆ ê°œë… ë³µìŠµì„ í•´ë³´ê² ìŠµë‹ˆë‹¤.\nTopicì€ Nodeë“¤ ì‚¬ì´ì— ë°ì´í„°(Message)ê°€ ì˜¤ê°€ëŠ” ê¸¸(Bus)ì˜ ì´ë¦„ì´ë©°, ì ì ˆí•œ ì´ë¦„ìœ¼ë¡œ ë°ì´í„°ë¥¼ ì†¡ìˆ˜ì‹ í•˜ì§€ ì•Šìœ¼ë©´ ì›í•˜ëŠ” ë™ì‘ì„ ìˆ˜í–‰í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. image from : docs.ros.org\nTopicì˜ ì¤‘ìš”í•œ íŠ¹ì§•ìœ¼ë¡œ Topicì€ ì—¬ëŸ¬ Nodeë“¤ë¡œë¶€í„° ë°ì´í„°ë¥¼ ë°›ì„ ìˆ˜ ìˆê³ , ì „ì†¡ ì‹œì—ë„ ì—¬ëŸ¬ Nodeë“¤ì—ê²Œ ì „ì†¡ì´ ê°€ëŠ¥í•œ ë°©ì‹ì…ë‹ˆë‹¤. image from : docs.ros.org topicì„ í†µí•´ ë°ì´í„°ê°€ ì „ë‹¬ë˜ëŠ” ê³¼ì •ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.\në°ì´í„°ë¥¼ ë³´ë‚´ëŠ” ì£¼ì²´ì¸ publisherëŠ” ë°ì´í„°ë¥¼ ë°›ëŠ” ì£¼ì²´, subscriberë¥¼ ì§€ì •í•œ ë’¤, topicì„ í†µí•´ ì›í•˜ëŠ” ì •ë³´ë¥¼ ì „ë‹¬í•©ë‹ˆë‹¤. ì´ê²ƒì„ topic publishë¼ê³  ë¶€ë¥´ì§€ìš”. ë°˜ëŒ€ë¡œ, ë°ì´í„°ë¥¼ ë°›ëŠ” ì£¼ì²´ì¸ subscriber ì…ì¥ì—ì„  topicì„ í†µí•´ ë°ì´í„°ë¥¼ ë°›ê²Œ ë˜ë©° ì´ê²ƒì€ topic subscribeë¼ê³  ë¶ˆë¦½ë‹ˆë‹¤. ROS 2 Topic msg ë¡œë´‡ í”„ë¡œê·¸ë˜ë° ì‹œ ì„¼ì„œ, ì œì–´ ë°ì´í„°ë¥¼ ë¹„ë¡¯í•˜ì—¬ ë‹¤ì–‘í•œ ìœ í˜•ì˜ ë°ì´í„°ë“¤ì´ Topicì„ í†µí•´ ì˜¤ê³  ê°‘ë‹ˆë‹¤. ROSì—ì„œëŠ” ì´ëŸ¬í•œ ë°ì´í„° í˜•ì‹ì„ msg - Messageë¼ëŠ” í˜•íƒœë¡œ ì œê³µí•˜ë©°, ì›í•˜ëŠ” ë°ì´í„°ì— ì í•©í•œ topic msgë¥¼ ì‚¬ìš©í•˜ë©´ ë”ìš± íš¨ìœ¨ì ì¸ ë¡œë´‡ í”„ë¡œê·¸ë˜ë°ì´ ê°€ëŠ¥í•´ì§‘ë‹ˆë‹¤.\nimage from : ethz.ch geometry_msgs/Twistì™€ ê°™ì€ messageëŠ” ROS 2ì—ì„œë„ ë™ì¼í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¤ë§Œ, ROS 2ì—ì„œëŠ” msg/srv/action ê³¼ ê°™ì´ í•„ë“œì˜ êµ¬ë¶„ì´ í•˜ë‚˜ ë” ì¶”ê°€ë©ë‹ˆë‹¤.\nROS 1 : geometry_msgs/Twist ROS 2 : geometry_msgs/msg/Twist ì¶œì²˜ : http://docs.ros.org/ íŠ¹ì • messageê°€ ì–´ë–»ê²Œ êµ¬ì„±ë˜ì–´ ìˆëŠ”ì§€ ì•Œê³  ì‹¶ì„ ë•ŒëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì»¤ë©˜ë“œ ë¼ì¸ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.\n$ ros2 interface show geometry_msgs/msg/Twist # This expresses velocity in free space broken into its linear and angular parts. Vector3 linear Vector3 angular í˜¹ì€ ì•ì„œ ì œê°€ ì‚´í´ë³¸ ê²ƒ ì²˜ëŸ¼ ê²€ìƒ‰ì„ í•´ ë³´ì•„ë„ ë©ë‹ˆë‹¤.\nROS 2ë¡œ ë„˜ì–´ì˜¤ë©´ì„œ, topic ì»¤ë©˜ë“œë“¤ì€ ë‹¤ìŒê³¼ ê°™ì´ ì‚´ì§ ë°”ë€Œì—ˆìŠµë‹ˆë‹¤.\nrostopic list â‡’ ros2 topic list rostopic info â‡’ ros2 topic info rostopic echo â‡’ ros2 topic echo ROS 2 Topic Tools ROS 2ì—ì„œë„ GUIíˆ´ RQTë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. Topicê³¼ ê´€ë ¨ëœ rqt toolsë“¤ì„ ì‚¬ìš©í•´ë´…ì‹œë‹¤.\nROS 1ê³¼ ROS 2ì˜ rqtëŠ” ë‹¤ë¥¸ í”„ë¡œê·¸ë¨ì´ë©° ROS 1ì˜ pluginê³¼ ROS 2ì˜ pluginì´ ì™„ì „ ë™ì¼í•˜ì§€ëŠ” ì•ŠìŠµë‹ˆë‹¤.\nì‹¤ìŠµì„ ìœ„í•´ gazeboì™€ rqtë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤. # Terminal 1 $ ros2 launch src_gazebo empty_world.launch.py # Terminal 2 $ rqt rqt ìƒë‹¨ì˜ ë©”ë‰´ë°”ì—ì„œ Plugins â‡’ Topics â‡’ Topic Monitorë¥¼ í´ë¦­í•©ë‹ˆë‹¤. topic monitorë¥¼ í†µí•´ í˜„ì¬ ì˜¤ê°€ê³  ìˆëŠ” topicë“¤ì„ í•œëˆˆì— ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë²ˆì—ëŠ” rqt ìƒë‹¨ì˜ ë©”ë‰´ë°”ì—ì„œ Plugins â‡’ Topics â‡’ Message Publisherë¥¼ í´ë¦­í•˜ê³ , + ë²„íŠ¼ì„ ëˆŒëŸ¬ publishë¥¼ ì›í•˜ëŠ” topicì„ ì¶”ê°€í•©ë‹ˆë‹¤.\nTopic PublisherëŠ” ë³„ë„ì˜ ì‘ì—… ì—†ì´ msgì— ì›í•˜ëŠ” ê°’ì„ ì±„ì›Œ topic publishê°€ ê°€ëŠ¥í•˜ê²Œ í•´ì£¼ëŠ” íˆ´ì…ë‹ˆë‹¤. ìµœì¢… publishë¥¼ ìœ„í•´ ì²´í¬ë°•ìŠ¤ë¥¼ í´ë¦­í•˜ê³ , ì›í•˜ëŠ” ê°’ì„ ì±„ì›Œë„£ìŠµë‹ˆë‹¤. ROS Bridge ê°•ì˜ë…¸íŠ¸ë¥¼ ì‘ì„±í•˜ê³  ìˆëŠ” 2023ë…„ ì§€ê¸ˆë„ ROS 1ìœ¼ë¡œ ê°œë°œëœ ì‹œìŠ¤í…œì— ì¢…ì†ì„±ì„ ê°€ì§„ ê¸°ì—…ë“¤ê³¼ í”„ë¡œì íŠ¸ë“¤ì´ ë§ìŠµë‹ˆë‹¤. ROS 1ê³¼ ROS 2ë¥¼ ê°™ì´ ì‚¬ìš©í•  ìˆ˜ëŠ” ì—†ì„ê¹Œìš”? ros1 bridgeë¥¼ ì‹¤ìŠµí•´ë´…ì‹œë‹¤.\nì¼ì „, ROS 1ì—ì„œ ì‚¬ìš©í•˜ë˜ smb gazeboë¥¼ ì˜¤ëœë§Œì— ì‹¤í–‰ì‹œì¼œë´…ì‹œë‹¤. roslaunch smb_gazebo smb_gazebo.launch ros1 bridgeë¥¼ í†µí•´ ROS 2 ì‹œìŠ¤í…œì—ì„œ ë¡œë´‡ì„ ì œì–´í•´ë³´ê² ìŠµë‹ˆë‹¤. ìƒˆë¡œìš´ í„°ë¯¸ë„ì„ ì—´ê³ , ì´ˆê¸° ì˜µì…˜ ì„ íƒ ì‹œ 3ë²ˆì„ ì„ íƒí•˜ë©´ ros1 bridgeê°€ ì‹¤í–‰ë©ë‹ˆë‹¤. (ì´ ë™ì‘ì€ ì‚¬ì‹¤ dynamic_bridgeë¥¼ ì‹¤í–‰ì‹œí‚¤ëŠ” ê²ƒì…ë‹ˆë‹¤.) sudo apt install ros-foxy-ros1-bridge -y # Terminal 1 - ros bridge ros2 run ros1_bridge dynamic_bridge # Terminal 2 - ros2 foxy ros2 run teleop_twist_keyboard teleop_twist_keyboard ROS 2ë¡œ ì„¤ì •ëœ í„°ë¯¸ë„ì—ì„œ ROS 1ìœ¼ë¡œ êµ¬ë™ë˜ê³  ìˆëŠ” ë¡œë´‡ì„ ì¡°ì¢…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ros bridgeê°€ ìˆìœ¼ë‹ˆ ROS 2 ê°œë°œì„ êµ³ì´ í•˜ì§€ ì•Šì•„ë„ ëœë‹¤ê³  ìƒê°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ë³´ì•ˆ, ì§€ì—°ê³¼ ê°™ì€ ROS 1ì˜ ê³ ì§ˆì ì¸ ë¬¸ì œë“¤ì€ ì—¬ì „íˆ ë‚¨ì•„ìˆê²Œ ë˜ë¯€ë¡œ í”„ë¡œì íŠ¸ë¥¼ ì‹œì‘í•˜ëŠ” ë‹¨ê³„ë¼ë©´, ROS 2ë¡œ ëª¨ë“  ê°œë°œì„ ì§„í–‰í•˜ì‹œê¸¸ ì¶”ì²œë“œë¦½ë‹ˆë‹¤. image from : swri.org ì°¸ê³ ë¡œ, /opt/ros/\u0026lt;ros-version\u0026gt;/setup.bashëŠ” ROS ì‹œìŠ¤í…œì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œ í•„ìš”í•œ ì„¤ì •ì´ ë‹´ê¸´ íŒŒì¼ì…ë‹ˆë‹¤. í˜¹ì—¬ë‚˜ galactic, humbleê³¼ ê°™ì´ ìµœì‹  ë²„ì „ì„ ì‚¬ìš©í•˜ê³  ì‹¶ì„ ë•Œ ì°¸ê³ í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.\nROS 1ê³¼ ROS 2ë¥¼ ëª¨ë‘ ê´€ë¦¬í•˜ê¸°ì—ëŠ” ë§ì€ ë…¸ë ¥ì´ í•„ìš”í•˜ê³ , ì›í•˜ëŠ” ê¸°ëŠ¥ì´ ëª¨ë‘ ë™ì‘í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ì „ ë²„ì „ legacyê°€ ìˆëŠ” ê²½ìš°, ì˜ íŒë‹¨í•˜ì—¬ ì‹œìŠ¤í…œì„ ìœ ì§€/ë³´ìˆ˜í•©ì‹œë‹¤.\nMy Gazebo World Topicì˜ ì‘ìš©ìœ¼ë¡œ Gazeboë¥¼ ì‚¬ìš©í•˜ì—¬ ë‚˜ë§Œì˜ ì¥ì• ë¬¼ì„ ë§Œë“¤ê³ , ì¶©ëŒì„ íšŒí”¼í•˜ëŠ” ì½”ë“œë¥¼ ì‘ì„±í•´ë³´ê³ ì í•©ë‹ˆë‹¤. ì´ë¥¼ ìœ„í•´ Gazeboì˜ Building Editor ì‚¬ìš©ë²•ì„ ì•Œë ¤ë“œë¦¬ê² ìŠµë‹ˆë‹¤.\ngazeboë¥¼ ì‹¤í–‰ì‹œí‚¨ ë’¤, ìƒë‹¨ Edit ì˜µì…˜ì—ì„œ Building Editorë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤. ìƒë‹¨ ëª¨ëˆˆì¢…ì´ì— ìŠ¤ì¼€ì¹˜ë¥¼ í†µí•´ ê±´ë¬¼ ë²½ì„ ìƒì„±í•  ìˆ˜ ìˆìœ¼ë©°, í•˜ë‹¨ viewë¥¼ í†µí•´ ì‹¤ì‹œê°„ìœ¼ë¡œ ì—…ë°ì´íŠ¸ë˜ëŠ” ê±´ë¬¼ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. í˜¹ì—¬ ì‹¤ìˆ˜ë¥¼ í–ˆê±°ë‚˜, ë³´ë‹¤ ì •í™•í•œ ìˆ˜ì¹˜ë¥¼ ì…ë ¥í•˜ê³  ì‹¶ì€ ê²½ìš°, ëª¨ëˆˆì¢…ì´ ìœ„ì˜ ê²€ì€ ì„ ì„ ë”ë¸” í´ë¦­í•˜ë©´ ì‚¬ì§„ê³¼ ê°™ì´ êµ¬ì²´ì ì¸ ì„¤ì •ì„ ë³€ê²½í•  ìˆ˜ ìˆëŠ” íƒ­ì´ ë“±ì¥í•©ë‹ˆë‹¤. ìˆ˜ì •ì´ ì™„ë£Œë˜ì—ˆë‹¤ë©´, ì™¼ìª½ íƒ­ì—ì„œ door, stairsë„ ì‚¬ìš©í•´ë³´ê³ , Textureë„ ì…í˜€ë´…ì‹œë‹¤. ëª¨ë“  ì‘ì—…ì„ ë§ˆì¹œ ë’¤, File íƒ­ì—ì„œ Save Asë¥¼ ì„ íƒí•˜ì—¬ ì™„ì„±í•œ ë¬¼ì²´ë¥¼ ì €ì¥í•©ë‹ˆë‹¤. (ì €ëŠ” wall ì´ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ì €ì¥í•´ë³´ê² ìŠµë‹ˆë‹¤.) ì €ì¥ëœ í´ë” ë‚´ë¶€ëŠ” ë‹¤ìŒê³¼ ê°™ì€ êµ¬ì¡°ë¥¼ ê°–ê²Œ ë©ë‹ˆë‹¤. â”œâ”€ wall â”œâ”€â”€ model.config â””â”€â”€ model.sdf model.config : í•´ë‹¹ modelì˜ ì´ë¦„, ì‘ì„±ì ë“± ê¸°ë³¸ì ì¸ ì •ë³´ë“¤ì´ ê¸°ì…ë©ë‹ˆë‹¤. model.sdf : ì‹¤ì§ì ì¸ sdf í˜•ì‹ì˜ ëª¨ë¸ì´ ìœ„ì¹˜í•©ë‹ˆë‹¤. ì‘ì„±í•œ ë¬¼ì²´ë¥¼ Gazeboì—ì„œ ë‘ê³ ë‘ê³  ì‚¬ìš©í•˜ëŠ” ëª‡ê°€ì§€ ë°©ë²•ë“¤ì´ ìˆìŠµë‹ˆë‹¤.\nGAZEBO_MODEL_PATHì— ì¶”ê°€í•˜ê¸° â‡’ ~/.gazebo/gui.ini íŒŒì¼ ë‚´ model_pathsì— building í´ë”ì— ì ˆëŒ€ ê²½ë¡œë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤. $ gedit ~/.gazebo/gui.ini [geometry] x=0 y=0 [model_paths] filenames=/home/kimsooyoung/\u0026lt;your-folder-location\u0026gt; launch fileì—ì„œ GAZEBO_MODEL_PATH ìˆ˜ì •í•˜ê¸° â‡’ ëŒ€ì‹  ì´ë ‡ê²Œ í•˜ë©´ í•´ë‹¹ launch file ì‚¬ìš© ì‹œì—ë§Œ GAZEBO_MODEL_PATHê°€ ë°˜ì˜ë©ë‹ˆë‹¤. if \u0026#39;GAZEBO_MODEL_PATH\u0026#39; in os.environ: os.environ[\u0026#39;GAZEBO_MODEL_PATH\u0026#39;] += \u0026#34;:\u0026#34; + gazebo_model_path else: os.environ[\u0026#39;GAZEBO_MODEL_PATH\u0026#39;] = gazebo_model_path ì´ì œ Gazeboë¥¼ ì‹¤í–‰ì‹œí‚¤ë©´, ì‚¬ì§„ê³¼ ê°™ì´ Insert ë¶€ë¶„ì— buildingì´ ì¶”ê°€ë˜ì–´ìˆìŒì„ í™•ì¸ ê°€ëŠ¥í•©ë‹ˆë‹¤. ì´ë¥¼ í´ë¦­ í›„ gazebo í™˜ê²½ìœ¼ë¡œ ì»¤ì„œë¥¼ ì˜®ê¸°ë©´ ì›í•˜ëŠ” ìœ„ì¹˜ì— wallì„ ìœ„ì¹˜ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤. wallì´ ì¶”ê°€ëœ worldëŠ” ë³„ë„ë¡œ ì €ì¥í•´ì¤˜ì•¼ í•©ë‹ˆë‹¤. File â‡’ Save World Asë¥¼ í´ë¦­í•˜ë©´ ì™„ì„±ëœ world íŒŒì¼ì„ ì €ì¥í•©ì‹œë‹¤. ìƒì„±í•œ world íŒŒì¼ì„ launch íŒŒì¼ë¡œ ì‹¤í–‰í•´ë´…ì‹œë‹¤.\nì €ì¥í•´ë‘ì—ˆë˜ Gazebo world íŒŒì¼ì„ src_gazeboì˜ worlds í´ë”ì— ìœ„ì¹˜ì‹œí‚µë‹ˆë‹¤. launch íŒŒì¼ì„ ìˆ˜ì •í•˜ì—¬ ìƒˆë¡œìš´ world íŒŒì¼ì˜ ìœ„ì¹˜ë¥¼ ì „ë‹¬í•©ë‹ˆë‹¤.\ndef generate_launch_description(): ... # gazebo pkg_gazebo_ros = FindPackageShare(package=\u0026#39;gazebo_ros\u0026#39;).find(\u0026#39;gazebo_ros\u0026#39;) pkg_path = os.path.join(get_package_share_directory(\u0026#39;src_gazebo\u0026#39;)) world_path = os.path.join(pkg_path, \u0026#39;worlds\u0026#39;, \u0026#39;ì—¬ëŸ¬ë¶„ì˜-world-file.world\u0026#39;) ... # Start Gazebo server start_gazebo_server_cmd = IncludeLaunchDescription( PythonLaunchDescriptionSource(os.path.join(pkg_gazebo_ros, \u0026#39;launch\u0026#39;, \u0026#39;gzserver.launch.py\u0026#39;)), launch_arguments={\u0026#39;world\u0026#39;: world_path}.items() ) packageë¥¼ ë¹Œë“œí•˜ê³ , gazeboë¥¼ ë‹¤ì‹œ ì‹¤í–‰í•´ë´…ì‹œë‹¤. colcon build --packages-select src_gazebo source install/local_setup.bash ros2 launch src_gazebo empty_world.launch.py ì œì‘í•œ worldì™€ ë¡œë´‡ì´ í•¨ê»˜ ë“±ì¥í•˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ìµœëŒ€í•œ ì—¬ëŸ¬ë¶„ë“¤ë§Œì˜ ì¥ì• ë¬¼ì„ ë§Œë“¤ì–´ë³´ì‹œê³ , í˜¹ì‹œë‚˜ ì´ ê³¼ì •ì—ì„œ ë„ì €íˆ ëª¨ë¥´ê² ëŠ” ì˜¤ë¥˜ê°€ ë°œìƒí–ˆê±°ë‚˜, ì‹œê°„ì´ ì—†ëŠ” ê²½ìš°, ìš°ì„  ì œê°€ ì œì‘í•œ worldì™€ launch fileì„ ì‚¬ìš©í•˜ë„ë¡ í•©ë‹ˆë‹¤. â‡’ ros2 launch src_gazebo wall_world.launch.py\nROS 2 Topic í”„ë¡œê·¸ë˜ë° example1 - cmd_vel publish ì¤€ë¹„ëœ ì˜ˆì‹œë¥¼ ìš°ì„  ì‹¤í–‰í•´ë´…ì‹œë‹¤. # Terminal 1 ros2 launch src_gazebo empty_world.launch.py # Terminal 2 cd ~/ros2_ws colcon build --packages-select py_topic_tutorial source install/local_setup.bash ros2 run py_topic_tutorial topic_pub_node ë¡œë´‡ì´ ì›ì„ ê·¸ë¦¬ë©° ì›€ì§ì´ê¸° ì‹œì‘í•©ë‹ˆë‹¤. ROS 1 ê°•ì˜ë¥¼ ì™„ë£Œí•˜ì˜€ë‹¤ë©´ ì–´ë–»ê²Œ êµ¬í˜„í•˜ì˜€ì„ì§€ ì•„ì‹œê² ì§€ìš”? ì½”ë“œë¥¼ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤ - ì‹œì‘ìœ¼ë¡œ, í•„ìš”í•œ íŒŒì´ì¬ íŒ¨í‚¤ì§€ë“¤ì„ import í•©ë‹ˆë‹¤. ROS 2ì—ì„œ íŒŒì´ì¬ í”„ë¡œê·¸ë˜ë°ì„ í•˜ê¸° ìœ„í•´ì„œëŠ” rclpyë¥¼ import í•´ì•¼ í•©ë‹ˆë‹¤. ë”ë¶ˆì–´, Twistë¥¼ importí•˜ëŠ” ë¬¸ë²•ë„ ëˆˆì—¬ê²¨ë´…ì‹œë‹¤. import random from geometry_msgs.msg import Twist import rclpy from rclpy.node import Node í•µì‹¬ì´ ë˜ëŠ” TwistPubNode í´ë˜ìŠ¤ì˜ ìƒì„±ìë¶€í„° ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤. class TwistPubNode(Node): def __init__(self): super().__init__(\u0026#39;twist_pub_node\u0026#39;) self.get_logger().info( f\u0026#39;TwistPubNode Created at {self.get_clock().now().to_msg().sec}\u0026#39; ) # self.twist_publisher = self.create_publisher(Twist, \u0026#34;twist_topic\u0026#34;, 10) self.twist_publisher = self.create_publisher(Twist, \u0026#39;/cmd_vel\u0026#39;, 10) create_publisherëŠ” topic publisherë¥¼ ìƒì„±í•˜ëŠ” í•¨ìˆ˜ë¡œ 3ê°œì˜ ë§¤ê°œë³€ìˆ˜ë¥¼ ë°›ìœ¼ë©° ê°ê°ì— ëŒ€í•œ ì„¤ëª…ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.\nmessage type : Topic í†µì‹ ì— ì‚¬ìš©ë  msg Type ì…ë‹ˆë‹¤. topic name : ì‚¬ìš©í•  Topic ì´ë¦„ì„ ì§€ì •í•©ë‹ˆë‹¤. (ì´ ì´ë¦„ì„ ì˜ëª» ì„¤ì •í•˜ë©´ ì¡´ì¬í•˜ì§€ ì•ŠëŠ” topicì— Publishí•˜ëŠ” ì˜¤ë¥˜ ìƒí™©ì´ ë°œìƒí•˜ë‹ˆ ì£¼ì˜í•©ë‹ˆë‹¤.) queue_size : ëŒ€ê¸°ì—´ì˜ í¬ê¸°ë¼ê³  ì´í•´í•˜ì‹œë©´ ì¢‹ìŠµë‹ˆë‹¤. timer callbackì—ì„œ publishê°€ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤. ìƒì„±í•œ publisherì—ì„œ publish í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ë©° ë§¤ê°œë³€ìˆ˜ë¡œ messageê°€ ì „ë‹¬ë©ë‹ˆë‹¤. ... self.create_timer(0.2, self.timer_callback) def timer_callback(self): \u0026#34;\u0026#34;\u0026#34;Timer will run this function periodically.\u0026#34;\u0026#34;\u0026#34; msg = Twist() # Fill in msg with compatible values msg.linear.x = 0.5 msg.angular.z = 1.0 self.twist_publisher.publish(msg) example2 - scan subscription ì´ë²ˆ ì˜ˆì‹œëŠ” ë¼ì´ë‹¤ ë°ì´í„°ë¥¼ ë‹¤ë¤„ë³´ê³ ì í•©ë‹ˆë‹¤. ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•´ë´…ì‹œë‹¤. # Terminal 1 $ ros2 launch src_gazebo empty_world.launch.py # Terminal 2 $ ros2 run py_topic_tutorial topic_sub_node [INFO] [1672494602.141200628] [scan_sub_node]: msg.ranges[0] : inf msg.ranges[30] : inf msg.ranges[60] : 0.7975894212722778 msg.ranges[90] : inf msg.ranges[119] : inf ... ì˜ˆì‹œë¥¼ ì‹¤í–‰ì‹œí‚¨ ìƒí™©ì—ì„œ Gazebo ìƒì˜ ë¡œë´‡ ì£¼ë³€ìœ¼ë¡œ ë¬¼ì²´ë¥¼ ë“±ì¥ì‹œì¼œë´…ì‹œë‹¤.\nscan dataì˜ rangesëŠ” ì‚¬ì§„ê³¼ ê°™ì€ ê±°ë¦¬ ë°ì´í„°ë¥¼ ë‹´ê³  ìˆë‹µë‹ˆë‹¤.\nì½”ë“œë¥¼ ì‚´í´ë´…ì‹œë‹¤. ì´ë²ˆì—ëŠ” sensor_msgs/msg/LaserScanì´ ì‚¬ìš©ë˜ì—ˆìŠµë‹ˆë‹¤. import rclpy from rclpy.node import Node from sensor_msgs.msg import LaserScan ScanSubNode í´ë˜ìŠ¤ì˜ ìƒì„±ìì—ì„œëŠ” scan topicì˜ subscriberê°€ ìƒì„±ë©ë‹ˆë‹¤. class ScanSubNode(Node): def __init__(self): super().__init__(\u0026#39;scan_sub_node\u0026#39;) queue_size = 10 # Queue Size self.pose_subscriber = self.create_subscription( LaserScan, \u0026#39;scan\u0026#39;, self.sub_callback, queue_size ) create_subscriptionì€ 4ê°œì˜ ë§¤ê°œë³€ìˆ˜ë¥¼ ë°›ìœ¼ë©° ê°ê°ì— ëŒ€í•œ ì„¤ëª…ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.\nMessage Type : Topic í†µì‹ ì— ì‚¬ìš©ë  msg Type ì…ë‹ˆë‹¤. topic name : ë°ì´í„°ë¥¼ Subscribeí•  Topicì˜ ì´ë¦„ì„ ì§€ì •í•©ë‹ˆë‹¤. (ì´ ì´ë¦„ì„ ì˜ëª» ì„¤ì •í•˜ë©´ ì•„ë¬´ê²ƒë„ publishí•˜ê³  ìˆì§€ ì•ŠëŠ” topicì„ ë§ˆëƒ¥ ê¸°ë‹¤ë¦¬ê³  ìˆê²Œ ë˜ëŠ” ìƒí™©ì´ ë°œìƒí•  ê²ƒì…ë‹ˆë‹¤.) subscribe callback : ë°ì´í„°ê°€ ì „ë‹¬ë  ë•Œë§ˆë‹¤ ì‹¤í–‰ë˜ëŠ” callback í•¨ìˆ˜ë¡œ, ì „ë‹¬ëœ ë°ì´í„°ë¥¼ í†µí•´ ì‹¤í–‰í•  ì‘ì—…ì´ ì´ í•¨ìˆ˜ ì•ˆì— êµ¬í˜„ë©ë‹ˆë‹¤. queue_size : create_publisherë•Œì™€ ë§ˆì°¬ê°€ì§€ë¡œ, ëŒ€ê¸°ì—´ì˜ í¬ê¸°ë¼ê³  ì´í•´í•˜ì‹œë©´ ì¢‹ìŠµë‹ˆë‹¤. sub_callbackì˜ ì²«ë²ˆì¨° ë§¤ê°œë³€ìˆ˜ëŠ” í•­ìƒ topic message dataê°€ ë©ë‹ˆë‹¤. í•´ë‹¹ messageì—ì„œ ì›í•˜ëŠ” ë°ì´í„°ë§Œ ì¶”ì¶œí•œ ë‹¤ìŒ, loggerë¥¼ í†µí•´ ì½˜ì†” ì¶œë ¥ì„ ì§„í–‰í•©ë‹ˆë‹¤.\ndef sub_callback(self, msg): \u0026#34;\u0026#34;\u0026#34;Timer will run this function periodically.\u0026#34;\u0026#34;\u0026#34; self.get_logger().info(f\u0026#39; \\ \\nmsg.ranges[0] : {msg.ranges[0]} \\ \\nmsg.ranges[30] : {msg.ranges[30]} \\ \\nmsg.ranges[60] : {msg.ranges[60]} \\ \\nmsg.ranges[90] : {msg.ranges[90]} \\ \\nmsg.ranges[119] : {msg.ranges[119]} \\ \u0026#39;) example3 - parking ì´ë²ˆ ì˜ˆì‹œë¥¼ ì‹¤í–‰í•˜ê¸° ì „ì—, empty_world.launch.pyë¥¼ ìˆ˜ì •í•´ì•¼ í•©ë‹ˆë‹¤. # gazebo pkg_gazebo_ros = FindPackageShare(package=\u0026#39;gazebo_ros\u0026#39;).find(\u0026#39;gazebo_ros\u0026#39;) pkg_path = os.path.join(get_package_share_directory(\u0026#39;src_gazebo\u0026#39;)) # world_path = os.path.join(pkg_path, \u0026#39;worlds\u0026#39;, \u0026#39;empty_world.world\u0026#39;) world_path = os.path.join(pkg_path, \u0026#39;worlds\u0026#39;, \u0026#39;wall_world.world\u0026#39;) ë¬¼ì²´ì™€ ì¶©ëŒí•˜ê¸° ì „ê¹Œì§€ ë¡œë´‡ì„ ì›€ì§ì´ë‹¤ê°€ ì¼ì • ê±°ë¦¬ ë‚´ ë²½ì´ ê²€ì¶œë˜ë©´ ìë™ìœ¼ë¡œ ë©ˆì¶”ëŠ” ì˜ˆì‹œì…ë‹ˆë‹¤. # Terminal 1 $ ros2 launch src_gazebo empty_world.launch.py # Terminal 2 $ ros2 run py_topic_tutorial parking_node ... [INFO] [1672563255.067421128] [parking_node]: Distance from Front Object : 0.6280616521835327 [INFO] [1672563255.173734128] [parking_node]: Distance from Front Object : 0.5546504259109497 [INFO] [1672563255.281276729] [parking_node]: Distance from Front Object : 0.5124648809432983 [INFO] [1672563255.389067729] [parking_node]: ==== Parking Done!!! ==== ... ì´ ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ê¸° ìœ„í•´ì„œëŠ” Topic Publishì™€ Subscribeê°€ ëª¨ë‘ í•„ìš”í•©ë‹ˆë‹¤.\n/cmd_vel topic publish /scan topic subscribe â‡’ ë”°ë¼ì„œ, Nodeì˜ ìƒì„±ìì—ì„œë„ Publisherì™€ Subscriberë¥¼ ëª¨ë‘ ìƒì„±í•©ë‹ˆë‹¤.\nclass ParkingNode(Node): def __init__(self): super().__init__(\u0026#39;parking_node\u0026#39;) queue_size = 10 # Queue Size self.twist_publisher = self.create_publisher(Twist, \u0026#39;cmd_vel\u0026#39;, queue_size) self.scan_subscriber = self.create_subscription( LaserScan, \u0026#39;scan\u0026#39;, self.sub_callback, queue_size ) sub_callbackì—ì„œëŠ” ì „ë°© (msg.ranges[60]) ë¬¼ì²´ì™€ì˜ ê±°ë¦¬ë¥¼ íƒì§€í•˜ê³ , ì´ ê±°ë¦¬ê°€ 0.5m ì´í•˜ê°€ ë˜ë©´ ì •ì§€ topicì„ publish í•©ë‹ˆë‹¤. def sub_callback(self, msg): twist_msg = Twist() distance_forward = msg.ranges[60] if distance_forward \u0026gt; 0.5: self.get_logger().info(f\u0026#39;Distance from Front Object : {distance_forward}\u0026#39;) twist_msg.linear.x = 0.5 self.twist_publisher.publish(twist_msg) else: self.get_logger().info(\u0026#39;==== Parking Done!!! ====\\n\u0026#39;) twist_msg.linear.x = 0.0 self.twist_publisher.publish(twist_msg) CV 2 and ROS 2 Topicê³¼ ROS 2 Bagì„ ì‚¬ìš©í•œ ì˜ˆì‹œë¥¼ ì‹¤í–‰í•´ë³´ê³ ì í•©ë‹ˆë‹¤.\nì´ë²ˆ ì‹¤ìŠµì„ ìœ„í•´ ì œê°€ ë¯¸ë¦¬ ì¤€ë¹„í•œ ë°ì´í„°ì…‹ì„ ì œê³µë“œë¦¬ë‹ˆ, ê¸°ì–µí•˜ê¸° ì‰¬ìš´ ìœ„ì¹˜ì— ë‹¤ìš´ë°›ì•„ ì£¼ì„¸ìš”.\nğŸ“ quadrupped_train.zip\nWindows + WSL2 ìœ ì €ì˜ ê²½ìš° explorer.exe ëª…ë ¹ì–´ë¥¼ í†µí•´ íŒŒì¼ íƒìƒ‰ê¸°ë¥¼ ì—´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nì¤€ë¹„ëœ ì˜ˆì‹œë¥¼ ì‹¤í–‰í•´ë´…ì‹œë‹¤. # ì˜ˆì œ ì‹¤í–‰ ì¤€ë¹„ sudo apt install ros-foxy-rosbag2 cd ~/ros2_ws colcon build --packages-select py_cv_tutorial source install/local_setup.bash # í„°ë¯¸ë„ 1 â€“ ë°ì´í„° ìœ„ì¹˜ë¡œ ì´ë™í•˜ì—¬ ros2 bag ì‹¤í–‰ cd \u0026lt;ë°ì´í„°ë¥¼ ì €ì¥í•œ ìœ„ì¹˜\u0026gt; ros2 bag play quadrupped_train.bag_0.db3 # í„°ë¯¸ë„ 2 â€“ image_view ì‹¤í–‰ ros2 run rqt_image_view rqt_image_view ì‚¬ì§„ê³¼ ê°™ì´ ê¸°ì°¨ ì„ ë¡œ ëª¨ìŠµì´ ë³´ì¸ë‹¤ë©´ ì„±ê³µì…ë‹ˆë‹¤. í•´ë‹¹ ë°ì´í„°ì…‹ì€ ê¸°ì°¨ ì„ ë¡œì—ì„œ ì£¼í–‰í•˜ëŠ” 4ì¡± ë³´í–‰ ë¡œë´‡ìœ¼ë¡œë¶€í„° ì·¨ë“í•œ ê²ƒì…ë‹ˆë‹¤. ê¸°ì°¨ ì„ ë¡œëŠ” ì£¼ê¸°ì ìœ¼ë¡œ ê´€ë¦¬ê°€ í•„ìš”í•˜ë©°, ê¸¸ê³  ê¸´ ì„ ë¡œë¥¼ ë¡œë´‡ì´ ìë™ìœ¼ë¡œ ê²€ì‚¬í•´ì¤€ë‹¤ë©´ ì•„ì£¼ ìœ ìš©í•  ê²ƒì…ë‹ˆë‹¤. ì´ëŸ¬í•œ ìƒìƒì„ í•´ë³´ë©´ì„œ ì‹¤ìŠµì— ì„í•´ë´…ì‹œë‹¤.\nExample1 - CV Bridge ì´ë¯¸ì§€ë¥¼ ë‹¤ë£¨ê¸° ìœ„í•œ ì˜¤í”ˆì†ŒìŠ¤ ë¼ì´ë¸ŒëŸ¬ë¦¬ì¸ OpenCVë¥¼ ì‚¬ìš©í•´ë³´ë ¤ í•©ë‹ˆë‹¤. ì¤€ë¹„ëœ ì˜ˆì‹œì™€, ros2 bag íŒŒì¼ì„ ì‹¤í–‰í•˜ë©´ cv2.imshowë¥¼ í†µí•´ ì—°ì†ëœ ì´ë¯¸ì§€ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n# í„°ë¯¸ë„ 1 $ cd \u0026lt;bag íŒŒì¼ ìœ„ì¹˜\u0026gt; $ ros2 bag play quadruped_train/quadruped_train.bag_0.db3 [INFO] [1667077909.362223100] [rosbag2_storage]: Opened database \u0026#39;quadrupped_train/quadrupped_train.bag_0.db3\u0026#39; for READ_ONLY. # í„°ë¯¸ë„ 2 $ ros2 run py_cv_tutorial img_sub [INFO] [1667077909.613586300] [image_subscriber]: Receiving video frame [INFO] [1667077910.934147000] [image_subscriber]: Receiving video frame ... OpenCVì—ì„œëŠ” CV::Mat ì´ë¼ëŠ” íŠ¹ì • íƒ€ì…ì„ ì‚¬ìš©í•©ë‹ˆë‹¤. ì´ë¥¼ ROS 2ì˜ Topic Messageë¡œ ë³€í™˜í•˜ê¸° ìœ„í•´ì„œ CV Bridgeë¼ëŠ” ê²ƒì„ ì‚¬ìš©í•©ë‹ˆë‹¤. from cv_bridge import CvBridge # Package to convert between ROS and OpenCV Images import cv2 # OpenCV library class ImageSubscriber(Node): def __init__(self): # Used to convert between ROS and OpenCV images self.br = CvBridge() ... def listener_callback(self, data): ... # Convert ROS Image message to OpenCV image current_frame = self.br.imgmsg_to_cv2(data, \u0026#34;bgr8\u0026#34;) edge_frame = self.hough_transform(current_frame) imgmsg_to_cv2ë¥¼ í†µí•´ CV::Matìœ¼ë¡œ ë³€í™˜ëœ ì´ë¯¸ì§€ ë°ì´í„°ë¥¼ OpenCVì˜ ë‹¤ì–‘í•œ ê¸°ëŠ¥ë“¤ê³¼ í•¨ê»˜ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì½”ë“œì˜ imshow ë¶€ë¶„ì„ ë°”ê¿”ì„œ ì´ë¯¸ì§€ ì²˜ë¦¬ë¥¼ ì ìš©í•´ ë´…ì‹œë‹¤. ì§ì„ ì„ ê²€ì¶œí•˜ëŠ” ì•Œê³ ë¦¬ì¦˜ì´ë©°, ë§¤ê°œë³€ìˆ˜ì˜ ìµœì í™”ë¥¼ í†µí•´ ì„ ë¡œë¥¼ ì¸ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì§ì„  ê²€ì¶œì„ ìœ„í•´ ì‚¬ìš©ëœ OpenCV ê¸°ëŠ¥ë“¤ì€ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤. ë¡œì§ì„ ì—…ê·¸ë ˆì´ë“œí•˜ì—¬ ì—¬ëŸ¬ë¶„ë§Œì˜ ì„ ë¡œ ê²€ì¶œ ì•Œê³ ë¦¬ì¦˜ì„ ë§Œë“¤ì–´ ë³´ì„¸ìš”!\ncv2.GaussianBlur cv2.fillPoly / cv2.bitwise_and ROI ì„¤ì • cv2.HoughLinesP rosbag to img ì»´í“¨í„° ë¹„ì „ë§Œìœ¼ë¡œ ì™„ë²½í•œ ì„ ë¡œ ì¸ì‹ì„ êµ¬í˜„í•˜ê¸°ëŠ” ë„ˆë¬´ë‚˜ í˜ë“­ë‹ˆë‹¤. ë”¥ëŸ¬ë‹ì„ ì‚¬ìš©í•´ì„œ ì´ë¥¼ ê·¹ë³µí•  ìˆ˜ ìˆì„ ê²ƒì´ë©°, ë°ì´í„°ì…‹ì˜ ì œì‘ì„ ìœ„í•´ rosbag ë°ì´í„°ì—ì„œ ì´ë¯¸ì§€ë¥¼ ì¶”ì¶œí•˜ëŠ” ì˜ˆì‹œë¥¼ ì¤€ë¹„í•˜ì˜€ìŠµë‹ˆë‹¤.\n$ ros2 run py_cv_tutorial rosbag2_to_timedimg /home/kimsooyoung/djhrd_ws/quadrupped_train/quadrupped_train.bag_0.db3 saved: color_1666796292992515592.png saved: color_1666796293035428479.png saved: color_1666796293079139778.png saved: color_1666796293120768031.png ì˜ˆì œ ì‹¤í–‰ ì „ main í•¨ìˆ˜ì—ì„œ bag íŒŒì¼ì˜ ìœ„ì¹˜ë¥¼ ì—¬ëŸ¬ë¶„ì˜ ê²ƒìœ¼ë¡œ ìˆ˜ì •í•´ì•¼ í•©ë‹ˆë‹¤. def main(args=None): # Change below roots to your ros2 bag locations ROOT_DIR = \u0026#34;/home/kimsooyoung/djhrd_ws/quadrupped_train\u0026#34; FILENAME = \u0026#34;/quadrupped_train.bag_0.db3\u0026#34; DESCRIPTION = \u0026#34;color_\u0026#34; ì˜ˆì œ ì‹¤í–‰ í›„ ì‚¬ì§„ê³¼ ê°™ì´ ê¸°ì°¨ ìƒì„±ëœ ì´ë¯¸ì§€ë“¤ì´ ë³´ì¸ë‹¤ë©´ ì„±ê³µì…ë‹ˆë‹¤. "
},
{
	"uri": "/kr/ros2_basic_foxy/lecture6/",
	"title": "Lecture6 - ROS 2 Service and Examples",
	"tags": [],
	"description": "",
	"content": "ROS 2 Service ROS Serviceì˜ ê°œë…ì„ ë‹¤ì‹œ ë³µìŠµí•´ë´…ì‹œë‹¤.\nimage from : docs.ros.org Service ê°œë… ì •ë¦¬\nServiceë¥¼ ìš”ì²­í•˜ëŠ” ì£¼ì²´ë¥¼ Service Clientë¼ê³  í•˜ë©°, Service ìš”ì²­ ìì²´ë¥¼ Request, í˜¹ì€ Callì´ë¼ê³  í•©ë‹ˆë‹¤. Serviceë¥¼ ìš”ì²­ë°›ëŠ” ì£¼ì²´ë¥¼ Service Serverë¼ê³  í•˜ë©°, Service ServerëŠ” Requestì— ëŒ€í•œ ì‘ë‹µ, ì¦‰ Service Responseë¥¼ ë‹¤ì‹œ Service Clientì—ê²Œ íšŒë‹µí•©ë‹ˆë‹¤. Requestì™€ Responseë¥¼ ìœ„í•´ ì‚¬ìš©ë˜ëŠ” ë°ì´í„° íƒ€ì…ì€ srvë¼ê³  í•˜ë©° Requestì™€ Responseë¡œ ë‚˜ë‰©ë‹ˆë‹¤. Serviceì˜ ì¤‘ìš”í•œ íŠ¹ì§• í•œ ê°€ì§€ ì¶”ê°€í•˜ìë©´, í•˜ë‚˜ì˜ Service Serverì— ì—¬ëŸ¬ Clientê°€ request í•  ìˆ˜ ìˆì§€ë§Œ, ServerëŠ” ë™ì‹œì— ì—¬ëŸ¬ requestë¥¼ ì²˜ë¦¬í•˜ì§€ ëª»í•©ë‹ˆë‹¤.\nimage from : docs.ros.org ROS Service ì»¤ë©˜ë“œ ë¼ì¸ ì§€ë‚œ topic ì˜ˆì‹œì™€ ê°™ì´ ROS 1ì—ì„œ ROS 2ë¡œ ë„˜ì–´ì˜¤ë©´ì„œ ë³€ê²½ëœ ì»¤ë©˜ë“œ ë¼ì¸ë“¤ì„ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.\nrosservice list â‡’ ros2 service list ros2 service infoëŠ” ì—†ìœ¼ë©°, ros2 service typeìœ¼ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤. srvëŠ” ros2 interface showë¡œ ì¡°íšŒ ê°€ëŠ¥í•©ë‹ˆë‹¤. $ ros2 interface show turtlesim/srv/Spawn float32 x float32 y float32 theta string name # Optional. A unique name will be created and returned if this is empty --- string name ì„œë¹„ìŠ¤ íƒ€ì… ì¤‘ê°„ì— ë³´ì´ëŠ” - - - ë¶€ë¶„ì€ requestì™€ responseì˜ êµ¬ë¶„ìë¼ê³  ìƒê°í•˜ì‹œë©´ ë©ë‹ˆë‹¤.\nService Example - ğŸ“¸ KimChi Service ì´ë²ˆì— ë³´ì—¬ë“œë¦´ ROS 2 service ì˜ˆì‹œëŠ” ì‚¬ì§„ì„ ì°ëŠ” service serverì…ë‹ˆë‹¤.\nì˜ˆì‹œ ì‹¤í–‰ - rqtë¥¼ í†µí•´ service callì´ ì„±ê³µí•˜ë©´ í˜„ì¬ ì‹œê°„ì— í•´ë‹¹í•˜ëŠ” íŒŒì¼ì´ë¦„ìœ¼ë¡œ ë¡œë´‡ì´ ë°”ë¼ë³´ëŠ” ì‹œì•¼ì˜ ì¹´ë©”ë¼ ì´ë¯¸ì§€ê°€ PNG í˜•ì‹ìœ¼ë¡œ ì €ì¥ë©ë‹ˆë‹¤. # Terminal 1 - ì—¬ëŸ¬ë¶„ë“¤ë§Œì˜ worldë¥¼ ì‚¬ìš©í•˜ì‹œë©´ ë”ìš± ì¢‹ìŠµë‹ˆë‹¤. $ ros2 launch src_gazebo empty_world.launch.py # Terminal 2 $ colcon build --packages-select py_service_tutorial $ source install/local_setup.bash $ ros2 run py_service_tutorial take_picture_server [INFO] [turtle_circle_server]: Picture Taking Node Started [INFO] [turtle_circle_server]: KimChi~ [INFO] [turtle_circle_server]: Image saved in 1672569224.png # Terminal 3 - rqt ì‹¤í–‰ í›„ service caller ì‹¤í–‰ (plugins =\u0026gt; services =\u0026gt; service caller) $ rqt Service Callerì˜ ì‚¬ìš©ë²•ê³¼ ê²°ê³¼ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤. ì½”ë“œë¥¼ ì‚´í´ë³´ê¸° ì „ì—, ì´ë¥¼ ì–´ë–»ê²Œ êµ¬í˜„í•  ìˆ˜ ìˆì„ì§€ ê°™ì´ ìƒê°í•´ë´…ì‹œë‹¤.\nì‚¬ì§„ ì´¬ì˜ì„ í¬í•¨í•˜ëŠ” Service Server í•„ìš” ë¡œë´‡ ì „ë°© image dataì˜ Subscriber í•„ìš” ROSì˜ sensor_msgs/msg/Imageë¥¼ ì €ì¥ ê°€ëŠ¥í•œ í¬ë©§ìœ¼ë¡œ ë³€ê²½ í•„ìš” ë”°ë¼ì„œ, Nodeì˜ ìƒì„±ìëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì‘ì„±í•©ë‹ˆë‹¤.\nclass PictureNode(Node): def __init__(self): super().__init__(\u0026#39;turtle_circle_server\u0026#39;) self.server = self.create_service( SetBool, \u0026#39;take_picture\u0026#39;, self.take_picture_callback ) self.subscriber = self.create_subscription( Image, \u0026#39;logi_camera_sensor/image_raw\u0026#39;, self.sub_callback, 10 ) self.br = CvBridge() self.is_request = False ì´ë²ˆì— ì‚¬ìš©í•˜ëŠ” srvëŠ” example_interfaces/srv/SetBoolì´ë©°, Bool Typeì˜ requestì™€ String responseë¥¼ ê°–ê³  ìˆìŠµë‹ˆë‹¤. $ ros2 interface show example_interfaces/srv/SetBool # This is an example of a service to set a boolean value. # This can be used for testing but a semantically meaningful # one should be created to be built upon. bool data # e.g. for hardware enabling / disabling --- bool success # indicate successful run of triggered service string message # informational, e.g. for error messages service callì— ëŒ€í•œ callbackì…ë‹ˆë‹¤. is_requestë¥¼ ë°”ê¿”ì£¼ê¸°ë§Œ í•˜ëŠ”ë°, ì´ê²ƒì´ í•˜ëŠ” ì—­í• ì´ ë¬´ì—‡ì¼ì§€ ìƒê°í•´ë³´ì„¸ìš”. def take_picture_callback(self, request, response): if request.data is True: self.get_logger().info(\u0026#39;KimChi~\u0026#39;) self.is_request = True response.success = True response.message = \u0026#34;Successfully image written\u0026#34; return response ì •ë‹µì€ subscription callbackì—ì„œ ì°¾ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. subscribeëœ ì´ë¯¸ì§€ ë°ì´í„°ëŠ” is_requestê°€ Trueì¸ ìˆœê°„ì—ë§Œ ì‚¬ìš©ë©ë‹ˆë‹¤. CV Bridgeë¥¼ í†µí•´ ROS topicì„ OpenCV í¬ë§·ìœ¼ë¡œ ë°”ê¿€ ìˆ˜ ìˆìœ¼ë©°, imwriteë¥¼ í†µí•´ ì´ë¯¸ì§€ë¥¼ ì €ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. def sub_callback(self, data): if self.is_request: current_frame = self.br.imgmsg_to_cv2(data, \u0026#34;bgr8\u0026#34;) file_name = str(self.get_clock().now().to_msg().sec) + \u0026#39;.png\u0026#39; cv2.imwrite(file_name, current_frame) self.get_logger().info(f\u0026#39;Image saved in {file_name}\u0026#39;) self.is_request = False Gazeboì— ë‹¤ì–‘í•œ ë¬¼ì²´ë¥¼ ë°°ì¹˜ì‹œí‚¨ ë’¤ ì‚¬ì§„ì„ ì°ì–´ë³´ëŠ” ê²ƒë„ ì¢‹ì€ ì‹¤ìŠµì´ ë  ê²ƒì…ë‹ˆë‹¤. ì œê°€ ì¤€ë¹„í•œ datasetì„ ì‚¬ìš©í•˜ì—¬ ì—¬ëŸ¬ë¶„ë“¤ë§Œì˜ ì‹¤ìŠµë„ í•´ë³´ì„¸ìš”.\nğŸ“Â 3DGEMS.zip\nì œê³µë˜ëŠ” 3DGEMS í´ë”ë¥¼ ì••ì¶•í•´ì œí•œ ë’¤, ~/.gazebo/models í´ë”ì— ìœ„ì¹˜ì‹œí‚µë‹ˆë‹¤. í•´ë‹¹ ëª¨ë¸ë“¤ì˜ ì¶œì²˜ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤. (\u0026ldquo;The Effect of Color Space Selection on Detectability and Discriminability of Colored Objects.\u0026rdquo; arXiv preprint arXiv:1702.05421 (2017).)\nWSL2ë¥¼ ì‚¬ìš©í•˜ì‹œëŠ” ë¶„ë“¤ê»˜ì„œëŠ” í„°ë¯¸ë„ì—ì„œ explorer.exe . ë¥¼ ì…ë ¥í•˜ë©´ ìœˆë„ìš° íŒŒì¼ íƒìƒ‰ê¸°ë¥¼ ì‹¤í–‰ ê°€ëŠ¥í•©ë‹ˆë‹¤.\në‹¤ì‹œ í•œ ë²ˆ Gazeboë¥¼ ì‹¤í–‰ì‹œí‚¨ ë’¤ ìƒˆë¡œ ì¶”ê°€ëœ ëª¨ë¸ë“¤ì„ ì‚¬ìš©í•´ë´…ì‹œë‹¤. Custom Interfaceì™€ ì½”ë”© ê³¼ì œ - Turtle Jail ROS 2ì—ì„œ custom interfaceë¥¼ ë§Œë“¤ê¸° ìœ„í•´ì„œëŠ” C++ Packageì—ì„œ ì‘ì—…ì´ ì´ë£¨ì–´ì ¸ì•¼ í•©ë‹ˆë‹¤. C++ packageëŠ” build type ament_cmakeë¥¼ ì‚¬ìš©í•˜ëŠ” packageì˜€ìŠµë‹ˆë‹¤.\n$ ros2 pkg create --build-type ament_cmake \u0026lt;package-name\u0026gt; $ ros2 pkg create --build-type ament_cmake custom_interfaces í•´ë‹¹ íŒ¨í‚¤ì§€ ë‚´ action, msg, srv ë¼ëŠ” í´ë”ë¥¼ ë§Œë“¤ê³  í•´ë‹¹ í´ë” ì•ˆì— ë‚˜ë§Œì˜ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‘ì„±í•©ë‹ˆë‹¤. ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ê¸°ë³¸ ë°ì´í„° í˜•ì‹ë“¤ì€ ì´ ë§í¬ë¥¼ ì°¸ê³ í•©ë‹ˆë‹¤.\nì´ë²ˆì— ë§Œë“¤ì–´ë³¼ custom interfaceëŠ” ë‹¤ìŒ ê³¼ì œì™€ ì—°ê²°ë©ë‹ˆë‹¤. ìš°ì„  ì €ë¥¼ ë”°ë¼ì™€ ì£¼ì„¸ìš”.\nsrvë¼ëŠ” í´ë”ë¥¼ ë§Œë“¤ê³ , TurtleJail.srvë¼ëŠ” íŒŒì¼ì„ ìƒì„±í•˜ì—¬ ì•„ë˜ì™€ ê°™ì€ ë‚´ìš©ì„ ì‘ì„±í•©ë‹ˆë‹¤. float32 width float32 height --- bool success í•´ë‹¹ interfaceë¥¼ rclpy, rclcppì—ì„œ ì‚¬ìš© ê°€ëŠ¥í•˜ë„ë¡ í•´ë´…ì‹œë‹¤. ROS 2ëŠ” DDSì˜ IDL(Interface Description Language)ë¥¼ ì‚¬ìš©í•˜ì—¬ ë‹¤ì–‘í•œ ì–¸ì–´ì—ì„œ ì‚¬ìš© ê°€ëŠ¥í•œ ë°ì´í„° íƒ€ì…ì„ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nCMakeLists.txt ìˆ˜ì • find_package(rosidl_default_generators REQUIRED) rosidl_generate_interfaces(${PROJECT_NAME} \u0026#34;msg/Num.msg\u0026#34; \u0026#34;srv/AddThreeInts.srv\u0026#34; \u0026#34;srv/TurningControl.srv\u0026#34; \u0026#34;srv/TurtleJail.srv\u0026#34; \u0026#34;action/Fibonacci.action\u0026#34; \u0026#34;action/Maze.action\u0026#34; ) package.xml ìˆ˜ì • \u0026lt;build_depend\u0026gt;rosidl_default_generators\u0026lt;/build_depend\u0026gt; \u0026lt;exec_depend\u0026gt;rosidl_default_runtime\u0026lt;/exec_depend\u0026gt; \u0026lt;member_of_group\u0026gt;rosidl_interface_packages\u0026lt;/member_of_group\u0026gt; íŒ¨í‚¤ì§€ ë¹Œë“œ $ colcon build --packages-select custom_interfaces \u0026amp;\u0026amp; rosfoxy Starting \u0026gt;\u0026gt;\u0026gt; custom_interfaces Finished \u0026lt;\u0026lt;\u0026lt; custom_interfaces [0.62s] Summary: 1 package finished [0.84s] ì´ì œ ROS 2ì—ì„œ í•´ë‹¹ ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤ (ë‹¨, í•´ë‹¹ workspaceë¥¼ ë°”ë¼ë³´ê²Œ í•´ì•¼ í•©ë‹ˆë‹¤.) $ ros2 interface show custom_interfaces/srv/TurtleJail float32 width float32 height --- bool success custom interfaceì˜ ì‚¬ìš© ì‹œ íŒŒì´ì¬ íŒ¨í‚¤ì§€ì—ì„œëŠ” ë³„ë„ ì‘ì—… ì—†ì´ ì‚¬ìš© ê°€ëŠ¥í•˜ì§€ë§Œ C++ íŒ¨í‚¤ì§€ëŠ” ì½”ë”© ì‹œ CMakeLists.txtì˜ ìˆ˜ì •ì´ í•„ìš”í•©ë‹ˆë‹¤. ì´ëŠ” ë‹¤ì†Œ ë‚œì´ë„ê°€ ìˆì–´ ê°•ì˜ì—ì„œ ì‚´í”¼ì§€ëŠ” ì•Šê³  ë§í¬ë¥¼ ë‚¨ê²¨ë‘ê² ìŠµë‹ˆë‹¤.\nhttps://docs.ros.org/en/foxy/Tutorials/Beginner-Client-Libraries/Custom-ROS2-Interfaces.html#id10 Assignment - Turtle Jail topicê³¼ serviceì— ëŒ€í•´ì„œ ëª¨ë‘ ì‚´í´ë³¸ ì§€ê¸ˆ ìƒí™©ì—ì„œ ì—¬ëŸ¬ë¶„ë“¤ê»˜ ì½”ë”© ê³¼ì œë¥¼ ì œì‹œí•´ë³´ê³ ì í•©ë‹ˆë‹¤. ì´ë²ˆ ì½”ë”© ê³¼ì œì—ì„œ êµ¬í˜„í•´ì•¼ í•˜ëŠ” ìµœì¢… ê²°ê³¼ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.\nrqtë¥¼ í†µí•´ turtle_jail_size service callì„ í•˜ë©°, ê°ì˜¥ì˜ ì‚¬ì´ì¦ˆë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.\nê±°ë¶ì´ëŠ” ê°ì˜¥ì„ ë²—ì–´ë‚  ìˆ˜ ì—†ìœ¼ë©°, ê°ì˜¥ì„ ë²—ì–´ë‚˜ëŠ” ìˆœê°„ ì›ì ìœ¼ë¡œ ìˆœê°„ì´ë™í•©ë‹ˆë‹¤.\ní„°ë¯¸ë„ì—ì„œ ì‹¤í–‰í•˜ëŠ” ì ˆì°¨ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤. # Terminal 1 â€“ turtlesimì‹¤í–‰ ros2 run turtlesim turtlesim_node # Terminal 2 - turtle_teleop ì‹¤í–‰ ros2 run turtlesim turtle_teleop_key # Terminal 3 - ê³¼ì œ í”„ë¡œê·¸ë¨ ì‹¤í–‰ ros2 run py_service_tutorial turtle_jail [INFO] [turtle_jail_node]: === [Service Client : Ready to Call Service Request] === [INFO] [turtle_jail_node]: ==== [Service Server : Ready to receive Service Request] ==== # Terminal 4 - rqtì˜ service caller ì‹¤í–‰ í›„ /turtle_jail_sizeì—ê²Œ service call cd ~/ros2_ws source install/local_setup.bash rqt ì´ë²ˆ ì˜ˆì‹œëŠ” custom interfaceë¥¼ ì‚¬ìš©í•˜ë¯€ë¡œ local_setup.bashë¥¼ ê¼­ ì‹¤í–‰í•´ì£¼ì„¸ìš”!\nì´ ì˜ˆì‹œì—ì„œëŠ” topicê³¼ serviceë¥¼ ëª¨ë‘ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤. ì§€ê¸ˆê¹Œì§€ í•™ìŠµí•œ ë‚´ìš©ë“¤ì„ í™•ì¸í•´ë³¼ ìˆ˜ ìˆëŠ” ì¢‹ì€ ê¸°íšŒê°€ ë  ê²ƒì…ë‹ˆë‹¤.\níŒíŠ¸1 : turtlesimì˜ ì¢Œí‘œê³„ íŒíŠ¸ 2 : ê±°ë¶ì´ë¥¼ ìˆœê°„ì´ë™ì‹œí‚¤ê¸° ìœ„í•´ /turtle1/teleport_absolute serviceë¥¼ ì‚¬ìš©í•˜ì„¸ìš”. "
},
{
	"uri": "/kr/ros2_basic_foxy/lecture8/",
	"title": "Lecture8 - ROS 2 Action and Examples",
	"tags": [],
	"description": "",
	"content": " ì§€ê¸ˆê¹Œì§€ Topic, Serviceì— ëŒ€í•´ ëª¨ë‘ ë°°ì›Œë³´ì•˜ìŠµë‹ˆë‹¤. ë§ˆì§€ë§‰ í†µì‹  ë©”ì»¤ë‹ˆì¦˜ì¸ Actionì— ëŒ€í•´ì„œ ë°°ì›Œë´…ì‹œë‹¤.\nROS2 Action ê°œë… Actionì€ Serviceì™€ Topicì˜ íŠ¹ì„±ì„ ëª¨ë‘ ê°–ê³  ìˆìœ¼ë©°, ì‹¤ì œë¡œ ê°€ì¥ ëŠ¦ê²Œ íƒ„ìƒí•œ í†µì‹  ë©”ì»¤ë‹ˆì¦˜ì…ë‹ˆë‹¤. ì¼ì „ Serviceì˜ ë‹¨ì ì„ ìƒê¸°ì‹œì¼œë³´ë©´ì„œ Actionì˜ í•„ìš”ì„±ì— ëŒ€í•´ ì²´ê°í•´ë´…ì‹œë‹¤.\nServiceì˜ ì¤‘ìš”í•œ íŠ¹ì§• í•œ ê°€ì§€ ì¶”ê°€í•˜ìë©´, í•˜ë‚˜ì˜ Service Serverì— ì—¬ëŸ¬ Clientê°€ request í•  ìˆ˜ ìˆì§€ë§Œ, ServerëŠ” ë™ì‹œì— ì—¬ëŸ¬ requestë¥¼ ì²˜ë¦¬í•˜ì§€ ëª»í•©ë‹ˆë‹¤.\nimage from : docs.ros.org Actionì€ ë°”ë¡œ ì´ëŸ¬í•œ Serviceì˜ ë‹¨ì ì„ ê·¹ë³µí•˜ê¸° ìœ„í•´ íƒ„ìƒí•œ í†µì‹  ë©”ì»¤ë‹ˆì¦˜ì…ë‹ˆë‹¤.\nActionì˜ íŠ¹ì§• action clientëŠ” action serverê°€ Resultë¥¼ ë³´ë‚´ê¸° ì „ê¹Œì§€ ë§ˆëƒ¥ ê¸°ë‹¤ë¦¬ì§€ ì•Šê³ , ë‹¤ë¥¸ ì¼ì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. action clientëŠ” Result Responseë¥¼ ë°›ê¸° ì „ì—ë„ ì§€ì†ì ìœ¼ë¡œ Feedbackì„ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ, Feedbackì„ ë°›ê³  ìˆë‹¤ê°€, ë­”ê°€ ì˜ëª» ëŒì•„ê°€ê³  ìˆë‹¤ëŠ” ê²ƒì„ ê°ì§€í•œ ê²½ìš° cancelì„ í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. â‡’ í•˜ì§€ë§Œ, ì—¬ëŸ¬ requestë¥¼ ë™ì‹œì— ì‘ì—…í•˜ëŠ” ê²ƒì´ë‚˜, Feedback ì¤‘ì— topic subscribeì™€ ê°™ì€ ì‘ì—…ì€ ë³¸ì§ˆì ìœ¼ë¡œ ë¶ˆê°€í•©ë‹ˆë‹¤. ì´ì— ëŒ€í•œ í•´ê²° ë°©ë²•ë„ í›„ì— ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.\nimage from : https://docs.ros.org/en/foxy/Tutorials/Understanding-ROS2-Actions.html\nì‚¬ì§„ê³¼ ê°™ì´ Action Clientì™€ Serverê°€ ì£¼ê³ ë°›ëŠ” ë‚´ìš©ì€ í¬ê²Œ 5ê°€ì§€ê°€ ìˆìŠµë‹ˆë‹¤.\nClient â‡’ Server, Goal Request (service requestì™€ ìœ ì‚¬í•©ë‹ˆë‹¤.) server â‡’ client, Goal Response client â‡’ server, Result Request server â‡’ client, Feedback (topicê³¼ ìœ ì‚¬í•©ë‹ˆë‹¤.) server â‡’ client, Result Response ë§Œì•½ 4ë²ˆ ë„ì¤‘ cancelì´ ë°œìƒí•˜ë©´ Actionì€ ì¢…ë£Œë©ë‹ˆë‹¤.\nì´ë ‡ê²Œ Actionì€ Topic, Serviceì˜ íŠ¹ì§•ì„ ëª¨ë‘ ê°–ê³  ìˆìœ¼ë©° Cancelì´ë¼ëŠ” ì¶”ê°€ ê¸°ëŠ¥ê¹Œì§€ ê°–ì¶”ê³  ìˆëŠ” ë³µì¡í•œ í†µì‹  ë©”ì»¤ë‹ˆì¦˜ì…ë‹ˆë‹¤.\nAction ì»¤ë©˜ë“œ ë¼ì¸ íˆ´ turtlesimì„ ì‹¤í–‰ì‹œí‚¨ ë’¤, ì‹¤ìŠµì„ ì§„í–‰í•´ë´…ì‹œë‹¤. ros2 run turtlesim turtlesim_node ì‹¤í–‰ ì¤‘ì¸ actionì€ ë‹¤ìŒê³¼ ê°™ì´ ì¡°íšŒ ê°€ëŠ¥í•©ë‹ˆë‹¤. $ ros2 action list /turtle1/rotate_absolute íŠ¹ì • actionì˜ ì •ë³´ë¥¼ ì¡°íšŒí•˜ê¸° ìœ„í•´ ros2 action infoë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. $ ros2 action info /turtle1/rotate_absolute Action: /turtle1/rotate_absolute Action clients: 0 Action servers: 1 /turtlesim Actionì—ì„œ ì‚¬ìš©ë˜ëŠ” ë°ì´í„° íƒ€ì…ì€ actionì´ë©° ros2 interface showë¥¼ í†µí•´ ì¡°íšŒ ê°€ëŠ¥í•©ë‹ˆë‹¤. $ ros2 interface show turtlesim/action/RotateAbsolute # The desired heading in radians float32 theta --- # The angular displacement in radians to the starting position float32 delta --- # The remaining rotation in radians float32 remaining ì»¤ë©˜ë“œ ë¼ì¸ì—ì„œ ì†ì‰½ê²Œ Action Goalì„ ë³´ë‚¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. (feedback optionì„ ì œê³µí•©ë‹ˆë‹¤.) $ ros2 action send_goal \u0026lt;action_name\u0026gt; \u0026lt;action_type\u0026gt; \u0026lt;values\u0026gt; $ ros2 action send_goal /turtle1/rotate_absolute turtlesim/action/RotateAbsolute \u0026#34;{theta : 0.0}\u0026#34; --feedback 1657646954.088327 [0] ros2: using network interface enp7s0 (udp/166.104.135.89) selected arbitrarily from: enp7s0, docker0 Waiting for an action server to become available... Sending goal: theta: 0.0 Goal accepted with ID: d3ddca85948d4099a13dbeb8183e5ecc Result: delta: -0.7839995622634888 Goal finished with status: SUCCEEDED Action í”„ë¡œê·¸ë˜ë° Action Client ì‘ì„±í•˜ê¸° ì¼ì „ ê±°ë¶ì´ë¥¼ íšŒì „ì‹œí‚¤ëŠ” Action Serverì— ë§¤ì¹­ë˜ëŠ” Action Clientì…ë‹ˆë‹¤. ê±°ë¶ì´ê°€ ì›€ì§ì´ê¸° ì›í•˜ëŠ” ê°ë„ë¥¼ ì…ë ¥í•˜ë©´ í•´ë‹¹ ê°ë„ë¡ íšŒì „í•˜ê¸° ì‹œì‘í•©ë‹ˆë‹¤. $ colcon build --packages-select py_action_tutorial $ source install/local_setup.bash $ ros2 run py_action_tutorial turtle_turning_client [INFO] [1672647544.783857088] [turtle_rotate_client]: === Turtle Rotate Action Client Started ==== Enter Target Angle : 3.14 [INFO] [1672647549.097662572] [turtle_rotate_client]: Goal accepted [INFO] [1672647549.193173672] [turtle_rotate_client]: Received feedback: 0.051996707916259766 [WARN] [1672647549.226111271] [turtle_rotate_client]: Action Done !! Result: -0.12800025939941406 Action Clientë¥¼ ìƒì„±í•˜ê¸° ìœ„í•´ì„œëŠ” ActionClient íŒ¨í‚¤ì§€ë¥¼ ì¶”ê°€í•´ì•¼ í•©ë‹ˆë‹¤. import rclpy from rclpy.action import ActionClient from rclpy.node import Node ìš°ë¦¬ê°€ ì‚¬ìš©í•  turtlesim/action/RotateAbsoluteë¼ëŠ” actionì€ ë‹¤ìŒê³¼ ê°™ì€ êµ¬ì¡°ë¥¼ ê°–ìŠµë‹ˆë‹¤. # The desired heading in radians float32 theta --- # The angular displacement in radians to the starting position float32 delta --- # The remaining rotation in radians float32 remaining Action ClientëŠ” ActionClient ì¸ìŠ¤í„´ìŠ¤ì…ë‹ˆë‹¤. Service Clientì™€ ë§¤ìš° ë¹„ìŠ·í•˜ë‹¤ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤. # Create Action Client self.action_client = ActionClient(self, RotateAbsolute, \u0026#39;turtle1/rotate_absolute\u0026#39;) action type : Clientê°€ ì‚¬ìš©í•  action ë°ì´í„° íƒ€ì… action name : Action Server ì´ë¦„ wait_for_serverë¥¼ í†µí•´ Action Serverì˜ ì¡´ì¬ ì—¬ë¶€ë¥¼ ìš°ì„  í™•ì¸í•©ë‹ˆë‹¤. # Wait for server first if self.action_client.wait_for_server(10) is False: self.get_logger().error(\u0026#39;Server Not exists\u0026#39;) Action ClientëŠ” callbackì´ ë§ì•„ ê° í•¨ìˆ˜ì— ëŒ€í•œ ì‹¤í–‰ ì‹œì ì„ ì˜ ì•Œì•„ë‘ì…”ì•¼ í•©ë‹ˆë‹¤. # Send Goal then receive future self._send_goal_future = self.action_client.send_goal_async( goal_msg, feedback_callback=self.feedback_callback ) # Done callback Add self._send_goal_future.add_done_callback(self.goal_response_callback) send_goal : main í•¨ìˆ˜ì—ì„œ í˜¸ì¶œë˜ë©°, Goal requestë¥¼ ì§„í–‰í•©ë‹ˆë‹¤. feedback_callback : Serverë¡œë¶€í„°ì˜ Feedbackì´ ë“¤ì–´ì˜¬ ë•Œë§ˆë‹¤ ì‹¤í–‰ë˜ëŠ” Callback ì…ë‹ˆë‹¤. goal_response_callback : Goal Accpetì™€ Reject ì—¬ë¶€ë¥¼ í™•ì¸í•©ë‹ˆë‹¤. get_result_callback : ìµœì¢… resultì— ëŒ€í•œ Callbackìœ¼ë¡œ, Actionì˜ ì œì¼ ë§ˆì§€ë§‰ì— ì‹¤í–‰ë©ë‹ˆë‹¤. Actionì€ ë©”ì»¤ë‹ˆì¦˜ ìì²´ê°€ ì–´ë µê¸° ë•Œë¬¸ì— ì¼ë¶€ëŸ¬ ì‰¬ìš´ ì˜ˆì œë¥¼ ê°€ì ¸ì™”ìŠµë‹ˆë‹¤. ì½”ë“œì˜ ë¡œì§ì€ ê°„ë‹¨í•˜ë©°, Action Client API ìì²´ì— ì§‘ì¤‘í•˜ë©° ë”°ë¼ì™€ì£¼ì„¸ìš”.\ngoal_response_callback : goalì€ ê·¸ ìì²´ë¡œ Serviceë¼ê³  ë§í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ, goal ì™„ë£Œê¹Œì§€ ëŒ€ê¸°í•œ ë’¤ get_result_callbackì„ ì—°ë™í•©ë‹ˆë‹¤. def goal_response_callback(self, future): goal_handle = future.result() if not goal_handle.accepted: self.get_logger().info(\u0026#39;Goal rejected\u0026#39;) return self.get_logger().info(\u0026#39;Goal accepted\u0026#39;) # Add Result cb self._get_result_future = goal_handle.get_result_async() self._get_result_future.add_done_callback(self.get_result_callback) feedback_callbackì€ subscriberì˜ callbackê³¼ ìœ ì‚¬í•˜ê²Œ ë§¤ê°œë³€ìˆ˜ë¡œ feedback ë°ì´í„°ë¥¼ ë°›ìŠµë‹ˆë‹¤. get_result_callbackì€ goal_response_callbackê³¼ ìœ ì‚¬í•˜ê²Œ, futureë¥¼ ë§¤ê°œë³€ìˆ˜ë¡œ ë°›ìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ë”ì´ìƒ ì¶”ê°€í•  callbackì€ ì—†ê³  resultë¥¼ ë°›ìœ¼ë©´ì„œ ë§ˆë¬´ë¦¬ë©ë‹ˆë‹¤. def feedback_callback(self, feedback_msg): feedback = feedback_msg.feedback self.get_logger().info(f\u0026#39;Received feedback: {feedback.partial_sequence}\u0026#39;) def get_result_callback(self, future): result = future.result().result self.get_logger().warn(f\u0026#39;Action Done !! Result: {result.sequence}\u0026#39;) rclpy.shutdown() ì´ë²ˆ ì˜ˆì‹œì— êµ¬í˜„ë˜ì–´ ìˆì§€ëŠ” ì•Šì§€ë§Œ, goal_handleë¡œë¶€í„° cancel handlerë¥¼ ìƒì„±í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ì•„ë˜ ì½”ë“œë¥¼ ì˜ˆì‹œì— ì ìš©í•œ ë‹¤ìŒ, cancelë„ ì‹¤ìŠµí•´ë³´ì„¸ìš”. # Cancel the goal future = self.goal_handle.cancel_goal_async() future.add_done_callback(self.cancel_done) # Cancel the timer self.timer.cancel() def cancel_done(self, future): cancel_response = future.result() if len(cancel_response.goals_canceling) \u0026gt; 0: self.get_logger().info(\u0026#39;Goal successfully canceled\u0026#39;) else: self.get_logger().info(\u0026#39;Goal failed to cancel\u0026#39;) rclpy.shutdown() Action Server Example - Parking Master image from : ê¸°í˜¸ì¼ë³´\nì´ë²ˆì—ëŠ” ì¬ë¯¸ìˆëŠ” ì˜ˆì‹œë¥¼ ì¤€ë¹„í•´ ë³´ì•˜ìŠµë‹ˆë‹¤. ì•„ë˜ ëª…ë ¹ì–´ì„ ì…ë ¥í•´ ì£¼ì„¸ìš” # Terminal 1 ros2 launch src_gazebo wall_world.launch.py # Terminal 2 ros2 run py_action_tutorial parking_action_server [INFO] [1672654091.689062703] [parking_action_server]: Action Ready... [INFO] [1672654101.355609636] [parking_action_server]: Executing goal... [INFO] [1672654101.356973636] [parking_action_server]: Distance from forward obstacle : 100.0 ... # Terminal 3 ros2 action send_goal /src_parking custom_interfaces/action/Parking \u0026#34;start_flag: true\u0026#34; --feedback Waiting for an action server to become available... Sending goal: start_flag: true Goal accepted with ID: d7bcfec5a6e94bd4a349f4955cc495c8 Feedback: distance: 100.0 Feedback: distance: 1.7898634672164917 ... ë²½ì— ì¸ì ‘í•˜ì—¬ í°ìƒ‰ ìƒìë“¤ì´ ì£¼ì°¨ ê³µê°„ì„ ë°°ì •í•´ì¤„ ê²ƒì…ë‹ˆë‹¤. rqt_robot_steeringìœ¼ë¡œ ë¡œë´‡ì„ ì˜ ì œì–´í•˜ì—¬ ì£¼ì–´ì§„ ì£¼ì°¨ ê³µê°„ì— ì•Œë§ê²Œ ì£¼ì°¨ë¥¼ í•´ë³´ì„¸ìš”!\nFeedbackì„ í†µí•´ ë²½ê³¼ì˜ ê±°ë¦¬ë¥¼ í™•ì¸í•  ìˆ˜ ìˆìœ¼ë©°, ì´ ê±°ë¦¬ê°€ 0.5m ì´ë‚´ê°€ ë˜ë©´ ì£¼ì°¨ê°€ ì™„ë£Œë©ë‹ˆë‹¤. ì´ ì‹œì ì—ì„œ ì¢Œìš° ê³µê°„ì´ ì–¼ë§ˆê°€ ê· í˜•ì´ ë§ëŠ”ì§€ì— ë”°ë¼ ë‹¤ë¥¸ Resultë¥¼ ì–»ê²Œ ë©ë‹ˆë‹¤.\nì˜¬ë°”ë¥¸ ì£¼ì°¨ ì‹œ â‡’ Success! ì˜ëª»ëœ ì£¼ì°¨ ì‹œ â‡’ Fail Action Server í”„ë¡œê·¸ë˜ë° í”„ë¡œê·¸ë˜ë°ì„ ì‹œì‘í•˜ê¸° ì „, í•„ìš”í•œ í†µì‹  ë©”ì»¤ë‹ˆì¦˜ë“¤ì„ ì‚´í´ë´…ì‹œë‹¤.\nAction Server : Goalì„ ë°›ìœ¼ë©´, ì •ë©´ ë²½ê³¼ì˜ ê±°ë¦¬ë¥¼ feedbackìœ¼ë¡œ ì „ë‹¬í•©ë‹ˆë‹¤. ìµœì¢… ResultëŠ” Stringìœ¼ë¡œ ì„±ê³µ ì—¬ë¶€ë¥¼ ì•Œë ¤ì¤ë‹ˆë‹¤. LaserScan Sub : ì£¼ë³€ ë¬¼ì²´ì™€ì˜ ìŠ¤ìº”ëœ ê±°ë¦¬ë¥¼ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤. Feedback Callbackê³¼ Subscription Callback ë‘ í•¨ìˆ˜ë„ êµ¬í˜„í•´ì•¼ í•  ê²ƒì…ë‹ˆë‹¤.\nì´ë²ˆ ì˜ˆì‹œë¥¼ ìœ„í•´ custom interfaceë¥¼ ë§Œë“¤ì–´ ë³´ì•˜ìŠµë‹ˆë‹¤. Action ë°ì´í„° íƒ€ì…ì€ ì„¸ ì¢…ë¥˜ì˜ ë°ì´í„°ë¡œ ì´ë£¨ì–´ì ¸ ìˆìŠµë‹ˆë‹¤. #goal definition bool start_flag --- #result definition string message --- #feedback definition float32 distance ì´ì œ ì½”ë“œë¥¼ ì‚´í´ë´…ì‹œë‹¤. Action Serverë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” ActionServer íŒ¨í‚¤ì§€ë¥¼ import í•´ì•¼ í•©ë‹ˆë‹¤. import rclpy from rclpy.node import Node from rclpy.action import ActionServer ì½”ë“œ ë¶„ì„ ì „ ì‚´í´ë³¸ ë°”ì™€ ê°™ì´ ë‘ ì¢…ë¥˜ì˜ í•¸ë“¤ëŸ¬ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. class ParkingActionServer(Node): def __init__(self): super().__init__(\u0026#39;parking_action_server\u0026#39;) self.laser_sub = self.create_subscription( LaserScan, \u0026#39;scan\u0026#39;, self.sub_callback, 10 ) self.action_server = ActionServer( self, Parking, \u0026#39;src_parking\u0026#39;, self.execute_callback ) Action Serverì˜ Callbackì…ë‹ˆë‹¤. ì²« ì¸ìëŠ” goal handlerë¡œ feedback ì „ì†¡ì´ ì´ë¥¼ í†µí•´ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤. feedback msgì—ëŠ” ì •ë©´ ë¬¼ì²´ì™€ì˜ ê±°ë¦¬ê°€ ë‹´ê¹ë‹ˆë‹¤. def execute_callback(self, goal_handle): self.is_sub = True self.get_logger().info(\u0026#39;Executing goal...\u0026#39;) feedback_msg = Parking.Feedback() while self.f_obs_distance \u0026gt; 0.5: feedback_msg.distance = self.f_obs_distance goal_handle.publish_feedback(feedback_msg) self.get_logger().info( f\u0026#34;Distance from forward obstacle : {self.f_obs_distance}\u0026#34; ) time.sleep(1) while loopë¥¼ ë²—ì–´ë‚˜ê²Œ ë˜ë©´ goal succedë¥¼ ìˆ˜í–‰í•˜ê³ , Resultë¥¼ ë¦¬í„´í•©ë‹ˆë‹¤. í˜„ì¬ì˜ ë¡œì§ì€ ì¢Œìš° ë¬¼ì²´ì™€ì˜ ê±°ë¦¬ê°€ ê· ì¼í•  ë•Œ ì„±ê³µìœ¼ë¡œ íŒì •ì§“ìŠµë‹ˆë‹¤. goal_handle.succeed() result = Parking.Result() lr_diff = abs(self.r_obs_distance - self.l_obs_distance) print(lr_diff) if lr_diff \u0026lt; 0.15: result.message = \u0026#34;[Success!] Oh... Teach me how you did :0\u0026#34; else: result.message = \u0026#34;[Fail] Be careful, Poor Driver! \u0026#34; return result mainë¬¸ì—ì„œ íŠ¹ë³„í•œ ì ì„ ì°¾ì•„ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. MultiThreadedExecutorë¥¼ ì‚¬ìš©í•˜ê³  ìˆëŠ”ë°ìš”. ì´ê²ƒì´ í•˜ëŠ” ì—­í• ì´ ë¬´ì—‡ì¼ì§€ ì‹¤ìŠµì„ í†µí•´ ì‚´í´ë´…ì‹œë‹¤. try: parking_action_server = ParkingActionServer() # MultiThreadedExecutor ref # https://url.kr/x4kf2b executor = MultiThreadedExecutor() executor.add_node(parking_action_server) try: executor.spin() except KeyboardInterrupt: parking_action_server.get_logger().info(\u0026#39;Keyboard Interrupt (SIGINT)\u0026#39;) finally: executor.shutdown() parking_action_server.destroy_node() finally: rclpy.shutdown() main ë¬¸ì˜ ì£¼ì„ì„ í† ê¸€í•˜ê³ , sub_callbackì— ë””ë²„ê¹… ë©”ì„¸ì§€ë¥¼ ì‹¬ì€ ë‹¤ìŒ, ë‹¤ì‹œ ì˜ˆì œë¥¼ ì‹¤í–‰ ì‹œì¼œë´…ë‹ˆë‹¤. ì–´ë– í•œ ê²°ê³¼ë¥¼ ì–»ìœ¼ì…¨ë‚˜ìš”? def sub_callback(self, data): if self.is_sub: self.f_obs_distance = data.ranges[60] self.r_obs_distance = data.ranges[30] self.l_obs_distance = data.ranges[90] self.get_logger().info(\u0026#34;sub success\u0026#34;) ... # parking_action_server = ParkingActionServer() # rclpy.spin(parking_action_server) # parking_action_server.destroy_node() # rclpy.shutdown() í˜„ì¬ì˜ ì‹œìŠ¤í…œì€ ë‘ ì¢…ë¥˜ì˜ callbackì„ ê°–ê³  ìˆìŠµë‹ˆë‹¤. execute_callbackì´ ì‹¤í–‰ë˜ë©´ì„œ while loopë¡œ ì§„ì…í•˜ë©´, ìì›ì„ ì ìœ í•˜ì—¬ sub_callbackì´ ë™ì‘í•  ìˆ˜ ì—†ëŠ” êµ¬ì¡°ê°€ ë©ë‹ˆë‹¤. ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ROS 2ì—ì„œëŠ” rclpyë‹¨ì—ì„œ ë©€í‹° ìŠ¤ë ˆë”©ì„ êµ¬í˜„í•´ ë‘ì—ˆìŠµë‹ˆë‹¤.\nimage from : docs.ros.org ì´í›„ ì—¬ëŸ¬ê°€ì§€ êµ¬í˜„ì„ í•˜ë‹¤ ë³´ë©´ ì§€ê¸ˆì²˜ëŸ¼ ë‹¤ì¤‘ Subscribeë¥¼ í•´ì•¼í•˜ëŠ” ê²½ìš°ê°€ ë°˜ë“œì‹œ ìƒê¹ë‹ˆë‹¤. í˜¹ì€ í•˜ë‚˜ì˜ í”„ë¡œì„¸ìŠ¤ì—ì„œ ì—¬ëŸ¬ê°œì˜ Nodeë¥¼ ì‹¤í–‰ì‹œì¼œì•¼ í•˜ëŠ” ê²½ìš°ê°€ ë°œìƒí•©ë‹ˆë‹¤. ì´ë•Œ, Node Compositionê³¼ MultiThreadedExecutorë¥¼ ì ê·¹ ì‚¬ìš©í•´ë³´ì„¸ìš”!\nì°¸ê³ ìë£Œ\nhttps://docs.ros.org/en/foxy/Concepts/About-Executors.html "
},
{
	"uri": "/kr/ros_basic_noetic/lecture1/",
	"title": "Lecture1 - Introduction to ROS",
	"tags": [],
	"description": "",
	"content": "What is ROS? ROSë€, ë¡œë´‡ ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œì— ì‚¬ìš©ë˜ëŠ” ì¼ì¢…ì˜ í”„ë ˆì„ì›Œí¬ì…ë‹ˆë‹¤.\ní”„ë ˆì„ì›Œí¬ë¼ëŠ” ë§ì€, ROS ë‚˜ë¦„ëŒ€ë¡œì˜ ì‹¤í–‰ ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ê°–ê³  ìˆë‹¤ëŠ” ëœ»ì…ë‹ˆë‹¤.\nì‚¬ìš©ìì¸ ìš°ë¦¬ë“¤ì€, ì´ ì‹œë‚˜ë¦¬ì˜¤ë¥¼ ì‚¬ìš©í•˜ì—¬ ë¡œë´‡ì„ ë‹¤ë£¨ëŠ” ìš°ë¦¬ë§Œì˜ Applicationì„ ë§Œë“¤ê²Œ ë©ë‹ˆë‹¤.\nimage from : wikimedia ê·¸ëŸ°ë° ì™œ OSë¼ëŠ” ì´ë¦„ì´ ë¶™ê²Œ ë˜ì—ˆì„ê¹Œìš”?\në¡œë´‡ì„ ì‹¤í–‰í•˜ê¸° ìœ„í•´ì„œ, ìˆ˜ë§ì€ í”„ë¡œê·¸ë¨ë“¤ì´ ì‹¤í–‰ë˜ë©°, ROSëŠ” ì´ë“¤ ì‚¬ì´ì˜ ìš°ì„ ìˆœìœ„ì™€, í”„ë¡œê·¸ë¨ ì‚¬ì´ì˜ ë°ì´í„° íë¦„ì„ ì±…ì„ì§‘ë‹ˆë‹¤. ì´ ì‘ì—…ì€ ìŠ¤ì¼€ì¥´ë§ì´ë¼ê³  ë¶ˆë¦¬ë©°, ì´ëŸ¬í•œ ë™ì‘ì„ ìˆ˜í–‰í•˜ëŠ” ì‹œìŠ¤í…œì„ Operating Systemì´ë¼ê³  ë¶€ë¥´ê¸° ë•Œë¬¸ì— ROSë¼ëŠ” ì´ë¦„ì„ ê°–ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.\nimage from : tutorialspoint ë¡œë´‡ì„ ê°œë°œí•˜ê¸° ìœ„í•´ì„œ ì–´ë– í•œ í”„ë¡œê·¸ë¨ë“¤ì´ í•„ìš”í• ê¹Œìš”?\në¡œë´‡ì´ ìˆ˜í–‰í•˜ëŠ” ì„ë¬´ë“¤ì„ í¬ê²Œ 3ê°€ì§€ë¡œ ë¶„ë¥˜í•˜ë©´ ì¸ì§€, íŒë‹¨, ì œì–´ì˜ 3ê°€ì§€ë¡œ ë‚˜ë‰©ë‹ˆë‹¤.\nì¸ì§€ë€, ì„¼ì„œë“¤ì„ í†µí•œ ë¬¼ì²´ ì¸ì§€, ìê¸° ìì‹ ì˜ ìœ„ì¹˜ì™€ ë°©í–¥ ì¸ì§€, ìƒí™© ì¸ì§€ ë“± ë¡œë´‡ì—ê²Œ ìˆì–´ í™˜ê²½ê³¼ ìƒí˜¸ì‘ìš©í•˜ëŠ” ê³¼ì •ì— í•´ë‹¹í•©ë‹ˆë‹¤. íŒë‹¨ì´ë€, ì•/ë’¤ë¡œ ì›€ì§ì¼ì§€, ë¡œë´‡ íŒ”ì„ ë»—ì„ì§€ì™€ ê°™ì´ ì¸ì§€ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì–»ì€ ë°ì´í„°ë¥¼ í†µí•´ ê²°ì •ì„ ë‚´ë¦¬ëŠ” ì‘ì—…ë“¤ì´ í•´ë‹¹í•  ê²ƒì…ë‹ˆë‹¤. ì œì–´ëŠ” ë¡œë´‡ì—ì„œ ë¹¼ë†“ì„ ìˆ˜ ì—†ëŠ” ì˜ì—­ìœ¼ë¡œ, ë¡œë´‡ì€ ì‹¤ì œ ì„¸ìƒì—ì„œ ì›€ì§ì´ê¸° ë•Œë¬¸ì—, ì–¼ë§ˆë‚˜ ì›€ì§ì¼ì§€, ì–´ëŠì •ë„ì˜ ì†ë„ë¡œ í˜ì€ ì–¼ë§ˆë‚˜ ê°•í•˜ê²Œ ì¤„ì§€ ë“± ë¬¼ë¦¬ì ì¸ ì„ë¬´ë¥¼ í¬í•¨í•©ë‹ˆë‹¤. ì´ë ‡ê²Œ ë¡œë´‡ ì‹œìŠ¤í…œì€ ë¬´ì²™ ë³µì¡í•˜ë©°, ì´ë¿ë§Œ ì•„ë‹ˆë¼ íšŒë¡œ, ì„¤ê³„, ì¬ë£Œ, ì—ë„ˆì§€ ë“±ì„ ê³ ë ¤í•´ì•¼ í•˜ëŠ” ì™„ì„±í’ˆ ë¡œë´‡ì€ í˜„ëŒ€ ê³µí•™ì˜ ì§‘í•© ê·¸ ìì²´ë¼ê³  ë§í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nAbout this lecture ì´ ê°•ì˜ì—ì„œ ë‹¤ë£¨ê³ ì í•˜ëŠ” ë¶€ë¶„ì„ ì •í™•íˆí•˜ìë©´, ì¸ì§€ë„ íŒë‹¨ë„ ì œì–´ë„ ì•„ë‹Œ, ì‹œìŠ¤í…œì…ë‹ˆë‹¤.\në¡œë´‡ì˜ ì„¼ì„œ, êµ¬ë™ë¶€, ì•Œê³ ë¦¬ì¦˜ì´ ëª¨ë‘ ì¤€ë¹„ë˜ì–´ ìˆëŠ” ìƒí™©ì—ì„œ, ì´ë“¤ì„ í•˜ë‚˜ì˜ ì‹œìŠ¤í…œìœ¼ë¡œ ì—®ì–´ì£¼ëŠ” ì—­í• ì„ í•˜ëŠ” ê²ƒì´ ë°”ë¡œ ROSì…ë‹ˆë‹¤.\nimage from : ROS Industrial ROSë¼ëŠ” ì‹œìŠ¤í…œì˜ íŠ¹ì„±ìƒ ì •í•´ì§„ ì½”ë“œì™€ ë°©ë²•ìœ¼ë¡œ ì†Œí”„íŠ¸ì›¨ì–´ë¥¼ ê°œë°œí•´ì•¼ í•˜ë©°, ëŒ€ë¶€ë¶„ ROSë¥¼ ë‹¤ë£¨ëŠ” ê°•ì˜ë¼ê³  í•˜ë©´ ì´ë¥¼ ì§€ì¹­í•©ë‹ˆë‹¤. ìš°ë¦¬ê°€ ë°°ìš°ê³ ì í•˜ëŠ” ì£¼ëœ ë‚´ìš©ë„ ë°”ë¡œ ì´ ë¶€ë¶„ì´ë¼ê³  ë§í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nROS ê°œë… ROS ì»¤ë©˜ë“œ ë‹¤ë£¨ê¸° ROS í”„ë¡œê·¸ë˜ë° - Topic, Service, Action etcâ€¦ í•˜ì§€ë§Œ, ì—¬ê¸°ì„œ ê·¸ì¹˜ì§€ ì•Šê³ , ì €ëŠ” ì¢€ ë” ì‹¤ì§ˆì ì¸ ë¡œë´‡ ê°œë°œì„ ì´ì•¼ê¸°í•˜ê³ ì í•©ë‹ˆë‹¤.\në¦¬ëˆ…ìŠ¤ ì‹œìŠ¤í…œ Docker ì‚¬ìš©í•˜ê¸° ë¡œë´‡ ì‹œë®¬ë ˆì´ì…˜ ë¼ì´ë¸Œ ì½”ë”©ê³¼ ì—ëŸ¬ ë””ë²„ê¹… í•™êµë¥¼ ë‹¤ë‹ˆë‹¤ ë³´ë©´ ì•„ë¬´ë¦¬ ë§ì€ ì´ë¡ ì„ ê³µë¶€í•˜ê³  ë¨¸ë¦¿ì†ì— ì§‘ì–´ë„£ì–´ë„, ì‹œí—˜ì„ ì¹˜ê³  ë‚˜ë©´ ëª¨ë‘ ì‚¬ë¼ì§€ê³¤ í•©ë‹ˆë‹¤. ë¨¸ë¦¬ ì†ì— ë‚¨ëŠ” ê³µë¶€ë¥¼ ìœ„í•´ì„œëŠ” ì§ì ‘ ì½”ë”©ì„ í•´ë³´ê³ , í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•´ë´ì•¼ í•©ë‹ˆë‹¤.\nê°•ì˜ë¥¼ ìˆ˜ê°•í•˜ê¸° ìœ„í•´ í•„ìš”í•œ ì„ ìˆ˜ì§€ì‹ ë³¸ ê°•ì˜ëŠ” ìµœëŒ€í•œ ë§ì€ ë¶„ë“¤ì´ ëê¹Œì§€ ì´í•´í•  ìˆ˜ ìˆë„ë¡ ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ, ìµœëŒ€í•œ ì‰½ê³ , í”„ë¡œê·¸ë˜ë° ì‹¤ë ¥ì´ ì¶œì¤‘í•˜ì§€ ì•Šì•„ë„ ëª¨ë‘ ì™„ê°•í•  ìˆ˜ ìˆê²Œ ì§„í–‰í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ ê·¸ëŸ¼ì—ë„, ì•„ë˜ ì½”ë“œë¥¼ ì´í•´í•  ìˆ˜ ìˆì„ ì •ë„ì˜ ë°°ê²½ì§€ì‹ì€ í•„ìš”í•©ë‹ˆë‹¤. class OOPNode: def __init__(self): self.counter_ = 0 def hello_du(self, event=None): hello_du = f\u0026#34;hello du {rospy.get_time()}, counter: {self.counter_}\u0026#34; print(hello_du) self.counter_ += 1 def my_first_oop_node(): oop_node = OOPNode() if __name__ == \u0026#39;__main__\u0026#39;: try: my_first_oop_node() except Exception as e: print(e) íŒŒì´ì¬ í´ë˜ìŠ¤, ë©”ì†Œë“œì™€ ì¸ìŠ¤í„´ìŠ¤ for, while, if/else ë“± ê¸°ë³¸ ë¬¸ë²• ê°•ì˜ ì½”ë“œì™€ ê°•ì˜ ë…¸íŠ¸ ì‚¬ìš©ë²• ê°•ì˜ ë„ì¤‘ ì‚¬ìš©ë˜ëŠ” ì½”ë“œë“¤ì€ Github Repositoryë¥¼ í†µí•´ ë°°í¬ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ì½”ë“œ ê°•ì˜ ì¤‘ ì§€ì†í•´ì„œ ë§í¬ë¥¼ í•´ë“œë¦¬ë©°, ê°•ì˜ ì‹œì‘ ì „ ë¯¸ë¦¬ ì‚´í´ë³´ì‹œë©´ ë”ìš± ì¢‹ìŠµë‹ˆë‹¤.\nhttps://github.com/RB2023ROS/du2023-ros1 ê°•ì˜ ë…¸íŠ¸ì˜ ì£¼ì†ŒëŠ” https://rb2023ros.github.io/kr/ ì…ë‹ˆë‹¤. ì½”ë“œì™€ ëª…ë ¹ì–´ ë“± í•„ìš”í•œ ë¦¬ì†ŒìŠ¤ë¥¼ ëª¨ë‘ ë‹´ê³  ìˆìœ¼ë¯€ë¡œ ë³µì‚¬/ë¶™ì—¬ë„£ê¸°ë¥¼ í™œìš©í•˜ì—¬ ê°•ì˜ ì²­ì·¨ ì‹œê°„ì„ ì ˆì•½í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.\nì°¸ê³ ë¡œ í•´ë‹¹ ë…¸íŠ¸ëŠ” hugoë¥¼ ì‚¬ìš©í•˜ì—¬ ì œì‘ëœ ì›¹ í˜ì´ì§€ì„ì„ ë°í™ë‹ˆë‹¤.\n"
},
{
	"uri": "/kr/ros_basic_noetic/lecture2/",
	"title": "Lecture2 - Dev Env Setup",
	"tags": [],
	"description": "",
	"content": "Develpoment Environment Setup í”„ë¡œì íŠ¸ ê¸°ë°˜ì˜ ê°•ì˜ì¸ ë§Œí¼, ê°œë°œ í™˜ê²½ì´ êµ¬ì¶•ë˜ì§€ ì•Šìœ¼ë©´ ì•ìœ¼ë¡œì˜ ì‹¤ìŠµì„ ì§„í–‰í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë”°ë¼ì„œ ì´ë²ˆ íŒŒíŠ¸ì— ë§ì€ ì‹œê°„ì„ ë°°ì •í•˜ì˜€ê³ , í˜ë“¤ ìˆ˜ ìˆì§€ë§Œ ëê¹Œì§€ ë”°ë¼ì™€ì£¼ì‹œë©´ ê°ì‚¬í•©ë‹ˆë‹¤.\nì¤€ë¹„í•œ í™˜ê²½ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.\nUbuntu Linux ì„¤ì¹˜ì™€ ROS ì„¤ì • wsl2ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œ Windows ë‚´ ROS ì„¤ì • Docker ê¸°ë°˜ì˜ ROS ì„¤ì • 1,2,3 ìˆœì„œë¡œ ì¶”ì²œí•˜ëŠ” ì„¤ì •ì…ë‹ˆë‹¤. 1ë²ˆì„ ì§„í–‰í•˜ì‹œë‹¤ê°€ ë„ì €íˆ ëª»í•˜ê² ìœ¼ë©´ 2ë²ˆìœ¼ë¡œ, ê·¸ë˜ë„ ì•ˆë˜ë©´ 3ë²ˆìœ¼ë¡œ ì§„í–‰í•´ ì£¼ì‹œë©´ ë©ë‹ˆë‹¤.\nUbuntu Linux ì„¤ì¹˜ì™€ ROS ì„¤ì • Linuxë¼ê³  í•¨ì€ ì‚¬ì‹¤ OS ìì²´ë¼ê¸°ë³´ë‹¤ OSì˜ ê¸°ì´ˆê°€ ë˜ëŠ” ì½”ì–´ ì†Œí”„íŠ¸ì›¨ì–´ì— ê°€ê¹ìŠµë‹ˆë‹¤. ì´ ì½”ì–´ë¥¼ ì‚¬ìš©í•˜ì—¬ ì—¬ëŸ¬ ë²„ì „ì˜ OSê°€ ê°œë°œë˜ì—ˆìœ¼ë©° ì´ë¥¼ Liunx ë°°í¬íŒ ì´ë¼ê³  ì§€ì¹­í•©ë‹ˆë‹¤.\nUbuntu LinuxëŠ” ë¦¬ëˆ…ìŠ¤ ë°°í¬íŒ ì¤‘ ê°€ì¥ ë„ë¦¬ ì•Œë ¤ì§„ ë°°í¬íŒìœ¼ë¡œ, ì˜êµ­ì˜ SoftwareíšŒì‚¬ì¸ Canonicalê³¼ ìš°ë¶„íˆ¬ ì¬ë‹¨ì—ì„œ ê°œë°œ, ìœ ì§€ë³´ìˆ˜ ë° ë°°í¬ë¥¼ í•˜ê³  ìˆìŠµë‹ˆë‹¤.\nimage from : omdriod.com ê¸°ì¡´ì˜ Windows ë…¸íŠ¸ë¶ì„ ì‚¬ìš©í•˜ê³  ìˆì—ˆë‹¤ë©´ ë“€ì–¼ ë¶€íŒ…ì´ë¼ëŠ” ê²ƒì„ í†µí•´ Ubuntu + Windowsë¥¼ ëª¨ë‘ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤. ë“€ì–¼ ë¶€íŒ…ì— ë°©ë²•ì— ëŒ€í•´ì„  ì˜ ì„¤ëª…í•œ ì˜ìƒë“¤ì´ ë§ìœ¼ë¯€ë¡œ ë§í¬ë¡œ ëŒ€ì²´í•˜ê² ìŠµë‹ˆë‹¤.\nHow to Dual Boot Ubuntu 20.04 LTS and Windows 10 How to Dual Boot Ubuntu and Windows 11 Ubuntu 20.04 ì„¤ì¹˜ë¥¼ í™•ì¸ í•˜ì…¨ë‹¤ë©´ í„°ë¯¸ë„ì„ ì‹¤í–‰í•œ ë’¤ ì•„ë˜ì˜ ëª…ë ¹ì–´ë“¤ì„ ì‹¤í–‰í•©ë‹ˆë‹¤.\nterminator ì„¤ì¹˜ sudo apt update sudo apt install terminator -y terminator í™”ë©´ ë¶„í•  ì˜ˆì‹œ\nctrl + alt + t : í„°ë¯¸ë„ ì‹¤í–‰ ctrl + shift + e : ì„¸ë¡œ ë¶„í•  ctrl + shift + o : ê°€ë¡œ ë¶„í•  ctrl + shift + w : ì°½ ë‹«ê¸° alt + í™”ì‚´í‘œ : ì°½ ê°„ ì´ë™ ROS / ROS 2 í•œì¤„ ì„¤ì¹˜ cd ~/ sh -c \u0026#34;$(curl -fsSL https://raw.githubusercontent.com/kimsooyoung/ros_menu/main/scripts/setup.sh)\u0026#34; â€¦ Do you want to install ROS automatically? (y/N): y ë‹¤ìŒìœ¼ë¡œ, ì‹œë®¬ë ˆì´ì…˜ í”„ë¡œê·¸ë¨ì¸ Gazeboë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤. GazeboëŠ” ROSë¥¼ ê´€ë¦¬í•˜ëŠ” ì¡°ì§ì¸ OSRFì—ì„œ ê³µì‹ ì§€ì›í•˜ëŠ” ë¡œë´‡ ì‹œë®¬ë ˆì´í„°ì…ë‹ˆë‹¤.\nsudo sh -c \u0026#39;echo \u0026#34;deb http://packages.osrfoundation.org/gazebo/ubuntu-stable `lsb_release -cs` main\u0026#34; /etc/apt/sources.list.d/gazebo-stable.list\u0026#39; wget https://packages.osrfoundation.org/gazebo.key -O - | sudo apt-key add - sudo apt update sudo apt install gazebo11 libgazebo11-dev -y sudo apt install ros-foxy-gazebo-ros-pkgs -y ê·¸ë¦¼ì™€ ê°™ì´ Gazeboì˜ í™”ë©´ì´ ì–´ë‘¡ê³ , ê·¸ë¦¼ìê°€ ë³´ì´ì§€ ì•ŠëŠ”ë‹¤ë©´ í˜¸í™˜ë˜ëŠ” ê·¸ë˜í”½ ë“œë¼ì´ë²„ë¥¼ ì„¤ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤.\nsudo ubuntu-drivers autoinstall sudo reboot # ì¥ì°©ëœ ì¥ì¹˜ í™•ì¸ ubuntu-drivers devices ë§ˆì§€ë§‰ìœ¼ë¡œ, catkin build systemì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ ì•„ë˜ ì»¤ë©˜ë“œ ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤.\nsudo apt-get install python3-catkin-tools Windows + WSL2 ì„¤ì • WSL(Windows Subsystem for Linux) ì´ë€, ë¦¬ëˆ…ìŠ¤ìš© ìœˆë„ìš° í•˜ìœ„ ì‹œìŠ¤í…œì˜ ì•½ìë¡œ, ìœˆë„ìš° 10ì—ì„œ ë„¤ì´í‹°ë¸Œë¡œ ë¦¬ëˆ…ìŠ¤ ì‹¤í–‰ íŒŒì¼(ELF)ì„ ì‹¤í–‰í•˜ê¸° ìœ„í•œ í˜¸í™˜ì„± ê³„ì¸µì…ë‹ˆë‹¤.\nWindows10ë¶€í„° WSLì„ ì§€ì›í•˜ë©°, Windows 2004(20H1) versionë¶€í„° WLS2ë¥¼ ì§€ì›í•˜ê³  ìˆìŠµë‹ˆë‹¤.\nìµœì‹  Windows ì—…ë°ì´íŠ¸ ì ìš© (\u0026ldquo;Windows Key â‡’ ì—…ë°ì´íŠ¸\u0026quot;ë¡œ ì´ë™í•˜ì—¬ ìµœì‹  ì—…ë°ì´íŠ¸ë¥¼ ì ìš©í•©ë‹ˆë‹¤.) powershellì„ ê´€ë¦¬ì ê¶Œí•œìœ¼ë¡œ ì‹¤í–‰í•œ ë’¤, ì„¤ì¹˜ ë˜ì–´ìˆëŠ” WSL 2ë¥¼ í™œì„±í™”ì‹œí‚µë‹ˆë‹¤. \u0026gt; dism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart ë°°í¬ ì´ë¯¸ì§€ ì„œë¹„ìŠ¤ ë° ê´€ë¦¬ ë„êµ¬ ë²„ì „: 10.0.19041.844 ì´ë¯¸ì§€ ë²„ì „: 10.0.19043.1348 ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ë„ë¡ ì„¤ì •í•˜ëŠ” ì¤‘ [==========================100.0%==========================] ì‘ì—…ì„ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤. \u0026gt; dism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart ë°°í¬ ì´ë¯¸ì§€ ì„œë¹„ìŠ¤ ë° ê´€ë¦¬ ë„êµ¬ ë²„ì „: 10.0.19041.844 ì´ë¯¸ì§€ ë²„ì „: 10.0.19043.1348 ê¸°ëŠ¥ì„ ì‚¬ìš©í•˜ë„ë¡ ì„¤ì •í•˜ëŠ” ì¤‘ [==========================100.0%==========================] ì‘ì—…ì„ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤. MS Storeë¡œ ì´ë™í•˜ì—¬ windows terminalì„ ì„¤ì¹˜í•©ë‹ˆë‹¤. windows terminal í™”ë©´ ë¶„í•  ì˜ˆì‹œ alt + shift + - : ê°€ë¡œ ë¶„í•  alt + shift + + : ì„¸ë¡œ ë¶„í•  ctrl + shift + w : ì°½ ë‹«ê¸° alt + í™”ì‚´í‘œ : ì°½ ê°„ ì´ë™ ë‹¤ìŒ ë§í¬ë¥¼ í†µí•´ í”„ë¡œê·¸ë¨ì„ ë‹¤ìš´ë°›ê³  WSL 2 Linux ì»¤ë„ ì—…ë°ì´íŠ¸ë¥¼ ì„¤ì¹˜/ì§„í–‰ í›„ ì¬ë¶€íŒ…í•©ë‹ˆë‹¤.\nì»¤ë„ ì—…ë°ì´íŠ¸ë¥¼ ë§ˆì¹œ ë‹¤ìŒ, powershellì— ì•„ë˜ ì»¤ë§¨ë“œ ë¼ì¸ì„ ì…ë ¥í•˜ì—¬ WSL 2ë¥¼ ê¸°ë³¸ ì‚¬ìš©í•˜ë„ë¡ ì„¤ì •í•©ë‹ˆë‹¤.\n\u0026gt; wsl --set-default-version 2 WSL 2ì™€ì˜ ì£¼ìš” ì°¨ì´ì ì— ëŒ€í•œ ìì„¸í•œ ë‚´ìš©ì€ https://aka.ms/wsl2ë¥¼ ì°¸ì¡°í•˜ì„¸ìš” ì‘ì—…ì„ ì™„ë£Œí–ˆìŠµë‹ˆë‹¤. ì´ ì‹œì ì—ì„œ ë°œìƒí•  ìˆ˜ ìˆëŠ” ë¬¸ì œë“¤ì„ í•œì°¨ë¡€ ì‚´í´ë³´ê³  ê°€ê² ìŠµë‹ˆë‹¤.\nwsl --set-default-version 2 ì—ì„œ ì‘ì—… ì™„ë£Œ ë©”ì„¸ì§€ê°€ ë“±ì¥í•˜ì§€ ì•ŠëŠ” ê²½ìš° â‡’ ì œì¼ ì²˜ìŒ ëª…ë ¹ì–´ë¶€í„° ì œê°€ ë³´ì—¬ë“œë¦° ì˜ˆì‹œì™€ ë™ì¼í•œ ê²°ê³¼ë¥¼ ì–»ì—ˆëŠ”ì§€ í™•ì¸í•´ë³´ì„¸ìš”\nLinuxìš© Windows í•˜ìœ„ ì‹œìŠ¤í…œ ì„¤ì • ì—¬ë¶€ë„ í™•ì¸í•©ë‹ˆë‹¤.\nì§€ê¸ˆê¹Œì§€ ì§„í–‰í•œ ì‘ì—…ë“¤ì´ ì œëŒ€ë¡œ ì„¤ì • ë˜ì–´ìˆëŠ”ì§€ í™•ì¸í•´ë´…ì‹œë‹¤. \u0026gt; wsl -l -v NAME STATE VERSION * Ubuntu-20.04 Running 2 ë¬¸ì œê°€ ì—†ë‹¤ë©´ MS Store ì§„ì… í›„, Ubuntu 20.04 ë²„ì „ì„ ì„¤ì¹˜í•©ë‹ˆë‹¤. ì„¤ì¹˜ ì´í›„, ì—´ê¸° ë²„íŠ¼ì„ ëˆŒëŸ¬ ì´ˆê¸° ì‹¤í–‰ì„ í•˜ê³  username, passwordë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.\nì´ ì‹œì ì—ì„œ ë°œìƒí•  ìˆ˜ ìˆëŠ” ë¬¸ì œë“¤ë„ ë‹¤ì‹œ í•œì°¨ë¡€ ì‚´í´ë³´ê³  ê°€ê² ìŠµë‹ˆë‹¤.\nâ€˜The WSL Optional Component is not Enabled. Please Enable it and Try againâ€™ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ëŠ” ê²½ìš° \u0026gt; Enable-WindowsOptionalFeature -Online -FeatureName Microsoft-Windows-Subsystem-Linux 0x80370102 ì—ëŸ¬ê°€ ë°œìƒí•œ ê²½ìš° â‡’ ë¶€íŒ… BIOSì—ì„œ ê°€ìƒí™” ê¸°ëŠ¥ì„ í™œì„±í™”í•´ì¤ë‹ˆë‹¤.\n0xc03a001a ì—ëŸ¬ê°€ ë°œìƒí•œ ê²½ìš° â‡’ ë‹¤ìŒ ë¸”ë¡œê·¸ í¬ìŠ¤íŒ…ì„ ì°¸ê³ í•©ë‹ˆë‹¤.\nì„¤ì¹˜ ì´í›„ì—ëŠ” windows terminalì—ì„œ Ubuntu Terminalì„ ì„ íƒí•˜ì—¬ ì‹¤í–‰ ë° ì§„ì…ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. ì„¤ì • íƒ­ì„ í†µí•´ Ubuntu 20.04ë¥¼ ê¸°ë³¸ í„°ë¯¸ë„ë¡œ ì„¤ì • í›„ ì €ì¥í•©ì‹œë‹¤.\nROS / ROS 2ë¥¼ í•œì¤„ ì„¤ì¹˜í•©ë‹ˆë‹¤. $ cd ~/ $ sh -c \u0026#34;$(curl -fsSL https://raw.githubusercontent.com/kimsooyoung/ros_menu/main/scripts/setup.sh)\u0026#34; Installing Neuron Startup Menu... Cloning into \u0026#39;/home/kimsooyoung/ros_menu\u0026#39;... remote: Enumerating objects: 583, done. remote: Counting objects: 100% (290/290), done. remote: Compressing objects: 100% (193/193), done. remote: Total 583 (delta 179), reused 173 (delta 93), pack-reused 293 Receiving objects: 100% (583/583), 154.50 KiB | 3.22 MiB/s, done. Resolving deltas: 100% (340/340), done. Do you want to install ROS automatically? (y/N): y ì„¤ì¹˜ê°€ ì™„ë£Œë˜ì—ˆë‹¤ë©´, ì•ìœ¼ë¡œ í„°ë¯¸ë„ì„ ìƒˆë¡œ ë“±ì¥ì‹œí‚¬ ë•Œë§ˆë‹¤ ë‹¤ìŒê³¼ ê°™ì´ ì‚¬ìš©í•  ROS ë²„ì „ì„ ë¬»ê²Œ ë©ë‹ˆë‹¤. GUI ì¸í„°í˜ì´ìŠ¤ ì„¤ì • ë§í¬ë¥¼ í†µí•´ VcXsrvë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤. â‡’ https://sourceforge.net/projects/vcxsrv/ ì„¤ì¹˜ ì´í›„, XLaunchë¥¼ ì‹¤í–‰í•˜ê³ , ì‚¬ì§„ê³¼ ê°™ì€ ì„¤ì •ì„ ì§„í–‰í•©ë‹ˆë‹¤. ì•ìœ¼ë¡œ ì¬ë¶€íŒ… ì‹œë§ˆë‹¤ ì´ ì„¤ì •ì„ ë°˜ë³µí•´ì¤˜ì•¼ í•˜ë©°, ì¢…ì¢… Gazeboì˜ Memory Leakë¡œ ì¸í•´ í™”ë©´ì´ ì¢…ë£Œë˜ì§€ ì•ŠëŠ” ê²½ìš°ê°€ ìˆëŠ”ë°, ì´ëŸ° ê²½ìš° XLaunchë¥¼ ê°•ì œ ì¢…ë£Œí•´ì£¼ë©´ ë©ë‹ˆë‹¤.\nì„¤ì •ì´ ì˜ ë˜ì—ˆëŠ”ì§€ Gazeboë¥¼ ì‹¤í–‰í•´ë´…ì‹œë‹¤. export GAZEBO_IP=127.0.0.1 export DISPLAY=$(cat /etc/resolv.conf | grep nameserver | awk \u0026#39;{print $2}\u0026#39;):0 export LIBGL_ALWAYS_INDIRECT=0 gazebo ë§ˆì§€ë§‰ì…ë‹ˆë‹¤! ~/.bashrcë¥¼ ìˆ˜ì •í•©ë‹ˆë‹¤. echo \u0026#39;export GAZEBO_IP=127.0.0.1\u0026#39; \u0026gt;\u0026gt; ~/.bashrc echo \u0026#34;export DISPLAY=$(cat /etc/resolv.conf | grep nameserver | awk \u0026#39;{print $2}\u0026#39;):0 \u0026#34; \u0026gt;\u0026gt; ~/.bashrc echo \u0026#39;export LIBGL_ALWAYS_INDIRECT=0\u0026#39; \u0026gt;\u0026gt; ~/.bashrc ë°œìƒí•  ìˆ˜ ìˆëŠ” ì˜¤ë¥˜ ìƒí™©ë“¤ì„ ì‚´í´ë³´ê³  ê°€ê² ìŠµë‹ˆë‹¤.\ngazebo ì‹¤í–‰ ì‹œ symbol error $ gazebo gazebo: symbol lookup error: /usr/lib/x86_64-linux-gnu/libgazebo_common.so.9: undefined symbol: _ZN8ignition10fuel_tools12ClientConfig12SetUserAgentERKNSt7__cxx1112basic_stringIcSt11char_traitsIcESaIcEEE í•´ê²° ë°©ë²• â‡’ sudo apt upgrade -y libignition-math2\nGazebo ìì²´ê°€ ì‹¤í–‰ë˜ì§€ ì•ŠëŠ” ê²½ìš°\nPC ì¬ì‹œì‘ í›„ ë°±ì‹  í”„ë¡œê·¸ë¨ì„ ì¢…ë£Œì‹œí‚µë‹ˆë‹¤. ì œì–´íŒ â‡’ ì‹œìŠ¤í…œ ë° ë³´ì•ˆ â‡’ Windows ë°©í™”ë²½ â‡’ ê³ ê¸‰ ì„¤ì • â‡’ ì¸ë°”ìš´ë“œ ê·œì¹™ â‡’ VcXsrv ì‚¬ìš© í—ˆìš©\nGazeboëŠ” ì‹¤í–‰ë˜ì§€ë§Œ, Grid (ì‹¤ì„ )ì´ ë“±ì¥í•˜ì§€ ì•ŠëŠ” ê²½ìš°\nì•ˆíƒ€ê¹ì§€ë§Œ ê·¸ë˜í”½ ë“œë¼ì´ë²„ ë¬¸ì œì¼ ê°€ëŠ¥ì„±ì´ í½ë‹ˆë‹¤. (Window â‡’ ì—…ë°ì´íŠ¸ í™•ì¸ ì§„ì… í›„ ê°€ì¥ ìµœì‹  ë²„ì „ìœ¼ë¡œ ëª¨ë‘ ì—…ê·¸ë ˆì´ë“œë¥¼ ì‹¤í–‰í•´ì¤ë‹ˆë‹¤.)\nDocker ê¸°ë°˜ì˜ ROS ì„¤ì • ì´ì „ ì„¤ì¹˜ ëª¨ë‘ ì‹¤íŒ¨í•˜ì‹  ê²½ìš° ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ìµœí›„ì˜ ë°©ë²•ì´ì. MacOS ì‚¬ìš©ìë“¤ì„ ìœ„í•œ ì„¤ì •ì…ë‹ˆë‹¤.\ndocker desktop for windowsë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤. â‡’ https://docs.docker.com/desktop/windows/install/ # ì„¤ì¹˜ í™•ì¸ \u0026gt; docker ps CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES ì„¤ì¹˜ í™•ì¸ ì´í›„ ë™ì¼í•œ ëª…ë ¹ í”„ë¡¬í”„íŠ¸ì—ì„œ ë‹¤ìŒ ì»¤ë©˜ë“œ ë¼ì¸ì„ ì…ë ¥í•˜ì—¬ ë„ì»¤ ì´ë¯¸ì§€ë¥¼ ë‹¤ìš´ë°›ìŠµë‹ˆë‹¤. (í•´ë‹¹ docker imageëŠ” ê°•ì˜ì— í•„ìš”í•œ ì‘ì—…ì„ ì œê°€ ë¯¸ë¦¬ ì¤€ë¹„í•´ë‘” ê²ƒì…ë‹ˆë‹¤.) docker pull tge1375/du_ros_noetic:0.0.0 docker ì´ë¯¸ì§€ë¥¼ ìµœì´ˆ ì‹¤í–‰ ì‹œ, ë°©ê¸ˆì˜ ëª…ë ¹ í”„ë¡¬í”„íŠ¸ì—ì„œ ì•„ë˜ì™€ ê°™ì€ ì»¤ë©˜ë“œ ë¼ì¸ì„ ì…ë ¥í•´ ì£¼ì„¸ìš”. docker run -it -p 6080:80 --name ros_noetic tge1375/du_ros_noetic:0.0.0 ì…ë ¥ í›„ ë§í¬ë¥¼ í†µí•´ ë¡œì»¬ VNC ì„œë²„ë¡œ ì ‘ì†ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. ì²« ì‹¤í–‰ ì‹œ ë°©í™”ë²½ ë³´ì•ˆ ê²½ê³ ê°€ ë“±ì¥í•˜ë©°, ì´ë•Œ ë°˜ë“œì‹œ ì—‘ì„¸ìŠ¤ë¥¼ í—ˆìš©í•´ì¤ë‹ˆë‹¤. â‡’ (http://127.0.0.1:6080/) ìœ„ì™€ ê°™ì€ í™”ë©´ì´ ë“±ì¥í–ˆë‹¤ë©´ noVNCì— ì ‘ì†ì´ ì„±ê³µí•œ ê²ƒì…ë‹ˆë‹¤.\nìµœì´ˆ ëª…ë ¹ í”„ë¡¬í”„íŠ¸ì—ì„œ ì‹¤í–‰í•œ ì´í›„ ë‹¤ì‹œ ì‹¤í–‰ì‹œí‚¤ê³  ì‹¶ì€ ê²½ìš°, í˜¹ì€ ì¤‘ì§€ì‹œí‚¤ê³  ì‹¶ì€ ê²½ìš° docker desktopì„ ì‚¬ìš©í•˜ë©´ ë§¤ìš° í¸ë¦¬í•˜ê²Œ ì‘ì—…ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. VScode ì…‹ì—… VNCë‚´ì—ì„œì˜ ê°œë°œì€ ë§¤ìš° ë¶ˆí¸í•˜ê¸° ë•Œë¬¸ì—, VScodeë¥¼ í†µí•´ ì½”ë“œ ê°œë°œì„ í•˜ê³ ì í•©ë‹ˆë‹¤. ë‹¤ìŒê³¼ ê°™ì€ extensionë“¤ì„ ì„¤ì¹˜í•©ì‹œë‹¤.\nDocker Docker Explorer Remote Development ì„¤ì¹˜ ì´í›„, cmd + pë¥¼ í†µí•´ Remote-Containersë¥¼ ì…ë ¥í•˜ë©´, í˜„ì¬ ì‹¤í–‰ ì¤‘ì¸ ì»¨í…Œì´ë„ˆì˜ ëª©ë¡ì„ ì¡°íšŒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nì´ë“¤ ì¤‘ ì›í•˜ëŠ” ì»¨í…Œì´í„°ë¥¼ ì„ íƒí•˜ë©´, ìƒˆë¡œìš´ vscodeê°€ ìƒˆë¡œì´ ì‹¤í–‰ë˜ë©° ì‘ì—… í´ë”ë¥¼ ì„¤ì •í•˜ê²Œ ë©ë‹ˆë‹¤.\nLinux Commands ì…‹íŒ…í•œ í™˜ê²½ì€ ëª¨ë‘ ë¦¬ëˆ…ìŠ¤ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•©ë‹ˆë‹¤.\në•Œë¬¸ì— ìµœì†Œí•œì˜ ë¦¬ëˆ…ìŠ¤ ì»¤ë©˜ë“œ ì§€ì‹ì´ í•„ìš”í•˜ë©°, ì§šê³  ë„˜ì–´ê°€ê² ìŠµë‹ˆë‹¤.\në¦¬ëˆ…ìŠ¤ í•„ìˆ˜ ëª…ë ¹ì–´\ncd \u0026lt;ë””ë ‰í† ë¦¬\u0026gt; : í•´ë‹¹ ë””ë ‰í† ë¦¬ë¡œ ì´ë™í•˜ê¸° (ì ˆëŒ€ ê²½ë¡œì™€ ìƒëŒ€ ê²½ë¡œ, ../ ì™€ ~/) pwd : í˜„ì¬ ìœ„ì¹˜í•œ ì ˆëŒ€ ê²½ë¡œ ls : í˜„ì¬ ë””ë ‰í† ë¦¬ì— ìœ„ì¹˜í•˜ëŠ” ëª¨ë“  íŒŒì¼ë“¤ (ls -al ì˜µì…˜) touch \u0026lt;íŒŒì¼ ì´ë¦„\u0026gt; : í•´ë‹¹ ì´ë¦„ì„ ê°€ì§„ íŒŒì¼ ìƒì„± source : ì‰˜ ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰í•˜ê¸° (source ~/.bashrc) ê°•ì˜ë¥¼ ìœ„í•´ ì•Œì•„ì•¼ í•  ì¶”ê°€ ëª…ë ¹ì–´ë“¤\nsudo : root ê¶Œí•œìœ¼ë¡œ ì‹¤í–‰í•˜ê¸° apt install / remove / purge : ë¦¬ëˆ…ìŠ¤ ë°°í¬ íŒ¨í‚¤ì§€ ì„¤ì¹˜ apt update : aptì˜ ìƒíƒœë¥¼ ìµœì‹ í™”, ì„¤ì¹˜ëœ íŒ¨í‚¤ì§€ë“¤ì„ ìµœì‹ í™”í•˜ëŠ” ê³¼ì •ì„ í¬í•¨í•¨ ê·¸ ì™¸ ì•Œì•„ë‘ë©´ ì¢‹ì€ ê²ƒë“¤\ntop / htop : ë¦¬ëˆ…ìŠ¤ì˜ ì‘ì—… ê´€ë¦¬ì ps aux : ì‹¤í–‰ ì¤‘ì¸ í”„ë¡œì„¸ìŠ¤ ì¶œë ¥ (ps aux | grep ros) tee \u0026lt;íŒŒì¼ ì´ë¦„\u0026gt; : í„°ë¯¸ë„ ë¡œê·¸ë¥¼ ê¸°ë¡í•˜ê¸° xdg-open . : í˜„ì¬ ìœ„ì¹˜ì—ì„œ íŒŒì¼ íƒìƒ‰ê¸° ì—´ê¸° ê°•ì˜ ì¤‘ ì„¤ì •ëœ Alias ì„¤ëª…\neb : edit bashrcì˜ ì•½ìë¡œ ~/.bashrc íŒŒì¼ì„ geditì„ í†µí•´ ìˆ˜ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. sb : source bashrcì˜ ì•½ìë¡œ ìˆ˜ì •ëœ ~/.bashrc íŒŒì¼ì„ ë°˜ì˜ì‹œí‚µë‹ˆë‹¤. killg : ì‹¤í–‰ì¤‘ì¸ Gazeboê´€ë ¨ ëª¨ë“  í”„ë¡œê·¸ë¨ì„ ì¢…ë£Œì‹œí‚µë‹ˆë‹¤. ìœ ìš©í•œ í”„ë¡œê·¸ë¨ë“¤ ì„¤ì¹˜í•˜ê¸°\nsudo apt install gedit sudo apt install terminator -y ì½”ë“œ ì—ë””í„°ì™€ IDE ì¶”ì²œ\nVSCode - https://code.visualstudio.com/ PyCharm - https://www.jetbrains.com/ko-kr/pycharm/download CLion - https://www.jetbrains.com/ko-kr/clion/ ì°¸ê³ ìë£Œ\nhttps://www.youtube.com/watch?v=DW7l9LHdK5c https://www.lainyzine.com/ko/article/how-to-install-wsl2-and-use-linux-on-windows-10/ https://github.com/Tiryoh/docker-ros2-desktop-vnc https://89douner.tistory.com/123 "
},
{
	"uri": "/kr/ros_basic_noetic/lecture3/",
	"title": "Lecture3 - Core of ROS",
	"tags": [],
	"description": "",
	"content": " ì§€ë‚œ ì‹œê°„ ê°œë°œí™˜ê²½ ì„¸íŒ…ì„ ì˜ ì§„í–‰í•˜ì˜€ëŠ”ì§€ í™•ì¸ì„ í•´ë³´ë©´ì„œ ê°•ì˜ë¥¼ ì‹œì‘í•´ë³´ê² ìŠµë‹ˆë‹¤.\ní„°ë¯¸ë„ í”„ë¡œê·¸ë¨ì„ ì‹¤í–‰í•œ ë’¤, gazeboë¥¼ ì‹¤í–‰í•´ ë´…ì‹œë‹¤.\ngazebo ìœ„ ì‚¬ì§„ê³¼ ê°™ì€ í™”ë©´ì´ ë‚˜ì˜¤ì§€ ì•Šì•˜ë‹¤ë©´ ì„¤ì¹˜ê°€ ì œëŒ€ë¡œ ë˜ì§€ ì•Šì€ ê²ƒì…ë‹ˆë‹¤.\në‹¤ìŒìœ¼ë¡œ, ROS ì„¤ì¹˜ëŠ” ì˜ ë˜ì—ˆëŠ”ì§€ë„ í™•ì¸í•´ë´…ì‹œë‹¤.\n# Terminal 1 roscore # Terminal 2 rosrun rospy_tutorials talker ëª¨ë“  í™•ì¸ì´ ëë‚¬ë‹¤ë©´, ì˜ˆì œ í”„ë¡œê·¸ë¨ì„ ì‹¤í–‰ì‹œì¼œë³´ê² ìŠµë‹ˆë‹¤.\nHusky Gazebo ì˜ˆì œ íŒ¨í‚¤ì§€ ì„¤ì¹˜ sudo apt-get update sudo apt-get install ros-noetic-husky-desktop sudo apt-get install ros-noetic-husky-simulator ì˜ˆì œ í”„ë¡œê·¸ë¨ ì‹¤í–‰ # Terminal 1 roslaunch husky_gazebo husky_empty_world.launch # Terminal 2 roslaunch husky_viz view_robot.launch # Terminal 3 rosrun teleop_twist_keyboard teleop_twist_keyboard.py cmd_vel:=/husky_velocity_controller/cmd_vel Terminal 1ì—ì„œ ë°œìƒí•˜ëŠ” ì•„ë˜ ì˜¤ë¥˜ëŠ” ë¬´ì‹œí•´ë„ ì¢‹ìŠµë‹ˆë‹¤.\nëª¨ë“  ì‹¤í–‰ì´ ì •ìƒ ë™ì‘í•˜ì˜€ë‹¤ë©´, Terminal 3ì—ì„œ í‚¤ë³´ë“œë¥¼ í†µí•´ Huskyë¥¼ ì œì–´í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¡œë´‡ì´ ì›€ì§ì„ì— ë”°ë¼ ë‘ë²ˆì§¸ í„°ë¯¸ë„ ê²°ê³¼ì˜€ë˜ Rvizì— ì•„ë˜ì™€ ê°™ì€ ë³€í™”ê°€ ìƒê¹ë‹ˆë‹¤. ë‹¤ìŒìœ¼ë¡œ, ìƒˆë¡œìš´ í„°ë¯¸ë„ì—ì„œ ì•„ë˜ ì»¤ë©˜ë“œ ë¼ì¸ì„ ì‹¤í–‰ì‹œì¼œ ë´…ì‹œë‹¤. rosrun rqt_graph rqt_graph ìœ„ ê·¸ë¦¼ì€ ë°©ê¸ˆ ì „ ì‹¤í–‰í•œ ì˜ˆì œ ë‚´ë¶€ì ìœ¼ë¡œ ì–´ë– í•œ ë™ì‘ë“¤ì´ ì´ë£¨ì–´ì§€ê³  ìˆì—ˆëŠ”ì§€ë¥¼ ë³´ì—¬ì£¼ëŠ” ê²ƒìœ¼ë¡œ, ê°•ì˜ë¥¼ ë§ˆì¹  ë•Œë©´ ì—¬ëŸ¬ë¶„ë“¤ì€ ìœ„ ê·¸ë¦¼ì´ ì–´ë– í•œ ì˜ë¯¸ë¥¼ ê°–ëŠ”ì§€ ëª¨ë‘ ì´í•´í•˜ì‹¤ ìˆ˜ ìˆì„ ê²ƒì…ë‹ˆë‹¤.\në‹¤ìŒìœ¼ë¡œ, í„°ë¯¸ë„ì„ ìƒˆë¡œ ì‹¤í–‰ì‹œì¼œ rosnode listì™€ rostopic listë¥¼ ì‹¤í–‰ì‹œì¼œ ë´…ì‹œë‹¤.\nrosnode list $ rosnode list /base_controller_spawner /ekf_localization /gazebo /gazebo_gui /joy_teleop/joy_node /joy_teleop/teleop_twist_joy /robot_state_publisher /rosout /teleop_twist_keyboard /twist_marker_server /twist_mux rostopic list $ rostopic list /clock /cmd_vel /diagnostics /e_stop /gazebo/link_states /gazebo/model_states /gazebo/parameter_descriptions /gazebo/parameter_updates /gazebo/performance_metrics /gazebo/set_link_state /gazebo/set_model_state ... ì•ìœ¼ë¡œì˜ ê°•ì˜ë“¤ì—ì„œ, ìœ„ ëª…ë ¹ì–´ë“¤ì´ ì–´ë– í•œ ì˜ë¯¸ë¥¼ ê°–ëŠ”ì§€ í•˜ë‚˜í•˜ë‚˜ì”© í•¨ê»˜ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.\nROS Node ROSëŠ” ê° í”„ë¡œì„¸ìŠ¤ë“¤ì„ Nodeë¼ëŠ” ë‹¨ìœ„ë¡œ ê´€ë¦¬í•©ë‹ˆë‹¤.\në¡œë´‡ì„ ì›€ì§ì´ëŠ” Node, ì„¼ì„œì™€ í†µì‹ í•˜ëŠ” Node, ì‹œê°í™” Node ë“± ë‹¤ì–‘í•œ Nodeë“¤ì´ ì–½í˜€ ë¡œë´‡ ì‹œìŠ¤í…œì„ êµ¬ì„±í•˜ê²Œ ë©ë‹ˆë‹¤. Nodeë“¤ ì‚¬ì´ì—ëŠ” ë°ì´í„°ì˜ ì†¡ìˆ˜ì‹ ì´ í•„ìš”í•©ë‹ˆë‹¤. ì´ë¥¼ ë‹´ë‹¹í•˜ëŠ” ROSì˜ í†µì‹  ë©”ì»¤ë‹ˆì¦˜ë“¤ì´ ìˆìœ¼ë©° ê°ê¸° ë‹¤ë¥¸ íŠ¹ì„±ì„ ê°–ê³  ìˆìŠµë‹ˆë‹¤. Nodeë“¤ë¼ë¦¬ ë°ì´í„°ë¥¼ ì£¼ê³ ë°›ê¸° ìœ„í•´ì„œëŠ” ì–´ë–¤ ë…¸ë“œê°€ ì¡´ì¬í•˜ëŠ”ì§€, idëŠ” ëª‡ë²ˆì¸ì§€ ë“±ì˜ ì •ë³´ê°€ ê³µìœ ë˜ì–´ì•¼ í•  ê²ƒì…ë‹ˆë‹¤. ì•„ë˜ ê·¸ë¦¼ì˜ ROS Masterê°€ ì´ë¥¼ ê´€ë¦¬í•´ì£¼ëŠ” ê²ƒì´ë¼ê³  ì´í•´í•˜ì‹œë©´ ë©ë‹ˆë‹¤. image from : clearpathrobotics ê·¸ë ‡ë‹¤ë©´, ë°©ê¸ˆ ìš°ë¦¬ê°€ ì‹¤í–‰í•œ ì˜ˆì‹œì—ì„œë„ ROS Masterì™€ Nodeë“¤ì´ ì‹¤í–‰ë˜ì—ˆê² êµ°ìš”!\nì‹¤í–‰ë˜ëŠ” Nodeë¥¼ í™•ì¸í•˜ëŠ” ë°©ë²•ì€ í¬ê²Œ ë‘ ê°€ì§€ê°€ ìˆìŠµë‹ˆë‹¤.\nrosnode command $ rosnode list /base_controller_spawner /ekf_localization /gazebo /gazebo_gui /joy_teleop/joy_node /joy_teleop/teleop_twist_joy /robot_state_publisher /rosout /teleop_twist_keyboard /twist_marker_server /twist_mux rqt_graph rosrun rqt_graph rqt_graph rqt graphë¥¼ ì‚´í´ë³´ë©´, ë™ê·¸ë€ Nodeì™€ Nodeë“¤ ì‚¬ì´ì˜ ë°ì´í„° ì†¡ìˆ˜ì‹ ì´ í™”ì‚´í‘œë¡œ í‘œí˜„ëœ ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤. í‚¤ë³´ë“œë¥¼ í†µí•´ ì œì–´ ë°ì´í„°ë¥¼ ì†¡ì‹ í•˜ëŠ” teleop_twist_keyboardëŠ” gazebo nodeë¡œ ë°ì´í„°ë¥¼ ë³´ë‚´ê³  ìˆìœ¼ë©°, ë”°ë¼ì„œ gazeboëŠ” ì´ ë°ì´í„°ë¥¼ í†µí•´ ì‹¤ì œ ë¡œë´‡ì„ ì›€ì§ì´ê²Œ ë˜ëŠ” ê²ƒì…ë‹ˆë‹¤.\níŠ¹ì • Nodeì— ëŒ€í•´ì„œ ë” ìì„¸í•œ ì •ë³´ë¥¼ ì–»ê³  ì‹¶ë‹¤ë©´, rosnode info ì»¤ë§¨ë“œë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. $ rosnode info /base_controller_spawner -------------------------------------------------------------------------------- Node [/base_controller_spawner] Publications: * /rosout [rosgraph_msgs/Log] Subscriptions: * /clock [rosgraph_msgs/Clock] Services: * /base_controller_spawner/get_loggers * /base_controller_spawner/set_logger_level contacting node http://192.168.55.236:33811/ ... Pid: 63764 Connections: * topic: /rosout * to: /rosout * direction: outbound (43329 - 192.168.55.236:34456) [10] * transport: TCPROS * topic: /clock * to: /gazebo (http://192.168.55.236:33853/) * direction: inbound * transport: TCPROS ì´ì „ ì˜ˆì œë“¤ì€ ì¼ë‹¨ ì¢…ë£Œì‹œí‚¨ ë’¤, ê°„ë‹¨í•œ ìƒˆë¡œìš´ ì˜ˆì‹œë¥¼ ì‹¤í–‰í•´ë´…ì‹œë‹¤.\n# Terminal 1 roscore # Terminal 2 rosrun roscpp_tutorials talker # Terminal 3 rosrun roscpp_tutorials listener # Terminal 4 rqt_graph rqt_graphë¥¼ ë³´ë©´ talker â‡’ listenerë¡œ ë°ì´í„°ê°€ ì „ì†¡ë˜ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nì´ì œ, rqt_graphë¥¼ ë³´ëŠ” ê²ƒì€ ìµìˆ™í•´ì¡Œì§€ìš”?\nì²«ë²ˆì§¸ Gazebo ì˜ˆì‹œì™€ ë‹¤ë¥¸ ì ìœ¼ë¡œ roscoreë¼ëŠ” ê²ƒì„ ì‹¤í–‰í•´ì£¼ì—ˆìŠµë‹ˆë‹¤.\nroscoreëŠ” ROS Masterë¥¼ ì‹¤í–‰ì‹œí‚¤ëŠ” ëª…ë ¹ì–´ë¡œ ëª¨ë“  ROS Nodeë“¤ì€ Masterì— ì˜í•´ ê´€ë¦¬ë˜ê¸° ë•Œë¬¸ì— roscoreë¥¼ í†µí•´ ì‹¤í–‰ì‹œí‚¤ê±°ë‚˜, roslaunchë¥¼ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤. ROS Masterê°€ ì‹¤í–‰ë˜ê³  ìˆì§€ ì•Šë‹¤ë©´, ì•„ë˜ì™€ ê°™ì´ ì˜¤ë¥˜ê°€ ë°œìƒí•©ë‹ˆë‹¤. ETH Super Mega Bot \u0026amp; ROS Workspace ROSëŠ” catkinì´ë¼ëŠ” ë¹Œë“œ ì‹œìŠ¤í…œì„ ì‚¬ìš©í•©ë‹ˆë‹¤. ê¸°ì¡´ c/c++ cross-platform ê°œë°œì„ ê²½í—˜í•˜ì…¨ë‹¤ë©´ cmakeì— ìµìˆ™í•˜ì‹¤í…ë°, ì´ì™€ ë§¤ìš° ë¹„ìŠ·í•©ë‹ˆë‹¤. catkinì„ í†µí•´ ì‹¤í–‰ ê°€ëŠ¥í•œ í”„ë¡œê·¸ë¨ (C/C++ì˜ ë¹Œë“œ), ë¼ì´ë¸ŒëŸ¬ë¦¬, ì¸í„°í˜ì´ìŠ¤ë“¤ì„ ë§Œë“¤ ìˆ˜ ìˆìœ¼ë©°, catkin ì‹œìŠ¤í…œì„ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” workspaceë¼ëŠ” íŠ¹ë³„í•œ í´ë”ê°€ í•„ìš”í•©ë‹ˆë‹¤. ROS ê°œë°œì„ í•˜ë‹¤ ë³´ë©´ ì—¬ëŸ¬ í”„ë¡œì íŠ¸ë¥¼ ë™ì‹œì— ì§„í–‰í•˜ëŠ” ê²½ìš°ê°€ ìƒê¹ë‹ˆë‹¤. ìƒˆë¡œìš´ ì‘ì—…ì€ ìƒˆë¡œìš´ í´ë”ë¥¼ ë§Œë“¤ì–´ ì‘ì—…í•˜ë“¯ì´ ROS ì—ì„œë„ ìƒˆë¡œìš´ í”„ë¡œì íŠ¸ëŠ” ìƒˆë¡œìš´ WorkSpaceì—ì„œ ì‘ì—…ì„ ìˆ˜í–‰í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ì…ë‹ˆë‹¤. ìƒˆë¡œìš´ WSë¡œ ì´ë™í•˜ê²Œ ë˜ë©´ ROSì—ê²Œ ì´ëŸ¬í•œ ë³€í™”ë¥¼ ì•Œë ¤ì¤˜ì•¼ í•˜ë©° ì´ ëª…ë ¹ì–´ê°€ source devel/setup.bash ì…ë‹ˆë‹¤. ì´ë²ˆ ê°•ì˜ìš© WSë¥¼ ë§Œë“¤ì–´ë³´ê³ , ì´í›„ ì—¬ëŸ¬ë¶„ë“¤ë§Œì˜ WSë„ ë§Œë“¤ì–´ ì‘ì—…í•´ë³´ì„¸ìš”! ì¼ë°˜ì ìœ¼ë¡œ ROSì˜ workspaceëŠ” name_wsë¼ëŠ” ì´ë¦„ì„ ê°–ëŠ” ê²ƒì´ ì¼ë°˜ì ì´ë©°, ìš°ë¦¬ëŠ” catkin_wsë¼ëŠ” workspaceë¥¼ ë§Œë“¤ì–´ë³´ê³ ì í•©ë‹ˆë‹¤.\nì•„ë˜ ì»¤ë©˜ë“œ ë¼ì¸ë“¤ì„ ë”°ë¼í•´ì£¼ì„¸ìš” cd ~/ mkdir -p catkin_ws/src cd catkin_ws catkin config --init catkin build ë‹¤ìŒê³¼ ê°™ì´ build, devel, src, log í´ë”ê°€ ë§Œë“¤ì–´ì§‘ë‹ˆë‹¤. ROS ì½”ë“œë“¤ì€ ëª¨ë‘ src í´ë” ì•ˆì— ìœ„ì¹˜í•˜ê²Œ ë©ë‹ˆë‹¤. src í´ë” ë‚´ë¶€ì—ì„œ ì½”ë“œ ê°œë°œ â‡’ catkinì„ ì‚¬ìš©í•œ ë¹Œë“œ â‡’ build í´ë” ë‚´ë¶€ì— ì‹¤í–‰ ê°€ëŠ¥í•œ í”„ë¡œê·¸ë¨ ìƒì„±ì˜ ìˆœì„œë¡œ ê°œë°œì´ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤. ì‹¤ìŠµì„ í†µí•´ ê°œë°œ í”„ë¡œì„¸ìŠ¤ì— ìµìˆ™í•´ì ¸ë´…ì‹œë‹¤.\nì•„ë˜ í´ë”ë¥¼ catkin_ws/src ì•ˆì— ì••ì¶• í•´ì œí•©ë‹ˆë‹¤. Example Packages smb_common.zip (2 ) í„°ë¯¸ë„ í”„ë¡œê·¸ë¨ì„ ì‹¤í–‰ì‹œí‚¤ê³  ì•„ë˜ ì»¤ë©˜ë“œ ë¼ì¸ì„ ë”°ë¼í•©ë‹ˆë‹¤. catkin build smb_description catkin build smb_gazebo catkin build smb_control source devel/setup.bash sourceë¡œ ì‹œì‘í•˜ëŠ” ë§ˆì§€ë§‰ ë¼ì¸ì€ ìƒˆë¡œìš´ ë¹Œë“œ í›„ì— í•­ìƒ ì‹¤í–‰í•´ì¤˜ì•¼ í•©ë‹ˆë‹¤. 1ê°•ì„ ì˜ ë”°ë¼í–ˆë‹¤ë©´ sdsë¼ëŠ” ë‹¨ì¶•ì–´ë¡œ ì‚¬ìš©ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.\nì˜ˆì œ í”„ë¡œê·¸ë¨ì„ ì‹¤í–‰ì‹œí‚µë‹ˆë‹¤. roslaunch smb_gazebo smb_gazebo.launch ì‹¤í–‰ ì‹œ ë¶‰ì€ ì—ëŸ¬ ë©”ì„¸ì§€ê°€ ë‚˜ì˜¤ì§€ë§Œ ë™ì‘ë§Œ ëœë‹¤ë©´ ë¬¸ì œ ì—†ìŠµë‹ˆë‹¤.\nì´ ë¡œë´‡ì„ í•œë²ˆ ì›€ì§ì—¬ ë³¼ê¹Œìš”? - teleop ì‹¤í–‰ rosrun teleop_twist_keyboard teleop_twist_keyboard.py íŒŒì¼ êµ¬ì¡° ê´€ì ì—ì„œ, ROS Applicationì€ ì—¬ëŸ¬ Packageë“¤ë¡œ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤. ì´ë“¤ Packageê°€ ì†ŒìŠ¤ íŒŒì¼ì„ ë‹´ê³  ìˆê³ , catkinì´ ì´ë“¤ì„ ë¹Œë“œí•˜ì—¬ ì‹¤í–‰ í”„ë¡œê·¸ë¨ë“¤ì„ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤. ì œê°€ ê³µìœ í•œ ì••ì¶• íŒŒì¼ ì•ˆì—ë„ 3ê°œì˜ Packageê°€ í¬í•¨ë˜ì–´ìˆë˜ ê²ƒì´ë©°, ROS ê°œë°œìë“¤ì€ ìì‹ ë“¤ì˜ ë¡œë´‡ Packageë¥¼ ê°œë°œí•˜ê³  ê³µìœ í•©ë‹ˆë‹¤. Package ìƒì„± ì‹¤ìŠµ Packageë¥¼ ìƒì„±í•˜ëŠ” ë°©ë²•ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.\ncd \u0026lt;your-ws\u0026gt;/src catkin_create_pkg \u0026lt;package_name\u0026gt; [depend1] [depend2] [depend3] my_first_packageë¼ëŠ” packageë¥¼ ì‹œí—˜ì‚¼ì•„ ìƒì„±í•´ë´…ì‹œë‹¤.\n# exameple $ catkin_create_pkg my_first_package rospy std_msgs Created file my_first_package/package.xml Created file my_first_package/CMakeLists.txt Created folder my_first_package/src Successfully created files in /home/kimsooyoung/catkin_ws/src/my_first_package. Please adjust the values in package.xml. dependì—ëŠ” í•´ë‹¹ íŒ¨í‚¤ì§€ì˜ ì˜ì¡´ì„± íŒ¨í‚¤ì§€ë“¤ì´ ë‚˜ì—´ë˜ë©°, rospyëŠ” íŒŒì´ì¬ì„ í†µí•´ ROSë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ì˜ì¡´ì„±ì…ë‹ˆë‹¤.\në¯¸ë¦¬ ì œê³µë˜ì—ˆë˜ Package, smb_gazeboë¥¼ ì‚´í´ë´…ì‹œë‹¤.\nGazebo ì‹¤í–‰ì— í•„ìš”í•œ ëª¨ë¸ íŒŒì¼ê³¼ í™˜ê²½ íŒŒì¼ ë“± ê¸°ëŠ¥ë³„ ì •ë¦¬ëœ ëª¨ìŠµì„ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nì´ë ‡ê²Œ Packageë¥¼ ì˜ êµ¬ì„±í•´ë‘ë©´ ì´í›„ ì½”ë“œì˜ ê´€ë¦¬ì—ë„ í¸ë¦¬í•˜ë‹¤ëŠ” ì¥ì ì´ ìˆìŠµë‹ˆë‹¤.\nì°¸ê³ ìë£Œ\nhttp://wiki.ros.org/ko/ROS/Tutorials/CreatingPackage https://rsl.ethz.ch/education-students/lectures/ros.html https://www.clearpathrobotics.com/assets/guides/noetic/ros/Drive a Husky.html "
},
{
	"uri": "/kr/ros_basic_noetic/lecture4/",
	"title": "Lecture4 - ROS Launch, RViz",
	"tags": [],
	"description": "",
	"content": "ROS Launch ì¼ì „ ì˜ˆì‹œ ì‹¤í–‰ì—ì„œ ë‹¤ìŒê³¼ ê°™ì€ ì»¤ë©˜ë“œ ë¼ì¸ì„ ì‚¬ìš©í–ˆì—ˆìŠµë‹ˆë‹¤.\nroslaunch smb_gazebo smb_gazebo.launch roslaunchë€, ë‹¤ìˆ˜ì˜ ROS Nodeë“¤ì„ í•œë²ˆì— ì‹¤í–‰í•  ìˆ˜ ìˆë„ë¡ í•´ì£¼ëŠ” íˆ´ ì…ë‹ˆë‹¤.\nroslaunchë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” xmlì´ë¼ëŠ” í¬ë©§ì„ ì‚¬ìš©í•˜ëŠ” launch fileì´ ìˆì–´ì•¼ í•˜ë©°, ì´ëŠ” ë³´í†µ íŒ¨í‚¤ì§€ì˜ launch í´ë”ì— ìœ„ì¹˜í•˜ê³  ìˆìŠµë‹ˆë‹¤.\nlaunch fileì˜ êµ¬ì¡°ë¥¼ íŒŒì•…í•´ë´…ì‹œë‹¤.\nlaunchíŒŒì¼ì€ xmlì´ë¼ëŠ” ë¬¸ë²•ì„ ì‚¬ìš©í•©ë‹ˆë‹¤. htmlì„ ì‚¬ìš©í•´ë³´ì…¨ë‹¤ë©´ ì•„ì‹œê² ì§€ë§Œ, \u0026lt;\u0026gt;ë¥¼ ì´ìš©í•˜ì—¬ ë¼ì¸ì„ êµ¬ë¶„í•˜ëŠ” í¬ë©§ì…ë‹ˆë‹¤. í•œ ë¼ì¸ì—ì„œ ëë‚˜ëŠ” ê²½ìš° /\u0026gt;ë¡œ ë§ºì„ ìˆ˜ ìˆì§€ë§Œ, ì—¬ëŸ¬ ë¼ì¸ì´ í•„ìš”í•œ ê²½ìš°ì—ëŠ” ì—¬ëŠ” íƒœê·¸ì™€ ë‹«ëŠ” íƒœê·¸ë¥¼ ì‚¬ìš©í•˜ì—¬ êµ¬ë¶„í•©ë‹ˆë‹¤. \u0026lt;tag /\u0026gt; or \u0026lt;tag (value)\u0026gt; ... \u0026lt;/tag\u0026gt; launch fileì€ ì‹œì‘ê³¼ ë, íƒœê·¸ë¡œ ê°ì‹¸ì§‘ë‹ˆë‹¤.\nnode íƒœê·¸ëŠ” ì‹¤í–‰ë˜ëŠ” ROS Nodeë¥¼ ì§€ì¹­í•©ë‹ˆë‹¤. name íƒœê·¸ëŠ” nodeë¥¼ ì‹¤í–‰í•  ë•Œì˜ ì´ë¦„ì„ ì„¤ì •í•˜ëŠ” ë¶€ë¶„ìœ¼ë¡œ ììœ ë¡­ê²Œ ì§€ì • ê°€ëŠ¥í•©ë‹ˆë‹¤. pkg íƒœê·¸ì—ëŠ” í•´ë‹¹ nodeê°€ ì†í•´ìˆëŠ” packageë¥¼ ì ìŠµë‹ˆë‹¤. type íƒœê·¸ì—ëŠ” ì‹¤í–‰ê°€ëŠ¥í•œ íŒŒì¼, í˜¹ì€ í”„ë¡œê·¸ë¨ì„ ì ê²Œ ë˜ë©°, c++ì˜ ê²½ìš° ë¹Œë“œëœ í”„ë¡œê·¸ë¨, íŒŒì´ì¬ì˜ ê²½ìš° íŒŒì´ì¬ íŒŒì¼ì´ ë©ë‹ˆë‹¤. output íƒœê·¸ëŠ” ë¡œê·¸ê°€ ì¶œë ¥ë˜ëŠ” ìœ„ì¹˜ë¥¼ ì§€ì •í•˜ë©° screenì¼ ì‹œ í„°ë¯¸ë„ì— ì¶œë ¥ë©ë‹ˆë‹¤. \u0026lt;launch\u0026gt; \u0026lt;node name=\u0026#34;listener\u0026#34; pkg=\u0026#34;rospy_tutorials\u0026#34; type=\u0026#34;listener.py\u0026#34; output=\u0026#34;screen\u0026#34;/\u0026gt; \u0026lt;node name=\u0026#34;talker\u0026#34; pkg=\u0026#34;rospy_tutorials\u0026#34; type=\u0026#34;talker.py\u0026#34; output=\u0026#34;screen\u0026#34;/\u0026gt; \u0026lt;/launch\u0026gt; ì´ë²ˆì—ëŠ” smb_gazebo.launchë¥¼ ì‚´í´ë´…ì‹œë‹¤.\n\u0026lt;?xml version=\u0026#34;1.0\u0026#34; encoding=\u0026#34;utf-8\u0026#34;?\u0026gt; \u0026lt;launch\u0026gt; \u0026lt;!-- GAZEBO ARGUMENTS --\u0026gt; \u0026lt;!-- Run Gazebo headless --\u0026gt; \u0026lt;arg name=\u0026#34;headless\u0026#34; default=\u0026#34;false\u0026#34;/\u0026gt; \u0026lt;arg name=\u0026#34;model_path\u0026#34; default=\u0026#34;$(find smb_gazebo)/\u0026#34;/\u0026gt; \u0026lt;arg name=\u0026#34;robot_namespace\u0026#34; default=\u0026#34;\u0026#34;/\u0026gt; \u0026lt;arg name=\u0026#34;robot_model_name\u0026#34; default=\u0026#34;smb\u0026#34;/\u0026gt; \u0026lt;arg name=\u0026#34;enable_ekf\u0026#34; default=\u0026#34;true\u0026#34;/\u0026gt; ... \u0026lt;!-- Load Gazebo world --\u0026gt; \u0026lt;include file=\u0026#34;$(find gazebo_ros)/launch/empty_world.launch\u0026#34;\u0026gt; \u0026lt;env name=\u0026#34;GAZEBO_MODEL_PATH\u0026#34; value=\u0026#34;$(arg model_path)\u0026#34;/\u0026gt; \u0026lt;arg name=\u0026#34;world_name\u0026#34; value=\u0026#34;$(arg world_file)\u0026#34;/\u0026gt; \u0026lt;arg name=\u0026#34;paused\u0026#34; value=\u0026#34;$(arg paused)\u0026#34;/\u0026gt; \u0026lt;arg name=\u0026#34;use_sim_time\u0026#34; value=\u0026#34;$(arg use_sim_time)\u0026#34;/\u0026gt; \u0026lt;arg name=\u0026#34;gui\u0026#34; value=\u0026#34;$(arg run_gui)\u0026#34;/\u0026gt; \u0026lt;arg name=\u0026#34;headless\u0026#34; value=\u0026#34;$(arg headless)\u0026#34;/\u0026gt; \u0026lt;arg name=\u0026#34;debug\u0026#34; value=\u0026#34;$(arg debug)\u0026#34;/\u0026gt; \u0026lt;arg name=\u0026#34;verbose\u0026#34; value=\u0026#34;$(arg verbose)\u0026#34;/\u0026gt; \u0026lt;/include\u0026gt; argë€, argumentì˜ ì•½ìì´ë©° launch íŒŒì¼ì—ì„œ ì¸ìë¡œ ì‘ìš©í•˜ëŠ” ì¼ì¢…ì˜ ë³€ìˆ˜ì…ë‹ˆë‹¤.\narg íƒœê·¸ë¥¼ í†µí•´ argumentë¥¼ ì„ ì–¸í•˜ê³  defaultë¥¼ í†µí•´ ì´ˆê¸°ê°’ì„ ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. argumentì˜ ì„ ì–¸ í›„ ì‚¬ìš©ì€ $(arg \u0026ldquo;argument name\u0026rdquo;) ì…ë‹ˆë‹¤. roslaunch ì‹œ argumentë¥¼ ë°”ê¿” ì‹¤í–‰ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, smb_gazebo.launch ì‹¤í–‰ ì‹œ. worldë¥¼ ë°”ê¾¸ì–´ ì•„ë˜ì™€ ê°™ì´ ì‚¬ìš©ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.\nroslaunch smb_gazebo smb_gazebo.launch world:=big_map_summer_school ì´ˆê¸° ì‹¤í–‰ ì‹œ ì‹œê°„ì´ ë‹¤ì†Œ ê±¸ë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\ní˜„ì¬ ì˜ˆì‹œì—ì„œ ì œê³µë˜ëŠ” worldëŠ” ë‹¤ìŒ 3ê°€ì§€ ì…ë‹ˆë‹¤.\nroslaunch smb_gazebo smb_gazebo.launch ì œì‘í•œ launch fileì„ ë‹¤ì‹œ ë‹¤ë¥¸ launch fileì—ì„œ ë¶ˆëŸ¬ì˜¤ëŠ” ê²½ìš°ê°€ ë”ëŸ¬ ìˆìŠµë‹ˆë‹¤.\nì´ë•Œ, include íƒœê·¸ë¥¼ ì‚¬ìš©í•˜ë©°, íŒ¨í‚¤ì§€ ë‹¨ìœ„ë¥¼ ê¸°ë°˜ìœ¼ë¡œ íŒŒì¼ì˜ ê²½ë¡œë¥¼ ê°€ì ¸ì˜¤ê²Œ ë©ë‹ˆë‹¤.\nincludeí•˜ëŠ” launch fileì˜ ë‚´ë¶€ì—ë„ ì—¬ëŸ¬ argumentë“¤ì´ ìˆì„ ê²ƒì…ë‹ˆë‹¤. ì´ë“¤ì€ arg íƒœê·¸ë¥¼ í†µí•´ ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\u0026lt;include file=\u0026#34;$(find gazebo_ros)/launch/empty_world.launch\u0026#34;\u0026gt; \u0026lt;env name=\u0026#34;GAZEBO_MODEL_PATH\u0026#34; value=\u0026#34;$(arg model_path)\u0026#34;/\u0026gt; \u0026lt;arg name=\u0026#34;world_name\u0026#34; value=\u0026#34;$(arg world_file)\u0026#34;/\u0026gt; \u0026lt;arg name=\u0026#34;paused\u0026#34; value=\u0026#34;$(arg paused)\u0026#34;/\u0026gt; \u0026lt;arg name=\u0026#34;use_sim_time\u0026#34; value=\u0026#34;$(arg use_sim_time)\u0026#34;/\u0026gt; \u0026lt;arg name=\u0026#34;gui\u0026#34; value=\u0026#34;$(arg run_gui)\u0026#34;/\u0026gt; \u0026lt;arg name=\u0026#34;headless\u0026#34; value=\u0026#34;$(arg headless)\u0026#34;/\u0026gt; \u0026lt;arg name=\u0026#34;debug\u0026#34; value=\u0026#34;$(arg debug)\u0026#34;/\u0026gt; \u0026lt;arg name=\u0026#34;verbose\u0026#34; value=\u0026#34;$(arg verbose)\u0026#34;/\u0026gt; \u0026lt;/include\u0026gt; htmlê³¼ ë§ˆì°¬ê°€ì§€ë¡œ \u0026lt;!-- --\u0026gt; ì‚¬ì´ì— ì˜¤ëŠ” ì½”ë“œëŠ” ì£¼ì„ìœ¼ë¡œ ë¬´ì‹œë©ë‹ˆë‹¤.\në‹¨, ì£¼ì˜ì‚¬í•­ í•˜ë‚˜ ìˆìŠµë‹ˆë‹¤. launch íŒŒì¼ì„ ì‚¬ìš©í•˜ë‹¤ë³´ë©´ --ê°€ ì¢…ì¢… ì“°ì´ê³¤ í•˜ëŠ”ë°ìš”. ì´ ê²½ìš° ì£¼ì„ì— ì˜¤ë¥˜ê°€ ë‚˜ë‹ˆ ì£¼ì˜í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.\nLaunch Fileì„ ë‹¤ë£¨ëŠ” ì—°ìŠµì„ í•´ë´…ì‹œë‹¤.\nsmb_gazebo.launchë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ìˆ˜ì •í•©ë‹ˆë‹¤.\nworldë¥¼ big_map_summer_schoolë¡œ ìˆ˜ì •í•©ë‹ˆë‹¤. ë¡œë´‡ì´ ë“±ì¥í•˜ëŠ” ìœ„ì¹˜ë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ìˆ˜ì •í•©ë‹ˆë‹¤. xyz : (-0.5, -1.0, 0.4) yaw angle : 90ë„ (3.1415ë¥¼ 1 radianìœ¼ë¡œ ì¡ìŠµë‹ˆë‹¤.) launch fileì— rospy_tutorials Packageì— ìˆëŠ” talker Nodeë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤. Rqtì™€ RViz ROSì—ëŠ” ë¡œë´‡ì˜ ë‹¤ì–‘í•œ ì„¼ì„œ ë°ì´í„°ë“¤ì„ ì‹œê°í™”í•´ì£¼ëŠ” 3D íˆ´ì´ ìˆìœ¼ë©°, ì´ëŠ” RVizë¼ê³  ë¶ˆë¦½ë‹ˆë‹¤.\nRvizì˜ ì‚¬ìš©ë²•ì„ ì•Œì•„ë´…ì‹œë‹¤.\nì˜ˆì œ ì‹¤í–‰ # Terminal 1 roslaunch smb_gazebo smb_gazebo.launch world:=big_map_summer_school # Terminal 2 rviz ì‚¬ì§„ê³¼ ê°™ì´ Gazeboì™€ RVizê°€ ì˜ ì‹¤í–‰ëœ ìƒí™©ì—ì„œ ê°•ì˜ë¥¼ ë”°ë¼í•©ë‹ˆë‹¤.\nrvizì—ì„œ ì„¼ì„œ ë°ì´í„°ë¥¼ ì‹œê°í™”í•˜ê¸° ì „, ìš°ì„  ì–´ë–¤ ì¢Œí‘œê³„ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì‹œê°í™”í• ì§€ ì„¤ì •í•´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤.\nê°™ì€ ì„¼ì„œë¼ë„ ì›ì  ì¢Œí‘œê³„ì—ì„œ ë³¸ ëª¨ìŠµê³¼, ì„¼ì„œ ì¢Œí‘œê³„ì—ì„œ ë³¸ ëª¨ìŠµì´ ë‹¤ë¥´ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.\nimg from : mathworks ì´ëŠ” RVizì˜ Fixed Frameì—ì„œ ì„¤ì • ê°€ëŠ¥í•©ë‹ˆë‹¤. (odomìœ¼ë¡œ ì„¤ì •í•´ë³´ê² ìŠµë‹ˆë‹¤.)\nì´ì œ ë‹¤ì–‘í•œ ì‹œê°í™” ê¸°ëŠ¥ë“¤ì„ ì‚¬ìš©í•´ë³´ë ¤ í•©ë‹ˆë‹¤.\nê¸°ë³¸ì ìœ¼ë¡œ ë°ì´í„°ì˜ ì¶”ê°€ëŠ” ì™¼ìª½ í•˜ë‹¨ Add ë²„íŠ¼ìœ¼ë¡œ ì‹¤í–‰í•©ë‹ˆë‹¤. tf ì‹œê°í™” odometry ì‹œê°í™” point cloud ì‹œê°í™” ì´ë ‡ê²Œ ì˜ ì„¤ì •í•´ë‘” RVizëŠ” config í¬ë©§ìœ¼ë¡œ ì¶”ì¶œí•˜ì—¬ ì´í›„ì— ë‹¤ì‹œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nFile â‡’ Save Configë¥¼ í†µí•´ configë¥¼ ì €ì¥í•˜ê³ , Open Configë¥¼ í†µí•´ ì €ì¥í•œ configë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nì•„ë˜ì™€ ê°™ì´ ë‹¤ì–‘í•œ Pluginì„ í†µí•´ ì—¬ëŸ¬ ì„¼ì„œ, ë¡œë´‡ ë°ì´í„°ë¥¼ ì‹œê°í™”í•  ìˆ˜ ìˆìœ¼ë©°, ìì‹ ë§Œì˜ Pluginì„ ì œì‘í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.\nì§€ê¸ˆê¹Œì§€ ì—¬ëŸ¬ë¶„ë“¤ì´ ë§Œë“  RViz ì„¤ì •ì„ ì €ì¥í•´ë³´ê³ , launch fileì— í†µí•©í•´ë´…ì‹œë‹¤.\nRVizì˜ ì¢Œì¸¡ ìƒë‹¨ File ì˜µì…˜ì„ ì‚¬ìš©í•˜ì—¬ config fileì„ ì €ì¥í•©ë‹ˆë‹¤. ì €ì¥ ìœ„ì¹˜ëŠ” smb_gazebo/rvizë¡œ ì§€ì •í•˜ê² ìŠµë‹ˆë‹¤. (ìƒˆë¡­ê²Œ í´ë”ë¥¼ ë§Œë“¤ì–´ì£¼ì—ˆìŠµë‹ˆë‹¤.) ì´ì œ, launch fileì„ ìˆ˜ì •í•©ì‹œë‹¤. íŒŒì¼ í•˜ë‹¨ launch íƒœê·¸ê°€ ë‹«íˆê¸° ì „ ë¶€ë¶„ì— ì•„ë˜ì™€ ê°™ì€ ë¼ì¸ì„ ì¶”ê°€í•©ë‹ˆë‹¤. \u0026lt;node name=\u0026#34;rviz\u0026#34; pkg=\u0026#34;rviz\u0026#34; type=\u0026#34;rviz\u0026#34; args=\u0026#34;-d $(find smb_gazebo)/rviz/my_config.rviz\u0026#34; /\u0026gt; \u0026lt;/launch\u0026gt; ì´ì œ, ë‹¤ì‹œ Gazebo launchë¥¼ í•´ë´…ì‹œë‹¤.\nroslaunch smb_gazebo smb_gazebo.launch world:=big_map_summer_school Rqt Tools ì§€ê¸ˆê¹Œì§€ ì‚¬ìš©í•œ ROS íˆ´ì€ rqt_graphì™€ RVizê°€ ìˆì—ˆìŠµë‹ˆë‹¤.\nì‚¬ì‹¤ ROSì—ëŠ” ìˆ˜ë§ì€ ì¶”ê°€ íˆ´ë“¤ì´ ì¡´ì¬í•˜ë©° ì´ë“¤ì„ ë¬¶ì–´ rqt toolsë¼ê³  ë¶€ë¦…ë‹ˆë‹¤.\nrqt image view image from : wiki.ros.org\nrqt multiplot image from : project march\nrqt console image from : wiki.ros.org\nrqt robot steering rqt tf tree image from : rqt tf tree\nì´ëŸ¬í•œ ìˆ˜ë§ì€ íˆ´ë“¤ì´ ìˆì–´ ROS ê°œë°œì„ í¸ë¦¬í•˜ê²Œ í•´ì£¼ê³  ìˆìœ¼ë©°, í•¨ê»˜ ROSë¥¼ ê³µë¶€í•˜ë©´ì„œ í•˜ë‚˜ì”© ê°™ì´ ì‚´í´ë³´ê³  ì‚¬ìš©í•´ë³´ë ¤ í•©ë‹ˆë‹¤.\nì°¸ê³ ìë£Œ\nhttp://wiki.ros.org/roslaunch https://www.clearpathrobotics.com/assets/guides/noetic/ros/Drive a Husky.html https://rsl.ethz.ch/education-students/lectures/ros.html "
},
{
	"uri": "/kr/ros_basic_noetic/lecture5/",
	"title": "Lecture5 - First Programming, ROS Topic",
	"tags": [],
	"description": "",
	"content": "ì´ë²ˆ ê°•ì˜ë¶€í„°, ë³¸ê²©ì ì¸ í”„ë¡œê·¸ë˜ë°ì´ ì‹œì‘ë©ë‹ˆë‹¤. ì²«ë²ˆì§¸ë¡œ Nodeì˜ í”„ë¡œê·¸ë˜ë°ì„ ì‚´í´ë³´ê³ ì í•˜ë©°, ì‹œì‘ ì „ ê°„ë‹¨í•œ ë³µìŠµì„ ì§„í–‰í•˜ê³  ì‹œì‘í•˜ê² ìŠµë‹ˆë‹¤.\nimage from : clearpathrobotics\nWorkspaceì™€ íŒ¨í‚¤ì§€ # WS ìƒì„± mkdir -p catkin_ws/src cd catkin_ws catkin config --init # Package ìƒì„± catkin_create_pkg \u0026lt;pkg-name\u0026gt; \u0026lt;depend1\u0026gt; \u0026lt;depend2\u0026gt; ... ROS Node Programming C++ ì½”ë“œëŠ” src í´ë” ì•ˆì—, íŒŒì´ì¬ ì½”ë“œëŠ” scriptsë¼ëŠ” í´ë” ì•ˆì— ìœ„ì¹˜ì‹œí‚¤ëŠ” ê²ƒì´ ì¼ë°˜ì ì…ë‹ˆë‹¤. cd \u0026lt;pkg-name\u0026gt; mkdir scripts ì§€ê¸ˆë¶€í„°, ì§ì ‘ ëª…ë ¹ì–´ë¥¼ í•œì¤„ì”© ë”°ë¼ì¹˜ë©´ì„œ ì‹¤ìŠµí•˜ì…”ë„ ì¢‹ê³ , ì œê°€ ë¯¸ë¦¬ ì¤€ë¹„í•´ë‘” Packageë¥¼ ì‚¬ìš©í•˜ì…”ë„ ì¢‹ìŠµë‹ˆë‹¤.\në‹¤ìŒìœ¼ë¡œ, íŒŒì´ì¬ ì½”ë“œë¥¼ ì‘ì„±í•˜ê³  íŒ¨í‚¤ì§€ë¥¼ ë¹Œë“œí•´ë´…ì‹œë‹¤.\ncd scripts # my_first_node.py ìƒì„± ì²«ë²ˆì§¸ í”„ë¡œê·¸ë˜ë° ì½”ë“œëŠ” Nodeì˜ ê¸°ë³¸ì…ë‹ˆë‹¤.\nëª¨ë“  ì†ŒìŠ¤ì½”ë“œëŠ” github repoì—ì„œ í™•ì¸ ê°€ëŠ¥í•©ë‹ˆë‹¤.\nmy_first_node.py #!/usr/bin/env python3 import rospy from std_msgs.msg import String def my_first_node(): # ROS nodes require initialization # It contains master registration, uploading parameters rospy.init_node(\u0026#39;my_first_node\u0026#39;, anonymous=True) # ROS safe timer rate = rospy.Rate(10) # 10hz # Loop control Example while not rospy.is_shutdown(): hello_du = \u0026#34;hello du %s\u0026#34; % rospy.get_time() rospy.loginfo(hello_du) # Below line calls sleep method in Python internally. rate.sleep() if __name__ == \u0026#39;__main__\u0026#39;: try: my_first_node() except rospy.ROSInterruptException: pass ì½”ë“œë¥¼ ìƒˆë¡œ ì‘ì„±í•œ ë‹¤ìŒì—ëŠ” ìŠµê´€ì ìœ¼ë¡œ íŒ¨í‚¤ì§€ë¥¼ ë¹Œë“œí•˜ê³  ì‹¤í–‰í•©ë‹ˆë‹¤. íŒŒì´ì¬ ì½”ë“œì˜ ê²½ìš° íŒŒì¼ì˜ ì‹¤í–‰ ê¶Œí•œì´ ì£¼ì–´ì ¸ ìˆì–´ì•¼ í•©ë‹ˆë‹¤. cd scripts chmod +x * cd ~/catkin_ws catkin build my_first_pkg ì‘ì„±í•œ nodeë¥¼ ì‹¤í–‰í•´ë´…ì‹œë‹¤. ë°˜ë³µí•´ì„œ í„°ë¯¸ë„ ë¡œê·¸ê°€ ë‚¨ì„ ê²ƒì…ë‹ˆë‹¤. # Terminal 1 roscore # Terminal 2 rosrun my_first_package my_first_node.py ì½”ë“œ ë¶„ì„ ì²« ì½”ë“œì¸ ë§Œí¼ ìì„¸í•˜ê²Œ ë¶„ì„í•˜ê³  ë„˜ì–´ê°€ë³´ë ¤ í•©ë‹ˆë‹¤.\nROS Noeticì€ Python 3ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ê°€ìƒí™˜ê²½ì˜ íŒŒì´ì¬, ì§ì ‘ ì„¤ì¹˜í•œ íŒŒì´ì¬ ë“± ì—¬ëŸ¬ ë²„ì „ì´ ì„¤ì¹˜ë˜ì–´ ìˆì„ ê²ƒì…ë‹ˆë‹¤. ê³µì‹ ë¬¸ì„œì—ì„œëŠ” ì´ëŸ¬í•œ í˜¼ë€ì„ ë°©ì§€í•˜ê¸° ìœ„í•´ ì½”ë“œì˜ ì œì¼ ì²˜ìŒ ì•„ë˜ ë¼ì¸ì„ ì¶”ê°€í•˜ëŠ” ê²ƒì„ ì¶”ì²œí•˜ê³  ìˆìŠµë‹ˆë‹¤. #!/usr/bin/env python3 Pythonì„ ì‚¬ìš©í•˜ì—¬ ROSë¥¼ ë‹¤ë£¨ê¸° ìœ„í•´ ì‚¬ìš©ë˜ëŠ” íŒ¨í‚¤ì§€ëŠ” rospyì…ë‹ˆë‹¤. importë¥¼ ì‚¬ìš©í•´ë„ ì¢‹ê³  from / importë¥¼ í†µí•´ íŠ¹ì • í´ë˜ìŠ¤ë§Œ ê°€ì ¸ì˜¬ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. import rospy from std_msgs.msg import String ë‹¹ì¥ ì‚¬ìš©í•˜ì§€ëŠ” ì•Šì§€ë§Œ Test Codeë¥¼ ì‘ì„±í•´ì•¼ í•˜ëŠ” ê²½ìš°ê°€ ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ìƒí™©ì— ëŒ€ë¹„í•˜ê¸° ìœ„í•´ main í•¨ìˆ˜ë¥¼ ë”°ë¡œ ë‘ê³  ì•„ë˜ì™€ ê°™ì´ í”„ë¡œê·¸ë¨ì„ ì‹œì‘í•˜ê¸°ë¥¼ ê¶Œì¥í•©ë‹ˆë‹¤. if __name__ == \u0026#39;__main__\u0026#39;: try: my_first_node() except rospy.ROSInterruptException: pass ì´ì œ, my_first_nodeë¥¼ ë¶„ì„í•´ ë³´ê² ìŠµë‹ˆë‹¤. Nodeì˜ ì‹¤í–‰ì„ ìœ„í•´ Masterì— ë“±ë¡í•˜ê³ , ì´ˆê¸°í™”í•˜ëŠ” ì‘ì—…ì´ í•„ìš”í•˜ë©°, ì´ë¥¼ ìœ„í•´ ë³„ë„ë¡œ init_nodeë¼ëŠ” ë©”ì†Œë“œë¥¼ ì‹¤í–‰í•´ì£¼ì–´ì•¼ í•©ë‹ˆë‹¤. def my_first_node(): # ROS nodes require initialization # It contains master registration, uploading parameters rospy.init_node(\u0026#39;my_first_node\u0026#39;, anonymous=True) ROS ì‹œìŠ¤í…œì€ ê¸°ë³¸ì ìœ¼ë¡œ ë¬´í•œ Loopì…ë‹ˆë‹¤. ì´ Loopê°€ í•œì°¨ë¡€ ë°˜ë³µë˜ëŠ” ì£¼ê¸°ë¥¼ ì„¤ì •í•˜ëŠ” ë¶€ë¶„ì…ë‹ˆë‹¤. ROSì˜ ì‹œê°„ ì²´ê³„ì— ëŒ€í•´ì„œëŠ” ì´í›„ í•œë²ˆ ë” ë‹¤ë£¨ê² ìŠµë‹ˆë‹¤. # ROS safe timer rate = rospy.Rate(10) # 10hz rospyë¥¼ í†µí•´ ì‹¤í–‰ ì¤‘ì¸ Nodeì˜ ìƒíƒœë¥¼ í™•ì¸í•  ìˆ˜ ìˆìœ¼ë©°, is_shutdown()ì€ ì˜ˆê¸°ì¹˜ ëª»í•œ ì—ëŸ¬ê°€ ë°œìƒí•˜ê±°ë‚˜ ì‚¬ìš©ìì˜ ì¢…ë£Œë¥¼ ì¸ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 10Hzë¥¼ ë§ì¶”ê¸° ìœ„í•´ Loopë§ˆë‹¤ sleepì„ ê±¸ì–´ì£¼ê³  ìˆìŠµë‹ˆë‹¤. # Loop control Example while not rospy.is_shutdown(): ... rate.sleep() ROSì—ì„œ ì½˜ì†” ë¡œê·¸ë¥¼ ì–»ëŠ” ë°©ë²•ìœ¼ë¡œ print ë³´ë‹¤ rospy.logë¥¼ ì‚¬ìš©í•˜ê¸°ë¥¼ ì¶”ì²œí•©ë‹ˆë‹¤. hello_du = \u0026#34;hello du %s\u0026#34; % rospy.get_time() rospy.loginfo(hello_du) # Below line calls sleep method in Python internally. ROS Timer ROSëŠ” ê¸°ë³¸ì ìœ¼ë¡œ ë¬´í•œ Loopë¥¼ í•˜ë‚˜ì˜ í”„ë¡œì„¸ìŠ¤ ì•ˆì—ì„œ ë™ì‘ì‹œí‚¤ëŠ” í”„ë¡œê·¸ë¨ì…ë‹ˆë‹¤. Timerë¥¼ í†µí•´ ì¼ì • ì‹œê°„ë§ˆë‹¤ ë™ì‘í•˜ëŠ” ì½”ë“œë¥¼ êµ¬í˜„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\ncd my_first_pkg/scripts # spin_node.py ìƒì„± spin_node.py #!/usr/bin/env python3 import rospy # callback method requires event, which is TimerEvent def hello_du(event=None): hello_du = \u0026#34;hello du %s\u0026#34; % rospy.get_time() rospy.loginfo(hello_du) def my_first_node(): rospy.init_node(\u0026#39;my_first_node\u0026#39;, anonymous=True) # Timer Class is kind of Thread. # It\u0026#39;s rule is execute sleep in certain period with given event. rospy.Timer(rospy.Duration(1.0/100.0), hello_du) rospy.spin() if __name__ == \u0026#39;__main__\u0026#39;: try: my_first_node() except rospy.ROSInterruptException: pass ì½”ë“œì˜ ì‹¤í–‰ ê²°ê³¼ëŠ” ì´ì „ê³¼ ê°™ê¸° ë•Œë¬¸ì— Timerì™€ spinì— ëŒ€í•´ì„œë§Œ ì§šê³  ë„˜ì–´ê°€ê² ìŠµë‹ˆë‹¤.\nTimerëŠ” í¬ê²Œ ë‘ê°€ì§€ ë§¤ê°œë³€ìˆ˜ë¥¼ ë°›ìŠµë‹ˆë‹¤. ì‹¤í–‰ ì£¼ê¸°ì™€ Callback í•¨ìˆ˜ì…ë‹ˆë‹¤. í•´ë‹¹ ì£¼ê¸°ë§ˆë‹¤ Callback í•¨ìˆ˜ë¥¼ ì‹¤í–‰ì‹œí‚µë‹ˆë‹¤. rospy.Timer(rospy.Duration(1.0/100.0), hello_du) ì•ìœ¼ë¡œ ì—¬ëŸ¬ë¶„ë“¤ì€ ì§ì ‘ while loopë¥¼ êµ¬í˜„í•˜ê¸°ë³´ë‹¤ rospy.spin()ì„ ë” ë§ì´ ì‚¬ìš©í•˜ì‹œê²Œ ë  ê²ë‹ˆë‹¤. Timerë¥¼ ì„ ì–¸í•œ ì´í›„, í•˜ë‚˜ì˜ Threadì—ì„œ ë§‰í˜€ë²„ë¦¬ëŠ” ê²ƒì„ ë°©ì§€í•˜ëŠ” ì—­í• ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤. rospy.Timer(rospy.Duration(1.0/100.0), hello_du) rospy.spin() image from : python tutorial\nOOP Node Programming my_first_oop_node.py #!/usr/bin/env python3 import rospy class OOPNode: def __init__(self): self.counter_ = 0 self.timer_ = rospy.Timer(rospy.Duration(1.0/100.0), self.hello_du) def hello_du(self, event=None): hello_du = f\u0026#34;hello du {rospy.get_time()}, counter: {self.counter_}\u0026#34; rospy.loginfo(hello_du) self.counter_ += 1 def my_first_oop_node(): rospy.init_node(\u0026#39;my_first_oop_node\u0026#39;, anonymous=True) oop_node = OOPNode() rospy.spin() if __name__ == \u0026#39;__main__\u0026#39;: try: my_first_oop_node() except rospy.ROSInterruptException: pass ì´í›„ì˜ ì‹¤ìŠµë“¤ì„ ìœ„í•´ í•œê°€ì§€ ì˜ˆì‹œë§Œ ë” ì‚´í´ë³´ê³ ì í•©ë‹ˆë‹¤. ê°ì²´ ì§€í–¥ì„ ì‚¬ìš©í•œ ROS Node ì‘ì„±ë°©ë²•ì…ë‹ˆë‹¤. íŒŒì´ì¬ì—ì„œ OOPë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ Class í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•˜ë©°, selfë“± OOPì™€ ê´€ë ¨ëœ ë‚´ìš©ì€ ëª¨ë‘ ì•Œê³  ìˆë‹¤ëŠ” ìƒíƒœì—ì„œ ì§„í–‰í•˜ê² ìŠµë‹ˆë‹¤.\nOOPë¥¼ ì‚¬ìš©í•˜ë©´ main ë©”ì†Œë“œê°€ ë§¤ìš° ê°„í¸í•´ì§„ë‹¤ëŠ” ì¥ì ì´ ìˆìŠµë‹ˆë‹¤. í´ë˜ìŠ¤ë¥¼ ìƒì„±í•˜ê³ , spinì„ í•˜ê¸°ë§Œ í•˜ë©´ ë©ë‹ˆë‹¤. def my_first_oop_node(): rospy.init_node(\u0026#39;my_first_oop_node\u0026#39;, anonymous=True) oop_node = OOPNode() rospy.spin() OOPë¡œ ì „í™˜ë˜ë©´ì„œ ë³€ê²½ëœ êµ¬í˜„ì— ì£¼ëª©í•©ì‹œë‹¤. Timerì˜ Callback í•¨ìˆ˜ë¡œ í´ë˜ìŠ¤ ë©”ì†Œë“œê°€ ì‚¬ìš©ë˜ì—ˆìœ¼ë©°, í´ë˜ìŠ¤ ë³€ìˆ˜ì¸ counterë¥¼ ì‚¬ìš©í•˜ì—¬ êµ¬í˜„í•œ ì ì— ì£¼ëª©í•©ë‹ˆë‹¤. class OOPNode: def __init__(self): self.counter_ = 0 self.timer_ = rospy.Timer(rospy.Duration(1.0/100.0), self.hello_du) def hello_du(self, event=None): hello_du = f\u0026#34;hello du {rospy.get_time()}, counter: {self.counter_}\u0026#34; rospy.loginfo(hello_du) self.counter_ += 1 ì•ìœ¼ë¡œ, ëŒ€ë¶€ë¶„ì˜ ì½”ë“œëŠ” OOP ê¸°ë°˜ìœ¼ë¡œ ì‘ì„±ë©ë‹ˆë‹¤. íŒŒì´ì¬ì˜ í´ë˜ìŠ¤ì— ëŒ€í•´ ìˆ™ì§€ê°€ ë˜ì–´ìˆì§€ ì•Šë‹¤ë©´ ê¼­ ë³µìŠµí•˜ê³  ë‹¤ìŒ ê°•ì˜ë¥¼ ì²­ì·¨í•˜ì„¸ìš”!\nROS Topic ë‹¤ì‹œ ê°œë… í•™ìŠµìœ¼ë¡œ ëŒì•„ì™€ë³´ì•˜ìŠµë‹ˆë‹¤. ì•„ë˜ ê·¸ë¦¼ì€ ì§€ë‚œ ê°•ì˜ì˜ rqt_graphì…ë‹ˆë‹¤.\nìœ„ ê·¸ë¦¼ì—ì„œ ë™ê·¸ë¼ë¯¸ëŠ” Nodeë¥¼ ëœ»í•˜ê³ , í™”ì‚´í‘œëŠ” topicì„ ëœ»í•©ë‹ˆë‹¤.\nì´ë²ˆ ì‹œê°„ì—ëŠ” ì´ Topicì´ ë¬´ì—‡ì¸ì§€ ë°°ì›Œë³´ê³ ì í•©ë‹ˆë‹¤.\nTopicì€ Nodeë“¤ ì‚¬ì´ì— ë°ì´í„°(Message)ê°€ ì˜¤ê°€ëŠ” ê¸¸(Bus)ì˜ ì´ë¦„ì…ë‹ˆë‹¤. image from : docs.ros.org ê·¸ë¦¼ì—ì„œì™€ ê°™ì´ ROS Topicì€\nPublisher(ë°œí–‰ì) Subscriber(êµ¬ë…ì)ë¡œ ë‚˜ëˆ„ì–´ Topicì˜ ì†¡ì‹ , ìˆ˜ì‹ ìë¥¼ êµ¬ë¶„í•©ë‹ˆë‹¤. Publisher, SubscriberëŠ” Nodeì•ˆì—ì„œ ìƒì„±ë˜ë©° ë³„ë„ë¡œ ì‚¬ìš©í•  ìˆ˜ëŠ” ì—†ìŠµë‹ˆë‹¤. Pub/Sub ì‚¬ì´ì— Messageê°€ ì „ë‹¬ë˜ë©°, ì´ ê¸¸ì˜ ì´ë¦„ì´ Topicì¸ ê²ƒì…ë‹ˆë‹¤. ì£¼ì˜í•  ì ì€, Publisher, SubscriberëŠ” ì˜¤ë¡œì§€ Topicì˜ ì´ë¦„ìœ¼ë¡œ ì†Œí†µí•œë‹¤ëŠ” ê²ƒì…ë‹ˆë‹¤. ì–´ë–¤ Nodeì— publish í• ì§€ PublisherëŠ” ì „í˜€ ëª¨ë¥´ë©° ì˜¤ë¡œì§€ Topicì´ ê°™ì€ Subscriberê°€ ë°ì´í„°ë¥¼ ë°›ê²Œ ë©ë‹ˆë‹¤. ë”ë¶ˆì–´, Topicì€ ì—¬ëŸ¬ Nodeë“¤ë¡œ ë¶€í„° ë°ì´í„°ë¥¼ ë°›ì„ ìˆ˜ ìˆê³ , ì „ì†¡ ì‹œì—ë„ ì—¬ëŸ¬ Nodeë“¤ì—ê²Œ ì „ì†¡ì´ ê°€ëŠ¥í•œ ë°©ì‹ì…ë‹ˆë‹¤. â‡’ Topicì˜ ì¤‘ìš”í•œ ì†ì„±ì´ë‹ˆ ê¼­ ì•Œì•„ë‘ì…¨ìœ¼ë©´ ì¢‹ê² ìŠµë‹ˆë‹¤.\nimage from : docs.ros.org Nodeì™€ Topicì˜ ê°œë…ì„ ë‹¤ì‹œ í•œ ë²ˆ ë‹¤ì¡ê³  ê°‘ì‹œë‹¤.\nNodeëŠ” ì‹¤í–‰ë˜ëŠ” í”„ë¡œê·¸ë¨ì´ë©°, ROS Masterì— ë“±ë¡í•˜ê³  ê´€ë¦¬ë©ë‹ˆë‹¤. Nodeë“¤ ì‚¬ì´ì˜ í†µì‹  ë©”ì»¤ë‹ˆì¦˜ ì¤‘ Topicì´ë¼ëŠ” ê²ƒì´ ìˆìœ¼ë©°, ì´ëŠ” Publisherì™€ Subscriberë¼ëŠ” ê°œë…ì„ ê°–ê³  ìˆìŠµë‹ˆë‹¤. Publisherì™€ Subscriber ì‚¬ì´ì˜ ì˜¤ê°€ëŠ” ë°ì´í„°ëŠ” íŠ¹ì •í•œ íƒ€ì…ì„ ê°–ìŠµë‹ˆë‹¤. ì´ë¥¼ Messageë¼ê³  ë¶€ë¦…ë‹ˆë‹¤. Topic Message ë¡œë´‡ í”„ë¡œê·¸ë˜ë° ì‹œì—ëŠ” ë‹¤ì–‘í•œ ì„¼ì„œ ë°ì´í„°ë“¤ì´ ë‹¤ë¤„ì§‘ë‹ˆë‹¤. ì„¼ì„œ ë¿ë§Œ ì•„ë‹ˆë¼, ì œì–´ ë°ì´í„°ë„ ì£¼ê³  ë°›ì•„ì•¼ í•©ë‹ˆë‹¤. ROSì—ì„œëŠ” ì£¼ë¡œ ì‚¬ìš©ë˜ëŠ” ì´ëŸ¬í•œ ë°ì´í„° í˜•ì‹ì„ Messageë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ì§€ì¹­í•˜ë©°, ì—¬ëŸ¬ ê¸°ë³¸ í˜•íƒœë¥¼ ì œê³µí•©ë‹ˆë‹¤. ë”ë¶ˆì–´ ì‚¬ìš©ìê°€ ì§ì ‘ Messageë¥¼ ì»¤ìŠ¤í„°ë§ˆì´ì§•í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.\nì¼ì „ ì˜ˆì‹œì˜ ë¶„ì„ì„ í†µí•´ Topicê³¼ Messageì— ëŒ€í•´ ë‹¤ì‹œ í•œ ë²ˆ ì‚´í´ë´…ì‹œë‹¤. # Terminal 1 roscore # Terminal 2 rosrun roscpp_tutorials talker # Terminal 3 rosrun roscpp_tutorials listener ë‘ í”„ë¡œê·¸ë¨ì´ ì‹¤í–‰ë˜ê³  ìˆëŠ” ìƒíƒœë¥¼ ìœ ì§€í•˜ë©´ì„œ, ì•„ë˜ ë‚´ìš©ì„ ë”°ë¼ì™€ì£¼ì„¸ìš”\nrostopic listë¥¼ í†µí•´ ì‚¬ìš©ì¤‘ì¸ topicë“¤ì„ ëª¨ë‘ ì¡°íšŒ ê°€ëŠ¥í•©ë‹ˆë‹¤. $ rostopic list /chatter /rosout /rosout_agg íŠ¹ì • topicì— ëŒ€í•œ ìì„¸í•œ ì •ë³´ë¥¼ ì•Œê³  ì‹¶ë‹¤ë©´ rostopic infoë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. talkerì™€ listenerê°€ ì¡°íšŒëœ ëª¨ìŠµë„ ë³´ì…ë‹ˆë‹¤. $ rostopic info /chatter Type: std_msgs/String Publishers: * /talker_215337_1671763968667 (http://192.168.55.236:37863/) Subscribers: * /listener_215355_1671763970127 (http://192.168.55.236:44969/) í•´ë‹¹ topicì´ ì‚¬ìš©ì¤‘ì¸ Messageë¥¼ ì¡°íšŒí•˜ê¸° ìœ„í•´ rostopic typeì„ ì‚¬ìš©í•©ë‹ˆë‹¤. $ rostopic type /chatter std_msgs/String rosmsg showë¥¼ í†µí•´ Messageì˜ ì›í˜•ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. $ rosmsg show std_msgs/String string data topic ë°ì´í„°ë¥¼ ì—¿ë³¼ ìˆ˜ ìˆëŠ” rostopic echoì…ë‹ˆë‹¤. $ rostopic echo /chatter data: \u0026#34;hello world 1671764088.1913402\u0026#34; --- data: \u0026#34;hello world 1671764088.2913551\u0026#34; --- ... rostopic hzë¡œ topicì˜ pub/sub ì£¼ê¸°ë¥¼ ë¶„ì„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. $ rostopic hz /chatter subscribed to [/chatter] average rate: 10.000 min: 0.100s max: 0.100s std dev: 0.00014s window: 10 average rate: 9.999 min: 0.099s max: 0.100s std dev: 0.00023s window: 20 ë§ˆì§€ë§‰ìœ¼ë¡œ rqt_graphë¥¼ ë‹¤ì‹œ í•œ ë²ˆ ì‚´í´ë´…ì‹œë‹¤.\nrqt_graph ë°©ê¸ˆ ì‚´í´ë³¸ ì»¤ë©˜ë“œ ë¼ì¸ë“¤ì„ ì¶©ë¶„íˆ ìˆ™ì§€í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤. ê·¸ëŸ¬í•œ ì˜ë¯¸ì—ì„œ, ì´ë²ˆì—ëŠ” Gazebo ì˜ˆì‹œë¥¼ ë¶„ì„í•´ë³¼ê¹Œ í•©ë‹ˆë‹¤.\n# Terminal 1 roslaunch smb_gazebo smb_gazebo.launch # Terminal 2 rosrun teleop_twist_keyboard teleop_twist_keyboard.py rostopic list ê²°ê³¼ $ rostopic list /clicked_point /clock /cmd_vel /diagnostics /e_stop /gazebo/link_states /gazebo/model_states /gazebo/parameter_descriptions /gazebo/parameter_updates /gazebo/performance_metrics /gazebo/set_link_state ... ìš°ë¦¬ê°€ ì§‘ì¤‘í•˜ê³ ì í•˜ëŠ” topicì€ ë¡œë´‡ì„ ì œì–´í•˜ëŠ” /cmd_velì…ë‹ˆë‹¤.\nrostopic info ê²°ê³¼ $ rostopic info /cmd_vel Type: geometry_msgs/Twist Publishers: * /teleop_twist_keyboard (http://192.168.55.236:33903/) Subscribers: * /twist_mux (http://192.168.55.236:38201/) * /gazebo (http://192.168.55.236:33033/) rostopic type ê²°ê³¼ $ rostopic type /cmd_vel geometry_msgs/Twist geometry_msgs/Twistì˜ rosmsg show ê²°ê³¼ $ rosmsg show geometry_msgs/Twist geometry_msgs/Vector3 linear float64 x float64 y float64 z geometry_msgs/Vector3 angular float64 x float64 y float64 z /scanì˜ rostopic echo ê²°ê³¼ $ rostopic echo /scan header: seq: 0 stamp: secs: 204 nsecs: 678000000 frame_id: \u0026#34;rslidar\u0026#34; angle_min: -1.5707999467849731 angle_max: 1.5707999467849731 angle_increment: 0.008700000122189522 time_increment: 0.0 scan_time: 0.033330000936985016 range_min: 0.44999998807907104 range_max: 50.0 ranges: [inf, inf, inf, inf, inf, inf, inf, inf, inf, inf, inf, ... /scanì˜ rostopic hzê²°ê³¼ $ rostopic hz /scan subscribed to [/scan] WARNING: may be using simulated time average rate: 10.000 min: 0.100s max: 0.100s std dev: 0.00000s window: 8 average rate: 10.000 min: 0.100s max: 0.100s std dev: 0.00000s window: 17 rqt_graphì—ì„œ /cmd_velì„ ì°¾ì•„ë³¼ê¹Œìš”?\nrqt_graph Publisher í”„ë¡œê·¸ë˜ë° ì´ë²ˆ ì‹œê°„ ì‚¬ìš©í•  PackageëŠ” py_topic_pkg ì…ë‹ˆë‹¤. ì‹¤ìŠµ ì „ ì‹¤í–‰ë¶€í„° í•´ë³´ê² ìŠµë‹ˆë‹¤.\nPackage Build cd ~/catkin_ws catkin build py_topic_pkg source devel/setup.bash ì˜ˆì œ ì‹¤í–‰ # Terminal 1 roslaunch smb_gazebo smb_gazebo.launch # Terminal 2 rosrun py_topic_pkg cmd_vel_pub.py ë¡œë´‡ì´ ì•„ë˜ì™€ ê°™ì´ ì›ì„ ê·¸ë¦¬ë©° ì›€ì§ì¼ ê²ƒì…ë‹ˆë‹¤.\ncmd_vel_pub.py #!/usr/bin/env python3 import rospy from geometry_msgs.msg import Twist class CmdVelPubNode: def __init__(self): # Publisher requires 3 paramters # 1. topic name # 2. topic msg type # 3. topic queue size self.cmd_vel_pub_ = rospy.Publisher(\u0026#34;cmd_vel\u0026#34;, Twist, queue_size=10) self.timer_ = rospy.Timer(rospy.Duration(1.0/10.0), self.pub_msg) self.twist_ = Twist() def pub_msg(self, event=None): # geometry_msgs.Twist # ref: http://docs.ros.org/en/melodic/api/geometry_msgs/html/msg/Twist.html self.twist_.linear.x = 0.5 self.twist_.angular.z = 1.0 self.cmd_vel_pub_.publish(self.twist_) def cmd_vel_node(): rospy.init_node(\u0026#39;cmd_vel_node\u0026#39;, anonymous=True) cmd_vel_pub_node = CmdVelPubNode() rospy.spin() if __name__ == \u0026#39;__main__\u0026#39;: try: cmd_vel_node() except rospy.ROSInterruptException: pass íŒŒì´ì¬ ros í”„ë¡œê·¸ë˜ë°ì„ ìœ„í•œ rospy, ë¡œë´‡ì˜ ì†ë„ ì œì–´ì— í•„ìš”í•œ Message typeì¸ Twistë¥¼ import í•˜ê³  ìˆìŠµë‹ˆë‹¤. import rospy from geometry_msgs.msg import Twist rospy.Publisherë¥¼ í†µí•´ publisherë¥¼ ìƒì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” ìµœì†Œ 3ê°œì˜ ë§¤ê°œë³€ìˆ˜ë¥¼ í•„ìš”ë¡œ í•©ë‹ˆë‹¤. topic ì´ë¦„ topic type queue size self.cmd_vel_pub_ = rospy.Publisher(\u0026#34;cmd_vel\u0026#34;, Twist, queue_size=10)= ìš°ë¦¬ëŠ” ë¡œë´‡ì˜ ì œì–´ ì‹ í˜¸ë¥¼ ì£¼ê¸°ì ìœ¼ë¡œ ì „ì†¡í•˜ê³ ì í•©ë‹ˆë‹¤. ë”°ë¼ì„œ Timerë„ ì„ ì–¸í•˜ì˜€ìŠµë‹ˆë‹¤. self.timer_ = rospy.Timer(rospy.Duration(1.0/10.0), self.pub_msg) ë‹¤ìŒìœ¼ë¡œ, Message Typeì¸ geometry_msgs/Twist ê°’ì„ ì±„ì›ë‹ˆë‹¤. í˜„ì¬ ìš°ë¦¬ ë¡œë´‡ì€ 2ì°¨ì› í‰ë©´ì—ì„œ ì›€ì§ì´ë©°, ë¡œë´‡ í˜•íƒœ ë•Œë¬¸ì— ì•ë’¤ ì„ ì†ë„ì™€ ê°ì†ë„ë¥¼ ê°–ê²Œ ë©ë‹ˆë‹¤. ... self.twist_ = Twist() def pub_msg(self, event=None): self.twist_.linear.x = 0.5 self.twist_.angular.z = 1.0 Messageì˜ ì¢…ë¥˜ëŠ” ë§¤ìš° ë§ìŠµë‹ˆë‹¤. êµ¬ê¸€ì„ í†µí•´ ê²€ìƒ‰í•˜ë©´ì„œ ì½”ë”©í•˜ëŠ” ìŠµê´€ì„ ë“¤ì—¬ë´…ì‹œë‹¤.\nfrom : http://docs.ros.org/ linearì˜ ë‹¨ìœ„ëŠ” m/s ì´ë©°, angularì˜ ë‹¨ìœ„ëŠ” rad/s ì…ë‹ˆë‹¤. pi = 3.14\në§ˆì§€ë§‰, ê°€ì¥ ì¤‘ìš”í•œ topic publishëŠ” ìƒì„±í•œ Publisherì˜ publish() ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ë¯¸ë¦¬ ì¤€ë¹„í•´ë‘” topic messageë¥¼ ì‚¬ìš©í•©ì‹œë‹¤. def pub_msg(self, event=None): # geometry_msgs.Twist # ref: http://docs.ros.org/en/melodic/api/geometry_msgs/html/msg/Twist.html self.twist_.linear.x = 0.5 self.twist_.angular.z = 1.0 self.cmd_vel_pub_.publish(self.twist_) ì´ Nodeë¥¼ ì‹¤í–‰í•˜ë©´, ìš°ë¦¬ì˜ ROSê°€ ì¼ì • ì£¼ê¸°ì— ë§ì¶”ì–´ ì•Œë§ê²Œ topic publishë¥¼ ì‹¤í–‰ì‹œì¼œì¤„ ê²ƒì…ë‹ˆë‹¤. ìš°ë¦¬ëŠ” ì •í•´ì§„ êµ¬í˜„ì— ë§ì¶”ì–´ ì½”ë“œë§Œ ì‘ì„±í•˜ë©´ ë˜ëŠ” ê²ƒì´ì§€ìš” ğŸ˜Š\ndef cmd_vel_node(): rospy.init_node(\u0026#39;cmd_vel_node\u0026#39;, anonymous=True) cmd_vel_pub_node = CmdVelPubNode() rospy.spin() Subscriber í”„ë¡œê·¸ë˜ë° ì´ë²ˆ ì˜ˆì‹œì—ëŠ” ë¡œë´‡ì— ì¥ì°©ëœ ë¼ì´ë‹¤ ì„¼ì„œë¥¼ ì‚¬ìš©í•´ë³´ë ¤ í•©ë‹ˆë‹¤. ì˜ˆì‹œë¥¼ ì‹¤í–‰í•´ë³´ê² ìŠµë‹ˆë‹¤. # Terminal 1 roslaunch smb_gazebo smb_gazebo.launch # Terminal 2 rosrun py_topic_pkg laser_scan_sub.py ì‹¤í–‰ ì´í›„, ì˜ìƒê³¼ ê°™ì´ ë°•ìŠ¤ë¥¼ ë¡œë´‡ì˜ ì „ë°©ì— ë°°ì¹˜í•´ë´…ì‹œë‹¤. í„°ë¯¸ë„ì— ë“±ì¥í•˜ëŠ” ë¬¸êµ¬ì— ì§‘ì¤‘í•´ë³´ì„¸ìš”. ë°•ìŠ¤ê°€ ì¶”ê°€ë˜ë©´ì„œ ì¶œë ¥ì°½ì— ì–´ë– í•œ ë³€í™”ê°€ ìƒê¸°ë‚˜ìš”?\në¡œë´‡ì— ë¶€ì°©ëœ ë¼ì´ë‹¤ ì„¼ì„œëŠ” ì „ë°© 180ë„ ì‚¬ë°©ìœ¼ë¡œ 360ê°œì˜ ë ˆì´ì €ë¥¼ í©ë¿Œë¦½ë‹ˆë‹¤.\në ˆì´ì €ì˜ íŠ¹ì„±ìƒ ë¬¼ì²´ë¥¼ ë§ê³  ë˜ëŒì•„ì˜¤ê²Œ ë˜ë©°, ì´ ì‹œê°„ì„ í†µí•´ ë¬¼ì²´ì™€ì˜ ê±°ë¦¬ë¥¼ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nì˜ˆì‹œì˜ í”„ë¡œê·¸ë¨ì€ ë¡œë´‡ì— ë¶€ì°©ëœ ë ˆì´ì €ì—ì„œ publishë˜ëŠ” ë°ì´í„°ë¥¼ subscribeí•œ ê²ƒì…ë‹ˆë‹¤. ì´ë¥¼ í”„ë¡œê·¸ë˜ë°í•˜ë©´ì„œ pythonìœ¼ë¡œ subscriberë¥¼ ë‹¤ë£¨ëŠ” ë°©ë²•ì— ëŒ€í•´ ë°°ì›Œë´…ì‹œë‹¤.\nlaser_scan_sub.py #!/usr/bin/env python3 import rospy from sensor_msgs.msg import LaserScan class LaserSubNode: def __init__(self): # Publisher requires 3 paramters # 1. topic name # 2. topic msg type # 3. sub callback method self.laser_sub_ = rospy.Subscriber(\u0026#34;scan\u0026#34;, LaserScan, self.laser_cb) # first param of callback method is always topic msg def laser_cb(self, data): rospy.loginfo( len(data.ranges)) print(f\u0026#34;\u0026#34;\u0026#34; data.ranges[0]: {data.ranges[0]} data.ranges[90]: {data.ranges[90]} data.ranges[179]: {data.ranges[179]} data.ranges[270]: {data.ranges[270]} data.ranges[360]: {data.ranges[360]} \u0026#34;\u0026#34;\u0026#34;) def laser_sub_node(): rospy.init_node(\u0026#39;laser_sub_node\u0026#39;, anonymous=True) laser_sub_node = LaserSubNode() rospy.spin() if __name__ == \u0026#39;__main__\u0026#39;: try: laser_sub_node() except rospy.ROSInterruptException: pass ì´ë²ˆì— ì‚¬ìš©í•˜ëŠ” topic messageëŠ” sensor_msgs/LaserScanì…ë‹ˆë‹¤. import rospy from sensor_msgs.msg import LaserScan subscriberëŠ” publisherì™€ ë‹¬ë¦¬ Timerê°€ í•„ìš”í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. publishë˜ëŠ” ë°ì´í„°ê°€ ì—†ìœ¼ë©´ ì•„ë¬´ ë™ì‘ì„ í•  ìˆ˜ ì—†ìœ¼ë©°, publish ì£¼ê¸°ì— ë§ì¶”ì–´ subscribeí•  ìˆ˜ë°–ì— ì—†ëŠ” ê²ƒì´ì§€ìš”.\nsubscriberëŠ” rospy.Subscriberë¡œ ìƒì„±í•˜ë©° ìµœì†Œ 3ê°œì˜ ë§¤ê°œë³€ìˆ˜ë¥¼ ìš”êµ¬í•©ë‹ˆë‹¤. topic ì´ë¦„ topic message ì´ë¦„ subscribe ë§ˆë‹¤ ì‹¤í–‰ë˜ëŠ” callback ë©”ì†Œë“œ class LaserSubNode: def __init__(self): # Publisher requires 3 paramters # 1. topic name # 2. topic msg type # 3. sub callback method self.laser_sub_ = rospy.Subscriber(\u0026#34;scan\u0026#34;, LaserScan, self.laser_cb) ì´ callback ë©”ì†Œë“œì—ì„œ ì£¼ì˜í•´ì•¼ í•  ì ì€, í•­ìƒ callback methodì˜ ë§¤ê°œë³€ìˆ˜ê°€ subscribeëœ ë°ì´í„°ë¼ëŠ” ì ì…ë‹ˆë‹¤. ì§€ê¸ˆì˜ ê²½ìš° LaserScan íƒ€ì…ì˜ ë°ì´í„°ì¼ ê²ƒì…ë‹ˆë‹¤. # first param of callback method is always topic msg def laser_cb(self, data): rospy.loginfo( len(data.ranges)) ... ë§ˆì§€ë§‰ìœ¼ë¡œ, ê¹”ë”í•œ í„°ë¯¸ë„ ì¶œë ¥ì„ ìœ„í•´ print í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì˜€ìŠµë‹ˆë‹¤. print(f\u0026#34;\u0026#34;\u0026#34; data.ranges[0]: {data.ranges[0]} data.ranges[90]: {data.ranges[90]} data.ranges[179]: {data.ranges[179]} data.ranges[270]: {data.ranges[270]} data.ranges[360]: {data.ranges[360]} \u0026#34;\u0026#34;\u0026#34;) Subscriber ì‹¤í–‰ ì‹œì—ëŠ” í•­ìƒ rospy.spin()ì„ ìŠì§€ ë§ë„ë¡ í•©ë‹ˆë‹¤. spin ë˜ì§€ ì•ŠëŠ”ë‹¤ë©´ íŠ¹ì • ì“°ë ˆë“œê°€ ìì›ì„ ì ìœ í•˜ê¸° ë•Œë¬¸ì— subscriberì˜ ìƒíƒœë¥¼ ê°±ì‹ í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.\ndef laser_sub_node(): rospy.init_node(\u0026#39;laser_sub_node\u0026#39;, anonymous=True) laser_sub_node = LaserSubNode() rospy.spin() ê³¼ì œ - ë¬¼ì²´ íšŒí”¼í•˜ê¸° pub/subì˜ ê°œë…ì„ ì˜ ì´í•´í•˜ì˜€ëŠ”ì§€ ì•Œì•„ë³¼ ìˆ˜ ìˆëŠ” ê³¼ì œë¥¼ ì¤€ë¹„í•´ë³´ì•˜ìŠµë‹ˆë‹¤. ì •ë‹µì´ ë”°ë¡œ ìˆëŠ” ê²ƒì€ ì•„ë‹ˆê¸°ì— ë¶€ë‹´ ì—†ì´ í•´ë³´ì‹œê³ , ì €ì˜ ë‹µì•ˆë„ í•œë²ˆ ì‚´í´ë³´ì„¸ìš”.\nì˜ˆì œ ì‹¤í–‰ # Terminal 1 roslaunch smb_gazebo smb_gazebo.launch # Ternimal 2 rosrun py_topic_pkg collision_aviod.py Gazebo ì˜ˆì œë¥¼ ì‹¤í–‰í•˜ì˜€ë‹¤ë©´, ë¡œë´‡ì˜ ì „ë°©ì— ì¥ì• ë¬¼ì„ ë†“ì•„ ì§„ë¡œë¥¼ ë§‰ì•„ë´…ë‹ˆë‹¤. ì—¬ëŸ¬ë¶„ê»˜ì„œ êµ¬í˜„í•´ì•¼ í•˜ëŠ” ê²ƒì€, ë¼ì´ë‹¤ ì„¼ì„œë¥¼ ì‚¬ìš©í•˜ì—¬ ë¡œë´‡ì´ íšŒí”¼ ì£¼í–‰ì„ í•˜ë„ë¡ ë§Œë“œëŠ” ê²ƒì…ë‹ˆë‹¤. ì¼ì¢…ì˜ í…œí”Œë › ì½”ë“œë¥¼ ì²¨ë¶€í•˜ì˜€ìœ¼ë©°, my_collision_aviod.pyë¼ëŠ” ì´ë¦„ì˜ ì½”ë“œì…ë‹ˆë‹¤.\ní•´ë‹¹ ì½”ë“œì˜ TODO ë¶€ë¶„ì„ ì‘ì„±í•˜ì—¬ ì—¬ëŸ¬ë¶„ë§Œì˜ íšŒí”¼ ì•Œê³ ë¦¬ì¦˜ì„ ë§Œë“¤ì–´ ë³´ì„¸ìš”!\në¡œë´‡ì˜ ë¼ì´ë‹¤ ë°ì´í„°ì¸ LaserScanì„ Subscribeí•˜ì—¬ Twist Typeì„ ì‚¬ìš©í•˜ëŠ” scan topicìœ¼ë¡œ publishë¥¼ í•˜ê²Œ ë©ë‹ˆë‹¤. class CollisionAvoidNode: def __init__(self): self.laser_sub_ = rospy.Subscriber(\u0026#34;scan\u0026#34;, LaserScan, self.laser_cb) self.cmd_vel_pub_ = rospy.Publisher(\u0026#34;cmd_vel\u0026#34;, Twist, queue_size=10) self.twist_ = Twist() def laser_cb(self, data): # TODO: Prevent robot from collision # make your own logic to do that return None ì œê°€ ì‘ì„±í•œ ì˜ˆì‹œë¥¼ ìˆ˜ì •í•˜ì—¬ ë”ìš± ë˜‘ë˜‘í•œ ë¡œë´‡ì„ êµ¬í˜„í•˜ì…”ë„ ì¢‹ê³ , ììœ ë¡­ê²Œ ì‹¤ìŠµí•´ë³´ì‹œê¸° ë°”ëë‹ˆë‹¤.\nì°¸ê³ ìë£Œ\nhttps://rsl.ethz.ch/education-students/lectures/ros.html https://docs.ros.org/en/foxy/index.html http://wiki.ros.org/msg "
},
{
	"uri": "/kr/ros_basic_noetic/lecture6/",
	"title": "Lecture6 - ROS Service, Parameter",
	"tags": [],
	"description": "",
	"content": " ì§€ë‚œ ì‹œê°„ ë§ˆì§€ë§‰ ì˜ˆì‹œì˜€ë˜ ì¥ì• ë¬¼ íšŒí”¼ ì½”ë“œë¶€í„° ê°„ë‹¨í•˜ê²Œ ë¦¬ë·°í•´ë³´ê³ ì í•©ë‹ˆë‹¤.\nì œê°€ ì‘ì„±í•œ ë¡œì§ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.\nê³¼ì œë¥¼ í•´ë³´ì…¨ë‹¤ë©´ ì•„ì‹œê² ì§€ë§Œ, ì¸¡ì • ë²”ìœ„ë¥¼ ë²—ì–´ë‚˜ê²Œ ë˜ë©´ data.rangesëŠ” inf ê°’ì„ ê°–ê²Œ ë©ë‹ˆë‹¤. ì´ë¥¼ ê±¸ëŸ¬ë‚´ëŠ” ì½”ë“œê°€ ì•„ë˜ ë¶€ë¶„ì…ë‹ˆë‹¤. for i, point in enumerate(data.ranges): if not math.isinf(point) and point \u0026lt; 1.0: ì €ì˜ ë¡œì§ì€, ì •ë©´ì„ ê¸°ì ìœ¼ë¡œ ì™¼ìª½ê³¼ ì˜¤ë¥¸ìª½ ê°ê° infê°€ ì•„ë‹Œ ë°ì´í„°ì˜ ê°œìˆ˜ë¥¼ ì¹´ìš´íŒ…í•©ë‹ˆë‹¤. ì „ì²´ ë°ì´í„°ê°€ 362ê°œì´ê³  ë§ˆì§€ë§‰ ë°ì´í„°ëŠ” ì‚¬ìš©í•˜ê¸° ì•ŠëŠ” ê°’ì´ê¸° ë•Œë¬¸ì—, 180ì„ ê¸°ì ìœ¼ë¡œ ì¡ì•˜ìŠµë‹ˆë‹¤. left_side_count = 0 right_side_count = 0 for i, point in enumerate(data.ranges): if not math.isinf(point) and point \u0026lt; 1.0: if i \u0026gt; 180: left_side_count += 1 else: right_side_count += 1 ì´ì œ, ì œì–´ ë°ì´í„°ë¥¼ ë§Œë“¤ì–´ì¤ë‹ˆë‹¤. ROSë¥¼ ë¹„ë¡¯í•˜ì—¬ ë¡œë´‡ ì‹œìŠ¤í…œì—ì„œëŠ” ëŒ€ë¶€ë¶„ ì˜¤ë¥¸ì† ì¢Œí‘œê³„ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ë”°ë¼ì„œ ìœ„ì—ì„œ ë³´ì•˜ì„ rospy.loginfo(hello_du)ë•Œ ì˜¤ë¥¸ì†ì´ ê°ê¸°ëŠ” ë°˜ì‹œê³„ ë°©í–¥ì´ + ë¶€í˜¸ë¥¼ ê°–ê²Œ ë©ë‹ˆë‹¤. ì´ë¥¼ ê³ ë ¤í•˜ì—¬ ê°ì†ë„ë¥¼ ì •í–ˆìŠµë‹ˆë‹¤. 180ì€ magic number, ì¼ì¢…ì˜ ë³€í™˜ ìƒìˆ˜ì…ë‹ˆë‹¤. image from : ì˜¤ë¡œì¹´\ndef laser_cb(self, data): left_side_count = 0 right_side_count = 0 for i, point in enumerate(data.ranges): if not math.isinf(point) and point \u0026lt; 1.0: if i \u0026gt; 180: left_side_count += 1 else: right_side_count += 1 self.twist_.linear.x = 0.3 self.twist_.angular.z = (right_side_count - left_side_count) / 100 self.cmd_vel_pub_.publish(self.twist_) ì§€ë‚œ ê°•ì˜ì—ì„œ ì´ì•¼ê¸°í•œ ê²ƒê³¼ ê°™ì´ ì´ ë¬¸ì œì˜ ì •ë‹µì€ ì—†ìŠµë‹ˆë‹¤.\në‹¤ë§Œ, Topicì˜ Pub / Subì„ ëª¨ë‘ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ”ì§€ ìŠ¤ìŠ¤ë¡œ ì ê²€í•´ë³¼ ìˆ˜ ìˆì„ ê²ƒì…ë‹ˆë‹¤.\nROS Parameter ì•ì„  ì €ì˜ ì˜ˆì‹œì—ì„œ ë§ˆì§€ë§‰ ì†ë„ë¡œ ë³€í™˜í•˜ëŠ” ë¶€ë¶„ ìˆ˜ì‹ì— ë‚˜ëˆ„ê¸° 100ì´ ìˆì—ˆë˜ ê²ƒì„ ê¸°ì–µí•˜ì‹œë‚˜ìš”? ì´ëŸ° ìƒìˆ˜ë¥¼ ì§ì ‘ ì½”ë“œì— ì ëŠ” ê²ƒì€ ì‚¬ì‹¤ ì¶”ì²œë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ê°œë°œ ì´í›„ í•´ë‹¹ ìƒìˆ˜ë¥¼ ë³€ê²½í•˜ê³ ì í•˜ì˜€ì„ ì‹œ, ì§ì ‘ ì½”ë“œë¥¼ ìˆ˜ì •í•˜ê³  ë‹¤ì‹œ ì‹¤í–‰í•´ì•¼ í•˜ê¸° ë•Œë¬¸ì— ë¶ˆí¸ì„ ì•¼ê¸°í•©ë‹ˆë‹¤.\nì´ëŸ¬í•œ ë¬¸ì œì˜ í•´ê²° ë°©ë²•ìœ¼ë¡œ ROSì˜ ë§¤ê°œë³€ìˆ˜, parameterë¥¼ ë‹¤ë£¨ëŠ” ë°©ë²•ì„ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.\npy_param_pkg/scripts/various_params.py #!/usr/bin/env python3 import rospy class ParamNode: def __init__(self): self.str_param_ = rospy.get_param(\u0026#39;~str_param\u0026#39;, \u0026#39;hello_world\u0026#39;) self.int_param_ = rospy.get_param(\u0026#39;~int_param\u0026#39;, 2023) self.double_param_ = rospy.get_param(\u0026#39;~double_param\u0026#39;, 3.14) self.bool_param_ = rospy.get_param(\u0026#39;~bool_param\u0026#39;, True) self.list_of_float_param_ = rospy.get_param(\u0026#39;~list_of_float_param\u0026#39;, [1., 2., 3., 4.]) rospy.loginfo(f\u0026#34;\u0026#34;\u0026#34; self.str_param_ = {self.str_param_} self.int_param_ = {self.int_param_} self.double_param_ = {self.double_param_} self.bool_param_ = {self.bool_param_} self.list_of_float_param_ = {self.list_of_float_param_} \u0026#34;\u0026#34;\u0026#34;) def param_node(): rospy.init_node(\u0026#39;param_node\u0026#39;, anonymous=True) param_node = ParamNode() rospy.spin() if __name__ == \u0026#39;__main__\u0026#39;: try: param_node() except rospy.ROSInterruptException: pa ì‹¤í–‰ ê²°ê³¼ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤. $ rosrun py_param_pkg various_params.py [INFO] [1672014267.630578]: self.str_param_ = hello_world self.int_param_ = 2023 self.double_param_ = 3.14 self.bool_param_ = True self.list_of_float_param_ = [1.0, 2.0, 3.0, 4.0] ë§¤ê°œë³€ìˆ˜ë¥¼ ì„ ì–¸í•˜ê³  ê¸°ë³¸ê°’ì„ ì§€ì •í•˜ëŠ” ë°©ë²•ì€ rospy.get_paramì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ë‘ë²ˆì§¸ ê¸°ë³¸ê°’ì„ ì˜ ë³´ë©´ ì–´ë–¤ íƒ€ì…ì„ ì‚¬ìš©í•˜ëŠ”ì§€ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤. def __init__(self): self.str_param_ = rospy.get_param(\u0026#39;~str_param\u0026#39;, \u0026#39;hello_world\u0026#39;) self.int_param_ = rospy.get_param(\u0026#39;~int_param\u0026#39;, 2023) self.double_param_ = rospy.get_param(\u0026#39;~double_param\u0026#39;, 3.14) self.bool_param_ = rospy.get_param(\u0026#39;~bool_param\u0026#39;, True) self.list_of_float_param_ = rospy.get_param(\u0026#39;~list_of_float_param\u0026#39;, [1., 2., 3., 4.]) parameter ì•ì— ë¶™ëŠ” ë¬¼ê²° í‘œì‹œ (~)ëŠ” private parameterë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤. ì´ì— ëŒ€í•´ ê¶ê¸ˆí•˜ë‹¤ë©´ ì•„ë˜ì˜ ì¶”ê°€ ìë£Œë¥¼ í•™ìŠµí•´ë³´ì„¸ìš”. global_name = rospy.get_param(\u0026#34;/global_name\u0026#34;) relative_name = rospy.get_param(\u0026#34;relative_name\u0026#34;) private_param = rospy.get_param(\u0026#39;~private_name\u0026#39;) default_param = rospy.get_param(\u0026#39;default_param\u0026#39;, \u0026#39;default_value\u0026#39;) ì¶”ê°€ ìë£Œ : wiki.ros\në§¤ê°œë³€ìˆ˜ë¥¼ ë³€ê²½í•˜ëŠ” ê°€ì¥ ë³´ë³€ì ì¸ ë°©ë²•ì€ launch fileì„ ì‚¬ìš©í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. launch fileì˜ param íƒœê·¸ë¥¼ ì‚¬ìš©í•˜ì—¬ Nodeì— ì›í•˜ëŠ” parameterë¥¼ ì „ë‹¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. \u0026lt;launch\u0026gt; \u0026lt;node name=\u0026#34;various_param_node\u0026#34; pkg=\u0026#34;py_param_pkg\u0026#34; type=\u0026#34;various_params.py\u0026#34; respawn=\u0026#34;false\u0026#34; output=\u0026#34;screen\u0026#34; \u0026gt; \u0026lt;param name=\u0026#34;str_param\u0026#34; type=\u0026#34;string\u0026#34; value=\u0026#34;roslaunch changed me\u0026#34; /\u0026gt; \u0026lt;/node\u0026gt; \u0026lt;/launch\u0026gt; ROS í”„ë¡œê·¸ë˜ë°ì„ í•˜ë‹¤ ë³´ë©´ ë§¤ê°œë³€ìˆ˜ê°€ ì•„ì£¼ ë§ì´ í•„ìš”í•œ ê²½ìš°ê°€ ìˆìŠµë‹ˆë‹¤. ì´ëŸ´ ë•Œë§ˆë‹¤ launch fileì— param íƒœê·¸ ë¼ì¸ì„ ì¶”ê°€í•˜ëŠ” ê²ƒì€ ë§¤ìš° ê·€ì°®ì€ ì¼ì…ë‹ˆë‹¤.\nyamlì´ë¼ëŠ” í˜•ì‹ì˜ íŒŒì¼ë¡œ ë§¤ê°œë³€ìˆ˜ë¥¼ í•œë²ˆì— ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\npy_param_pkg/param/config.yaml str_param: \u0026#34;yaml string\u0026#34; int_param: 9 double_param: 2.71828 bool_param: \u0026#34;false\u0026#34; list_of_float_param: [3., 2., 1.] py_param_pkg/launch/param_with_yaml.launch \u0026lt;launch\u0026gt; \u0026lt;node name=\u0026#34;various_param_node\u0026#34; pkg=\u0026#34;py_param_pkg\u0026#34; type=\u0026#34;various_params.py\u0026#34; respawn=\u0026#34;false\u0026#34; output=\u0026#34;screen\u0026#34; \u0026gt; \u0026lt;rosparam command=\u0026#34;load\u0026#34; file=\u0026#34;$(find py_param_pkg)/param/config.yaml\u0026#34; /\u0026gt; \u0026lt;param name=\u0026#34;str_param\u0026#34; type=\u0026#34;string\u0026#34; value=\u0026#34;roslaunch changed me\u0026#34; /\u0026gt; \u0026lt;/node\u0026gt; \u0026lt;/launch\u0026gt; launch fileì— rosparam íƒœê·¸ë¥¼ ì¶”ê°€í•˜ê³ , load commandë¥¼ ì‚¬ìš©í•˜ë©° ì‚¬ìš©í•˜ëŠ” yaml íŒŒì¼ì˜ ìœ„ì¹˜ë¥¼ file ì˜µì…˜ì„ í†µí•´ ì „ë‹¬í•©ë‹ˆë‹¤.\nROS parameter Commands rostopic, rosnodeì™€ ê°™ì´ parameter ë˜í•œ í„°ë¯¸ë„ ëª…ë ¹ì–´ë¥¼ ê°–ê³  ìˆìŠµë‹ˆë‹¤.\nì ‘ê·¼ ê°€ëŠ¥í•œ ëª¨ë“  parameterë“¤ì„ ë‚˜ì—´í•©ë‹ˆë‹¤. rosparam list íŠ¹ì • paramterì˜ ê°’ì„ ì–»ê³ ìí•˜ë©´ ì•„ë˜ í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. rosparam get \u0026lt;parameter_name\u0026gt; ì„ ì–¸ë˜ì–´ ìˆëŠ” parameterì˜ ê°’ì„ ë³€ê²½í•˜ê³  ì‹¶ì€ ê²½ìš° ì•„ë˜ í‚¤ì›Œë“œë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. rosparam set \u0026lt;parameter_name\u0026gt; \u0026lt;value\u0026gt; ì—¬ëŸ¬ë¶„ë“¤ì´ ì‘ì„±í•œ íšŒí”¼ í”„ë¡œê·¸ë¨ì—ë„ ë§¤ê°œë³€ìˆ˜ë¡œ ì‘ìš©í•˜ëŠ” ìƒìˆ˜ë“¤ì´ ìˆì„ ê²ƒì…ë‹ˆë‹¤. ì´ë¥¼ parameterë¡œ ë³€ê²½í•˜ì—¬ launch fileê³¼ yaml fileë¡œ ì—…ë°ì´íŠ¸í•˜ëŠ” ì‘ì—…ì„ í•´ë³´ì„¸ìš”\nROS Service Topicì— ì´ì–´ ROSì˜ í†µì‹  ë©”ì»¤ë‹ˆì¦˜ ë‘ë²ˆì§¸ë¡œ Serviceë¥¼ ë°°ì›Œë³´ê² ìŠµë‹ˆë‹¤.\nServiceê°€ ë™ì‘í•˜ëŠ” ë°©ì‹ì€ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.\nê·¸ë¦¼ê³¼ ê°™ì´ Client Nodeê°€ Server Nodeë¡œ requestë¥¼ ì£¼ë©´, í•´ë‹¹ requestì— ëŒ€ì‘í•˜ëŠ” ì ì ˆí•œ responseê°€ ë‹¤ì‹œ Clientì—ê²Œë¡œ ì „ë‹¬ë©ë‹ˆë‹¤. ì´ ê³¼ì •ì„ Service Callì´ë¼ê³  ë¶€ë¦…ë‹ˆë‹¤.\nimage from : docs.ros.org\ní•˜ë‚˜ì˜ Service Serverì—ëŠ” ì—¬ëŸ¬ Client Nodeê°€ request í•  ìˆ˜ ìˆì§€ë§Œ, ServerëŠ” ë™ì‹œì— ì—¬ëŸ¬ requestë¥¼ ì²˜ë¦¬í•˜ì§€ëŠ” ëª»í•©ë‹ˆë‹¤. ë‘ Nodeì—ì„œ ë™ì‹œì— requestê°€ ì™”ë‹¤ë©´, ì¡°ê¸ˆì´ë¼ë„ ë¨¼ì € í†µì‹ í•œ Nodeì˜ ì‘ì—…ì„ ìš°ì„  ì§„í–‰í•˜ê³ , ê·¸ë™ì•ˆ ë‹¤ë¥¸ NodeëŠ” ê¸°ë‹¤ë¦¬ê³  ìˆì–´ì•¼ í•©ë‹ˆë‹¤. image from : https://docs.ros.org/en/foxy/Tutorials/Services/Understanding-ROS2-Services.html\nTopicê³¼ ë¹„êµí•˜ì—¬ Serviceì˜ íŠ¹ì§•ì„ ì•Œì•„ë´…ì‹œë‹¤.\n1:1 í†µì‹  : Topic publishë¥¼ í•˜ë©´ ì—¬ëŸ¬ Nodeê°€ Subscribe ê°€ëŠ¥í•©ë‹ˆë‹¤. ë°˜ë©´, ServiceëŠ” requestê°€ ì˜¨ ëŒ€ìƒì—ê²Œë§Œ responseë¥¼ ì¤ë‹ˆë‹¤. ìˆœì°¨ì  í†µì‹  : Service ServerëŠ” ë™ì‹œì— ì—¬ëŸ¬ requestë¥¼ ì²˜ë¦¬í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. í˜„ì¬ ì‘ì—…ì¤‘ì¸ requestê°€ ì²˜ë¦¬ë  ë•Œ ê¹Œì§€ ë‹¤ë¥¸ requestëŠ” ê¸°ë‹¤ë¦¬ê³  ìˆì–´ì•¼ í•©ë‹ˆë‹¤. ë‹¨ë°œì„± : Topicì€ ëŒ€ë¶€ë¶„ ì§€ì†ì ìœ¼ë¡œ publishë¥¼ ì§„í–‰í•˜ëŠ” ë°˜ë©´, ServiceëŠ” 1íšŒì„± í†µì‹ ì…ë‹ˆë‹¤. ì‹¤ì œ ë¡œë´‡ í”„ë¡œê·¸ë¨ì—ì„œ ServiceëŠ” ì–´ë–»ê²Œ ì‚¬ìš©ë  ìˆ˜ ìˆì„ì§€, ì˜ˆì‹œë¥¼ í†µí•´ ì‚´í´ë´…ì‹œë‹¤.\nì˜ˆì œ íŒ¨í‚¤ì§€ ë¹Œë“œ cd ~/catkin_ws catkin build py_service_pkg source devel/setup.bash Service Client ì˜ˆì œ ì‹¤í–‰ - ì•„ë¥´í‚¤ë©”ë°ìŠ¤ ë‚˜ì„  # Terminal 1 roslaunch py_service_pkg empty_gazebo.launch # Terminal 2 rosrun py_service_pkg spawn_model_client.py ë°©ê¸ˆ ì‹¤í–‰í•œ ì˜ˆì‹œëŠ” Gazeboì—ê²Œ boxë¥¼ ë“±ì¥ì‹œì¼œë‹¬ë¼ê³  í•˜ëŠ” Service Clientë¥¼ í¬í•¨í•˜ê³  ìˆìŠµë‹ˆë‹¤.\nBoxê°€ ë“±ì¥í•˜ëŠ” ìœ„ì¹˜ë¥¼ ì•„ë˜ ì‚¬ì§„ê³¼ ê°™ì€ ìˆ˜ì‹ì— ë§ì¶”ì–´ ì„¤ì •í•œ ê²ƒ ë¿ì…ë‹ˆë‹¤.\nê·¸ëŸ¼, ì½”ë“œë¥¼ ë¶„ì„í•´ ë³¼ê¹Œìš”?\ní•„ìš”í•œ íŒŒì´ì¬ íŒ¨í‚¤ì§€ë“¤ì„ import í•©ë‹ˆë‹¤. import math import rospy import rospkg from geometry_msgs.msg import Pose from gazebo_msgs.srv import SpawnModel ì—¬ê¸°ì„œ ì¤‘ìš”í•œ ì ì€ msgì™€ srv ë¶€ë¶„ì…ë‹ˆë‹¤. topicì—ì„œ ì‚¬ìš©ë˜ëŠ” ë°ì´í„° íƒ€ì…ì´ Messageì˜€ê³ , í”„ë¡œê·¸ë˜ë° ì‹œì—ëŠ” msgë¡œ ì‚¬ìš©í•˜ì˜€ìŠµë‹ˆë‹¤.\nServiceì—ì„œëŠ” msgê°€ ì•„ë‹ˆë¼ srvë¼ëŠ” ë°ì´í„° íƒ€ì…ì„ ì‚¬ìš©í•©ë‹ˆë‹¤. image from : rsl.eth\nì´ srvëŠ” msgì™€ ë‹¤ë¥¸ ì ì´ ìˆëŠ”ë°, requestì™€ responseë¡œ ë‚˜ë‰˜ì–´ ìˆë‹¤ëŠ” ì ì…ë‹ˆë‹¤. \u0026mdash; í‘œì‹œë¥¼ ê¸°ì ìœ¼ë¡œ ìœ„ìª½ì€ Serverì—ê²Œ ì „ë‹¬í•˜ëŠ” request, ì•„ë˜ìª½ì€ Serverê°€ ë‹¤ì‹œ íšŒë‹µí•˜ëŠ” response ë¶€ë¶„ì…ë‹ˆë‹¤. ì´ë²ˆ ì˜ˆì‹œì—ì„œ ì‚¬ìš©í•œ gazebo_msgs/SpawnModelë„ ì•„ë˜ì™€ ê°™ì€ êµ¬ì¡°ë¥¼ ê°–ìŠµë‹ˆë‹¤. image from : docs.ros.org\ngazebo_msgs/SpawnModelë¥¼ ì‚´í´ë³´ë©´ íŒŒë€ ê¸€ìë¡œ geometry_msgs/Poseë¼ëŠ” ë¶€ë¶„ì´ ìˆìŠµë‹ˆë‹¤. ì´ì™€ ê°™ì´ srvëŠ” ë‹¤ë¥¸ msgë¥¼ í’ˆì„ ìˆ˜ë„ ìˆê³ , ì´ë ‡ê²Œ ë§Œë“  srvë¥¼ ë˜ë‹¤ì‹œ ë‹¤ë¥¸ srvì— í¬í•¨ì‹œí‚¬ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.\nì½”ë“œ êµ¬í˜„ ê´€ì ì—ì„œ, geometry_msgs/PoseëŠ” Modelì„ ë“±ì¥ì‹œí‚¬ ì´ˆê¸° ìœ„ì¹˜ë¥¼ ì§€ì •í•˜ëŠ”ë° ì‚¬ìš©ë©ë‹ˆë‹¤.\n# initial_pose initial_pose = Pose() initial_pose.position.x = 0.0 initial_pose.position.y = -1 initial_pose.position.z = 0.2 # z rotation -pi/2 to Quaternion initial_pose.orientation.z = -0.707 initial_pose.orientation.w = 0.707 Service Clientì˜ ìƒì„±ê³¼ ì‚¬ìš©ì€ ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤. spawn_model_prox = rospy.ServiceProxy(\u0026#34;gazebo/spawn_urdf_model\u0026#34;, SpawnModel) ... result = spawn_model_prox( entity_name, model_xml, robot_namespace, initial_pose, reference_frame ) rospy.ServiceProxy()ëŠ” 2ê°œì˜ ë§¤ê°œë³€ìˆ˜ë¥¼ í•„ìš”ë¡œ í•©ë‹ˆë‹¤.\nservice ì´ë¦„ service ë°ì´í„° íƒ€ì… (srv) ìƒì„±í•œ clientë¡œ requestë¥¼ í•˜ê¸° ìœ„í•´ì„œëŠ” ìƒì„±í•œ ì¸ìŠ¤í„´ìŠ¤ì— ë§¤ê°œë³€ìˆ˜ë¥¼ ì „ë‹¬í•˜ê¸°ë§Œ í•˜ë©´ ë©ë‹ˆë‹¤. ë§ˆì¹˜ í•¨ìˆ˜ í˜¸ì¶œì²˜ëŸ¼ ë§ì´ì§€ìš”. ì´ëŠ” ServiceProxy ë‚´ë¶€ì ìœ¼ë¡œ call ë©”ì†Œë“œê°€ êµ¬í˜„ë˜ì–´ìˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.\nservice callì˜ ê²°ê³¼ë¡œ resultê°€ ë°˜í™˜ë˜ë©°, ì˜ˆì‹œì—ì„œëŠ” ì„±ê³µ ì—¬ë¶€ë¥¼ ë°˜í™˜í•˜ë„ë¡ ë˜ì–´ ìˆìŠµë‹ˆë‹¤.\nì¶”ê°€ì ìœ¼ë¡œ, modelì„ ë¶ˆëŸ¬ì˜¤ëŠ” ë¶€ë¶„ì„ ê°„ë‹¨í•˜ê²Œ ì„¤ëª…í•˜ê³ ì í•©ë‹ˆë‹¤. # model_xml rospack = rospkg.RosPack() model_path = rospack.get_path(\u0026#34;py_service_pkg\u0026#34;) + \u0026#34;/urdf/\u0026#34; with open(model_path + model_name + \u0026#34;.urdf\u0026#34;, \u0026#34;r\u0026#34;) as xml_file: model_xml = xml_file.read().replace(\u0026#34;\\n\u0026#34;, \u0026#34;\u0026#34;) GazeboëŠ” urdfë¼ëŠ” íŒŒì¼ì„ ì „ë‹¬í•˜ë©´ í•´ë‹¹ íŒŒì¼ì„ ê¸°ë°˜ìœ¼ë¡œ ì‹œë®¬ë ˆì´ì…˜ì— ë¬¼ì²´ë¥¼ ë“±ì¥ì‹œì¼œì¤ë‹ˆë‹¤. ì´ urdfë¼ëŠ” ê²ƒì€ ë¡œë´‡ì„ í‘œí˜„í•˜ê¸° ìœ„í•œ ì¼ì¢…ì˜ ì•½ì†ëœ íŒŒì¼ í™•ì¥ëª…ì…ë‹ˆë‹¤.\nimage from : spart\nì„¸ìƒ ëª¨ë“  ë¡œë´‡ë“¤ì€ jointì™€ linkë¡œ í‘œí˜„ ê°€ëŠ¥í•©ë‹ˆë‹¤. ì´ëŸ¬í•œ ê°œë…ì„ ë°”íƒ•ìœ¼ë¡œ ë¡œë´‡ì˜ íŠ¹ì„±ì„ í…ìŠ¤íŠ¸ íŒŒì¼ë¡œ í‘œí˜„í•˜ëŠ” í˜•ì‹ì´ ë°”ë¡œ urdfì´ë©°, ì•„ë˜ì™€ ê°™ì´ ì—¬ëŸ¬ íƒœê·¸ì™€ ì†ì„±ì„ ì‚¬ìš©í•˜ì—¬ ì‘ì„± ê°€ëŠ¥í•©ë‹ˆë‹¤. \u0026lt;?xml version=\u0026#34;1.0\u0026#34;?\u0026gt; \u0026lt;robot name=\u0026#34;box\u0026#34;\u0026gt; \u0026lt;link name=\u0026#34;box\u0026#34;\u0026gt; \u0026lt;inertial\u0026gt; \u0026lt;mass value=\u0026#34;1\u0026#34;/\u0026gt; \u0026lt;!-- Inertia values were calculated to be consistent with the mass and geometry size, assuming a uniform density. --\u0026gt; \u0026lt;inertia ixx=\u0026#34;0.0108\u0026#34; ixy=\u0026#34;0\u0026#34; ixz=\u0026#34;0\u0026#34; iyy=\u0026#34;0.0083\u0026#34; iyz=\u0026#34;0\u0026#34; izz=\u0026#34;0.0042\u0026#34;/\u0026gt; \u0026lt;/inertial\u0026gt; \u0026lt;visual\u0026gt; \u0026lt;geometry\u0026gt; \u0026lt;box size=\u0026#34;.1 .2 .3\u0026#34;/\u0026gt; \u0026lt;/geometry\u0026gt; \u0026lt;/visual\u0026gt; \u0026lt;collision name=\u0026#34;box\u0026#34;\u0026gt; \u0026lt;geometry\u0026gt; \u0026lt;box size=\u0026#34;.1 .2 .3\u0026#34;/\u0026gt; \u0026lt;/geometry\u0026gt; \u0026lt;/collision\u0026gt; \u0026lt;/link\u0026gt; \u0026lt;/robot\u0026gt; ROS Service Commands gazebo/spawn_urdf_modelê³¼ ê°™ì€ serviceëŠ” gazebo_rosë¥¼ ì‚¬ìš©í•  ë•Œ ìë™ìœ¼ë¡œ í•¨ê»˜ ì‹¤í–‰ë©ë‹ˆë‹¤. ì´ë ‡ê²Œ í˜„ì¬ ì–´ë– í•œ serviceê°€ ì¡´ì¬í•˜ë©°, ë˜ êµ¬ì²´ì ì¸ ì •ë³´ëŠ” ì–´ë–»ê²Œ ì¡°íšŒí•˜ëŠ”ì§€ ì•Œì•„ë´…ì‹œë‹¤.\ní˜„ì¬ ì‚¬ìš© ê°€ëŠ¥í•œ ëª¨ë“  serviceë¥¼ ì¡°íšŒí•´ë´…ì‹œë‹¤. $ rosservice list /delete_entity /gazebo/describe_parameters /gazebo/get_parameter_types /gazebo/get_parameters /gazebo/list_parameters /gazebo/set_parameters ... ë¦¬ëˆ…ìŠ¤ì˜ grep ëª…ë ¹ì–´ë¥¼ í•¨ê»˜ ì‚¬ìš©í•´ ë³´ì„¸ìš”.\níŠ¹ì • serviceê°€ ì–´ë–¤ srv íƒ€ì…ì„ ì‚¬ìš©í•˜ëŠ”ì§€ ê²€ìƒ‰í•˜ê³  ì‹¶ë‹¤ë©´ ë‹¤ìŒ ì»¤ë©˜ë“œ ë¼ì¸ì„ ì‚¬ìš©í•©ë‹ˆë‹¤. $ rosservice type /gazebo/spawn_urdf_model gazebo_msgs/SpawnModel ì´ë ‡ê²Œ ê²€ìƒ‰ëœ srvëŠ” rossrv showì™€ ê²°í•©í•  ë•Œ ë”ìš± ì§„ê°€ë¥¼ ë°œíœ˜í•©ë‹ˆë‹¤. $ rossrv show `rosservice type /gazebo/spawn_urdf_model` string model_name string model_xml string robot_namespace geometry_msgs/Pose initial_pose geometry_msgs/Point position float64 x float64 y float64 z geometry_msgs/Quaternion orientation float64 x float64 y float64 z float64 w string reference_frame --- bool success string status_message íŠ¹ì • srv íƒ€ì…ì— ëŒ€í•œ ìì„¸í•œ ì •ë³´ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ì¡°íšŒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. $ rosservice info /gazebo/spawn_urdf_model Node: /gazebo URI: rosrpc://192.168.55.236:55405 Type: gazebo_msgs/SpawnModel Args: model_name model_xml robot_namespace initial_pose reference_frame gazebo_rosì—ì„œ ì œê³µí•˜ëŠ” ë‹¤ì–‘í•œ serviceë“¤ì´ ìˆìŠµë‹ˆë‹¤. rosservice ì»¤ë©˜ë“œë¥¼ ì‚¬ìš©í•˜ì—¬ ì¡°íšŒí•´ë³´ê³  ì—¬ëŸ¬ë¶„ë“¤ë§Œì˜ Applicationì„ ìƒê°í•´ ë³´ì„¸ìš”.\nService Server ì˜ˆì œ ì‹¤í–‰ - ê¸´ê¸‰ ì •ì§€ # Terminal 1 roslaunch smb_gazebo smb_gazebo.launch # Terminal 2 rosrun py_service_pkg emergency_stop.py # Terminal 3 rqt ë‘ë²ˆì§¸ Node ì‹¤í–‰ ì‹œ, ë¡œë´‡ì´ ì›ì„ ê·¸ë¦¬ë©° ì›€ì§ì´ê¸° ì‹œì‘í•©ë‹ˆë‹¤. ì„¸ë²ˆì§¸ ëª…ë ¹ì–´ë¥¼ í†µí•´ ë“±ì¥í•˜ëŠ” rqtëŠ” ì•„ë˜ì™€ ê°™ì´ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤. ë¡œë´‡ì—ê²Œ ê¸´ê¸‰ ì •ì§€ ëª…ë ¹ì„ ë‚´ë ¤ë³´ê² ìŠµë‹ˆë‹¤. ì‹¤ì œ ë¡œë´‡ ê°œë°œì‹œì—ë„ ServiceëŠ” ì´ë ‡ê²Œ ë‹¨ë°œì„±ì´ê³ , ë¹ ë¥´ê²Œ ì‹¤í–‰ë˜ì–´ì•¼ í•˜ëŠ” ë™ì‘ì— ì£¼ë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤. ë”ë¶ˆì–´, ì§€ê¸ˆ ì‹¤í–‰í•œ ì˜ˆì‹œê°€ Service Serverì„ì„ ë‹¤ì‹œ í•œ ë²ˆ ìƒê¸°ì‹œì¼œë“œë¦½ë‹ˆë‹¤.\nimage from : rsl.eth\nì½”ë“œë¥¼ ë¶„ì„í•´ ë´…ì‹œë‹¤.\npy_service_pkg/scripts/emergency_stop.py from geometry_msgs.msg import Twist from std_srvs.srv import SetBool, SetBoolResponse ì´ë²ˆì— ì‚¬ìš©í•˜ëŠ” ë°ì´í„° íƒ€ì…ì€ í¬ê²Œ 2 ì¢…ë¥˜ì…ë‹ˆë‹¤.\në¡œë´‡ ì œì–´ topicì— ì‚¬ìš©ë˜ëŠ” Twist ê¸´ê¸‰ ì •ì§€ serviceì— ì‚¬ìš©ë  SetBool image from : docs.ros.org\nSetBoolResponseì´ë¼ëŠ” ê²ƒì€ SetBool srv ì¤‘ response ë¶€ë¶„ì— í•´ë‹¹í•©ë‹ˆë‹¤. ê¸°ë³¸ ë°ì´í„° íƒ€ì… ì´ë¦„ + Responseë¥¼ ë¶™ì—¬ì£¼ê¸°ë§Œ í•˜ë©´ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤.\nROSì˜ msg, srvëŠ” ë‹¤ì–‘í•œ ì–¸ì–´ì™€ ìƒí™©ì„ ê³ ë ¤í•˜ë„ë¡ ë§Œë“¤ì–´ì ¸ ìˆìœ¼ë©°, ROS 2ì—ì„œëŠ” IDLì´ë¼ëŠ” ì´ë¦„ìœ¼ë¡œ ë”ìš± ë°œì „í•˜ì˜€ìŠµë‹ˆë‹¤. ì´í›„ì˜ ì»¤ìŠ¤í…€ ë°ì´í„° íƒ€ì… ì œì‘ì„ í†µí•´ ì´ ê³¼ì •ì„ ë‹¤ì‹œ ì‚´í´ë´…ì‹œë‹¤.\në‹¤ìŒìœ¼ë¡œ í†µì‹  ë©”ì»¤ë‹ˆì¦˜ì„ ìƒì„±í•©ë‹ˆë‹¤. class EmergencyStopNode(object): def __init__(self): self.cmd_vel_pub_ = rospy.Publisher(\u0026#34;cmd_vel\u0026#34;, Twist, queue_size=10) self.stop_server_ = rospy.Service(\u0026#34;emergency_stop\u0026#34;, SetBool, self.stop_cb) ë¡œë´‡ ì œì–´ë¥¼ ìœ„í•œ topic publisherì™€ service serverë¥¼ ìƒì„±í•©ë‹ˆë‹¤.\nrospy.Service()ë¥¼ í†µí•´ Service Serverë¥¼ ìƒì„±í•  ìˆ˜ ìˆìœ¼ë©° ë‹¤ìŒê³¼ ê°™ì€ ë§¤ê°œë³€ìˆ˜ë¥¼ í•„ìš”ë¡œí•©ë‹ˆë‹¤.\nService ì´ë¦„ srv íƒ€ì… Clientë¡œë¶€í„° requestê°€ ì˜¬ ì‹œ ì‹¤í–‰ë˜ëŠ” callback í•¨ìˆ˜ callback í•¨ìˆ˜ëŠ” ì¼ì „ subscriberì—ì„œ ì‚´í´ë³¸ ë°” ìˆìŠµë‹ˆë‹¤. service serverì˜ callback í•¨ìˆ˜ëŠ” í•­ìƒ ë§¤ê°œë³€ìˆ˜ë¡œ request srvë¥¼ ë°›ìŠµë‹ˆë‹¤. ê·¸ë¦¬ê³  return ê°’ì€ í•­ìƒ responseê°€ ë©ë‹ˆë‹¤.\ndef stop_cb(self, request): ... return self.response_ request ë°ì´í„° ì¤‘ boolean ê°’ì„ ê°–ëŠ” dataì˜ true / false ì—¬ë¶€ì— ë”°ë¼ ë¡œë´‡ì˜ ì •ì§€ ì—¬ë¶€ê°€ ê²°ì •ë©ë‹ˆë‹¤. if request.data is True: self.twist_msg_.linear.x = 0.0 self.twist_msg_.angular.z = 0.0 self.cmd_vel_pub_.publish(self.twist_msg_) self.response_.success = True self.response_.message = \u0026#34;Successfully Stopped\u0026#34; else: self.response_.success = False self.response_.message = \u0026#34;Stop Failed\u0026#34; ë§ˆì§€ë§‰ì— ì‚¬ìš©í•œ rqtì˜ service callerëŠ” ë³„ë„ì˜ í”„ë¡œê·¸ë˜ë°ì´ë‚˜ ë³µì¡í•œ í„°ë¯¸ë„ ëª…ë ¹ì–´ ì—†ì´ë„ ì†ì‰½ê²Œ serviceë¥¼ ë‹¤ë£° ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ROSì˜ íˆ´ì…ë‹ˆë‹¤.\nì§€ê¸ˆê¹Œì§€ ROS Serviceì— ëŒ€í•´ ë°°ì›Œë³´ì•˜ìŠµë‹ˆë‹¤. Topicê³¼ ë”ë¶ˆì–´ ë§ì´ ì‚¬ìš©ë˜ëŠ” í†µì‹  ë©”ì»¤ë‹ˆì¦˜ì´ë¯€ë¡œ ì˜ ìˆ™ì§€í•˜ê³  ë³µìŠµí•˜ì‹œê¸° ë°”ëë‹ˆë‹¤.\nì°¸ê³ ìë£Œ\nhttps://rsl.ethz.ch/education-students/lectures/ros.html https://ko.wikipedia.org/wiki/ì•„ë¥´í‚¤ë©”ë°ìŠ¤_ì™€ì„  https://docs.ros.org/en/foxy/index.html http://wiki.ros.org/Services "
},
{
	"uri": "/kr/ros_basic_noetic/lecture7/",
	"title": "Lecture7 - Rqt Tools and rosbag, ROS Time",
	"tags": [],
	"description": "",
	"content": " ê°•ì˜ ì´ˆë°˜, ë‹¤ì–‘í•œ rqt toolë“¤ì„ ì‚´í´ë³¸ ë°” ìˆìŠµë‹ˆë‹¤. ì´ì œëŠ” Topicê³¼ Serviceì— ëª¨ë‘ ìµìˆ™í•´ì¡Œê¸° ë•Œë¬¸ì—, rqtì˜ ë§ì€ ê¸°ëŠ¥ë“¤ì„ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ í•œ ë²ˆ rqtë¥¼ ì‚´í´ë³´ë©´ì„œ í¸ë¦¬í•œ íˆ´ë“¤ì˜ ì‚¬ìš©ë²•ì„ ìµí˜€ë´…ì‹œë‹¤.\nMessage Publisher \u0026amp; Topic Monitor ê°•ì˜ìë¥¼ ë”°ë¼ ë‹¤ìŒê³¼ ê°™ì´ í™”ë©´ì„ êµ¬ì„±í•©ë‹ˆë‹¤.\nplugins â‡’ topics â‡’ Message Publisher pulgins â‡’ topics â‡’ Topic Monitor message publisherë¥¼ ì‚¬ìš©í•˜ë©´ ì½”ë”© ì—†ì´ cmd_velì„ publishê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤. Topic Msgì— ì›í•˜ëŠ” ë°ì´í„°ë¥¼ ì±„ì›Œë„£ì€ ë’¤, ì£¼ê¸°ë¥¼ ì„ íƒí•œ í›„ ì²´í¬ë°•ìŠ¤ë¥¼ í´ë¦­í•˜ë©´ ë¡œë´‡ì´ ì›€ì§ì´ê¸° ì‹œì‘í•©ë‹ˆë‹¤. Topic Monitorë¥¼ ì‚¬ìš©í•˜ë©´, ì—¬ëŸ¬ ë°ì´í„°ë“¤ì„ íš¨ê³¼ì ìœ¼ë¡œ ëª¨ë‹ˆí„°ë§ ê°€ëŠ¥í•©ë‹ˆë‹¤. Topic Publisherì™€ ë™ì¼í•˜ê²Œ ì²´í¬ë°•ìŠ¤ë¥¼ ëˆŒëŸ¬ topicì„ ì„ íƒí•œ ë’¤, ë³€í•˜ëŠ” ë°ì´í„°ë¥¼ í™•ì¸í•´ë´…ì‹œë‹¤. ì½”ë”© ì—†ì´ ê°„ë‹¨íˆ ê°’ì˜ í™•ì¸ê³¼ ë™ì‘ ì—¬ë¶€ë¥¼ í™•ì¸í•  ìˆ˜ ìˆëŠ” íˆ´ë“¤ì´ì—ˆìŠµë‹ˆë‹¤.\nRQT Multiplot ìˆ˜ì¹˜ ë°ì´í„°ë¥¼ ê·¸ë˜í”„ë¡œ ë³´ê³ ì‹¶ì€ ê²½ìš° rqtì˜ multiplotì´ ìœ ìš©í•˜ê²Œ ì‚¬ìš©ë©ë‹ˆë‹¤.\nrosrun rqt_multiplot rqt_multiplot /odom topicì˜ X,Y positionì„ ê¸°ì¤€ìœ¼ë¡œ ê·¸ë˜í”„ë¥¼ ê·¸ë ¤ë³´ë„ë¡ í•˜ê² ìŠµë‹ˆë‹¤. ì•„ë˜ì˜ gifë¥¼ í†µí•´ ëª¨ë“  ê³¼ì •ì„ ê¸°ë¡í•˜ì˜€ìœ¼ë‹ˆ ì°¨ê·¼ì°¨ê·¼ ë”°ë¼ì™€ì£¼ì„¸ìš”.\nRQT Console ì§€ê¸ˆê¹Œì§€ ROSì˜ ì½˜ì†” ë¡œê·¸ë¥¼ ìœ„í•´ rospy.loginfo()ë¥¼ ì‚¬ìš©í•˜ì˜€ìŠµë‹ˆë‹¤. ì‚¬ì‹¤ ROSì—ëŠ” loginfoë§ê³ ë„ ë‹¤ì–‘í•œ levelì˜ logger levelì´ ì¡´ì¬í•©ë‹ˆë‹¤. ì‹¤ìŠµì„ í†µí•´ ì‚´í´ë´…ì‹œë‹¤.\nrospy logger level # Terminal 1 roscore # Terminal 2 rosrun my_first_package logger_level.py ì½”ë“œì˜ ë‚´ìš©ê³¼ í•¨ê»˜ ì˜ˆì‹œë¥¼ ì‚´í´ë´…ì‹œë‹¤. def hello_du(self, event=None): hello_du = f\u0026#34;hello du {rospy.get_time()}, counter: {self.counter_}\u0026#34; rospy.logdebug(hello_du) rospy.loginfo(hello_du) rospy.logwarn(hello_du) rospy.logerr(hello_du) rospy.logfatal(hello_du) self.counter_ += 1 ROSëŠ” ì´ 5ê°€ì§€ì˜ logger levelì„ ê°–ì¶”ê³  ìˆìœ¼ë©°, Debug ë¶€í„° Fatalë¡œ ê°ˆìˆ˜ë¡ ë” ë†’ì€ levelì„ ê°–ëŠ”ë‹¤ê³  ë³´ì‹œë©´ ë©ë‹ˆë‹¤. Info level ë¶€í„° ì½˜ì†” ì¶œë ¥ì´ ì´ë£¨ì–´ì§€ë©°, Pythonì˜ stdoutë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.\nimage from : 51CTO ìƒí™©ì— ë”°ë¼ ê°ê¸° ë‹¤ë¥¸ levelì˜ logë¥¼ ì‚¬ìš©í•˜ë„ë¡ í•˜ë©´, ì‹¤ì œ ë¡œë´‡ ê°œë°œì‹œì—ë„ í° ë„ì›€ì´ ë©ë‹ˆë‹¤.\nrqtì—ëŠ” ì´ëŸ¬í•œ ë‹¤ì–‘í•œ levelì„ ê°–ëŠ” rosì˜ logë¥¼ í•„í„°ë§í•˜ëŠ” rqt consoleì´ë¼ëŠ” íˆ´ì´ ìˆìŠµë‹ˆë‹¤. ì‚¬ìš© ë°©ë²•ì„ í•¨ê»˜ ì•Œì•„ë´…ì‹œë‹¤.\nê·¸ ë°–ì—ë„ ìˆ˜ë§ì€ rqt ë„êµ¬ë“¤ì´ ìˆì§€ë§Œ, ëª¨ë‘ ì‚´í´ë³´ëŠ” ëŒ€ì‹  ë§í¬ë¡œ ëŒ€ì²´í•˜ê² ìŠµë‹ˆë‹¤. \u0026gt; ROS Wiki\nROS Bags rqt íˆ´ì— ì†í•˜ì§€ëŠ” ì•Šì§€ë§Œ, ê°œë°œ ì‹œ ë§¤ìš° ìœ ìš©í•œ ROSì˜ ê¸°ëŠ¥ì„ í•˜ë‚˜ ë” ì†Œê°œì‹œì¼œë“œë¦¬ê³ ì í•©ë‹ˆë‹¤.\nrosbagì€ í”„ë¡œê·¸ë¨ ë™ì‘ ì¤‘ ë°œìƒí•˜ëŠ” message ë°ì´í„°ë¥¼ ê¸°ë¡í•˜ê³  ë³µê¸°í•  ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” íˆ´ì…ë‹ˆë‹¤. ë¡œë´‡ ì•Œê³ ë¦¬ì¦˜ì„ ê°œë°œí•  ë•Œ, ê°™ì€ ìƒí™©ì— ëŒ€í•´ ì„±ëŠ¥ì„ ë¹„êµí•˜ëŠ” ê²½ìš°, í˜¹ì€ êµìœ¡ ëª©ì ìœ¼ë¡œ ë°ì´í„°ì…‹ì„ ì œê³µí•˜ëŠ” ê²½ìš° ë“±ì— ë§¤ìš° ìœ ìš©í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nrosbag ì‚¬ìš©ë²•ì„ í•¨ê»˜ ì‹¤ìŠµí•´ë³´ê² ìŠµë‹ˆë‹¤.\nsmb gazeboë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤. roslaunch smb_gazebo smb_gazebo.launch world:=big_map_summer_school rosbagì˜ ì‚¬ìš© ì‹œ ì—¬ëŸ¬ ì˜µì…˜ë“¤ì´ ìˆìŠµë‹ˆë‹¤. -o ì˜µì…˜ìœ¼ë¡œ rosbagì˜ ì´ë¦„ì„ ì§€ì •í•©ë‹ˆë‹¤. -a ì˜µì…˜ ì‚¬ìš© ì‹œ ëª¨ë“  topicì„ ì €ì¥í•©ë‹ˆë‹¤. rosbagì˜ ì¢…ë£ŒëŠ” ctrl + cë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. rosbag record -o first_rosbag /scan /tf /tf_static /tfì™€ /tf_staticì€ ì™œ ì €ì¥í•˜ëŠ” ê²ƒì¼ê¹Œìš”? ìƒê°í•´ë´…ì‹œë‹¤.\nrosbag infoë¥¼ í†µí•´ ì €ì¥ì„ ë§ˆì¹œ rosbagì˜ ì •ë³´ë¥¼ ì¡°íšŒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. $ rosbag info first_rosbag_\u0026lt;time-format-sth\u0026gt;.bag path: first_rosbag_2022-12-27-15-51-55.bag version: 2.0 duration: 4.8s start: Jan 01 1970 09:07:35.31 (455.31) end: Jan 01 1970 09:07:40.12 (460.12) size: 83.8 KB messages: 49 compression: none [1/1 chunks] types: sensor_msgs/LaserScan [90c7ef2dc6895d81024acba2ac42f369] topics: /scan 49 msgs : sensor_msgs/LaserScan ì €ì¥ ì™„ë£Œëœ rosbagì„ ë‹¤ì‹œ ë³µê¸°í•´ë´…ì‹œë‹¤. $ rosbag play first_rosbag_2022-12-27-15-56-23.bag [ INFO] [1672124296.822088842]: Opening first_rosbag_2022-12-27-15-56-23.bag Waiting 0.2 seconds after advertising topics... done. ... rvizë¥¼ í†µí•´ ì‹œê°í™”ê¹Œì§€ í•´ë´…ì‹œë‹¤. rosbagì€ ê¸°ë³¸ì ìœ¼ë¡œ topicì„ ì €ì¥í•©ë‹ˆë‹¤.\nrviz í™”ë©´ì„ ì‚´í´ë³´ë©´ ì•„ë˜ì™€ ê°™ì€ Warningì´ ë°œìƒí•  ê²ƒì…ë‹ˆë‹¤. ê·¸ëŸ°ë° ì´ ë¬¸êµ¬, ìµìˆ™í•˜ì§€ ì•Šë‚˜ìš”?\n[ WARN] [1672124550.336965013]: TF_REPEATED_DATA ignoring data with redundant timestamp for frame LF_WHEEL at time 472.056000 according to authority unknown_publisher [ WARN] [1672124550.336981403]: TF_REPEATED_DATA ignoring data with redundant timestamp for frame LH_WHEEL at time 472.056000 according to authority unknown_publisher [ WARN] [1672124550.336991753]: TF_REPEATED_DATA ignoring data with redundant timestamp for frame RF_WHEEL at time 472.056000 according to authority unknown_publisher [ WARN] [1672124550.337003964]: TF_REPEATED_DATA ignoring data with redundant timestamp for frame RH_WHEEL at time 472.056000 according to authority unknown_publisher [ WARN] [1672124550.356035553]: TF_REPEATED_DATA ignoring data with redundant timestamp for frame base_link at time 472.076000 according to authority unknown_publisher [ WARN] [1672124550.356945321]: TF_REPEATED_DATA ignoring data with redundant timestamp for frame LF_WHEEL at time 472.076000 according to authority unknown_publisher [ WARN] [1672124550.356960231]: TF_REPEATED_DATA ignoring data with redundant timestamp for frame LH_WHEEL at time 472.076000 according to authority unknown_publisher [ WARN] [1672124550.356970561]: TF_REPEATED_DATA ignoring data with redundant timestamp for frame RF_WHEEL at time 472.076000 according to authority unknown_publisher ROS Time ì¼ì „ ê°•ì˜ì—ì„œ ì–¸ê¸‰í•œ ë°”ì™€ ê°™ì´, ì´ë²ˆ ê°•ì˜ì— ROSì˜ ì‹œê°„ ì²´ê³„ì— ëŒ€í•´ì„œ ë‹¤ì¡ê³  ê°€ê³ ì í•©ë‹ˆë‹¤.\nrospy.loginfoë¥¼ í†µí•´ ì½˜ì†”ì— ì¶œë ¥ë˜ëŠ” ì‹œê°„ê³¼ ê°™ì´ ROSì—ì„œ ê¸°ë³¸ì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ì‹œê°„ì˜ ê¸°ì¤€ì€ PCì˜ Clockì…ë‹ˆë‹¤. (ì´ë¥¼ wall timerë¼ê³  ë¶€ë¦…ë‹ˆë‹¤.) ROS í”„ë¡œê·¸ë¨ì€ ì¼ì • ì£¼ê¸°ë¥¼ ê°–ê³  ë¬´í•œíˆ ë°˜ë³µë˜ëŠ” ìƒí™©ì´ ì¦ìŠµë‹ˆë‹¤. ì´ë•Œ ì‚¬ìš©í•˜ëŠ” ì£¼ê¸°ê°€ ì •í™•í•´ì•¼ í•  ê²ƒì…ë‹ˆë‹¤. ìš°ë¦¬ëŠ” 2023ë…„ 00ì›” 00ì¼ì´ë¼ëŠ” ì‹œê°„ì²´ê³„ë¥¼ ì‚¬ìš©í•˜ì§€ë§Œ, Gazeboì™€ ê°™ì€ ì‹œë®¬ë ˆì´ì…˜ íˆ´ì€ ì‹œì‘ë˜ëŠ” ì‹œì ì´ ê³§ 0ë¶„ 0ì´ˆê°€ ë©ë‹ˆë‹¤. ì´ëŸ¬í•œ ì‹œê°„ì˜ ì°¨ì´ë¡œ ì¸í•´ warningê³¼ errorê°€ ë¹ˆë²ˆí•˜ê²Œ ë°œìƒí•©ë‹ˆë‹¤. ê·¸ëŸ¼, ì‹¤ì§ˆì ìœ¼ë¡œ ROSì—ì„œ ì‹œê°ê³¼ ì£¼ê¸°, ì‹œê°„ì€ ì–´ë–»ê²Œ ë‹¤ë£¨ëŠ”ì§€ ì˜ˆì‹œì™€ í•¨ê»˜ python ì½”ë“œë¥¼ ì‚´í´ë´…ì‹œë‹¤.\nros_time.py $ rosrun my_first_package ros_time.py [INFO] [1672127477.793024]: Current time 1672127477 792964935 [INFO] [1672127477.793593]: Current time to_sec 1672127477 [INFO] [1672127477.794082]: Past time 1672127477 292964935 [INFO] [1672127477.893132]: Current time 1672127477 893082141 [INFO] [1672127477.893684]: Current time to_sec 1672127477 [INFO] [1672127477.894148]: Past time 1672127477 393082141 ... ì½”ë“œëŠ” ë‹¤ìŒ ìœ„ì¹˜ì—ì„œ í™•ì¸ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. \u0026gt; https://github.com/RB2023ROS/du2023-ros1/blob/main/my_first_package/scripts/ros_time.py\nrospy Time instance rospyì—ì„œëŠ” Timeì´ë¼ëŠ” í´ë˜ìŠ¤ë¡œ ì‹œê°„ì„ í‘œí˜„í•©ë‹ˆë‹¤. ê°€ì¥ ë§ì´ ì‚¬ìš©ë˜ëŠ” í˜„ì¬ ì‹œê°„ì€ rospy.Time.now() ë¡œ íŒŒì•…í•  ìˆ˜ ìˆìœ¼ë©°, ì´ëŠ” secì™€ nsecë“±ì˜ í´ë˜ìŠ¤ ë³€ìˆ˜ë¥¼ ê°–ê³  ìˆìŠµë‹ˆë‹¤.\ndef hello_du(self, event=None): now = rospy.Time.now() seconds = now.to_sec() rospy.loginfo(\u0026#34;Current time %i %i\u0026#34;, now.secs, now.nsecs) rospy.loginfo(\u0026#34;Current time to_sec %i\u0026#34;, seconds) rospy Time Duration ì‹œê°„ ê°„ê²©ì„ ë‚˜íƒ€ë‚´ëŠ” í´ë˜ìŠ¤ë¡œ Durationì´ ì‚¬ìš©ë˜ë©°, Time ì¸ìŠ¤í„´ìŠ¤ì™€ +,- ì—°ì‚°ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.\ndelta = rospy.Duration(0.5) past = now - delta rospy.loginfo(\u0026#34;Past time %i %i\u0026#34;, past.secs, past.nsecs) rospy Rate while loopì™€ Rateë¥¼ ì‚¬ìš©í•˜ì—¬ ì¼ì • ì£¼ê¸°ë‹¤ë§ˆ ë°˜ë³µë˜ëŠ” êµ¬í˜„ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. ì´ë•Œ ì‚¬ìš©ë˜ëŠ” ì‹œê°„ ê¸°ì¤€ì€ PCì˜ Clockì…ë‹ˆë‹¤.\nr = rospy.Rate(10) # 10hz while not rospy.is_shutdown(): time_ex.hello_du() r.sleep() Topic vs Service and Action ì§€ê¸ˆê¹Œì§€ ROSì˜ í†µì‹  ë©”ì»¤ë‹ˆì¦˜ìœ¼ë¡œ Topicê³¼ Serviceì— ëŒ€í•´ ë°°ì›Œë³´ì•˜ìŠµë‹ˆë‹¤. ê·¸ëŸ°ë°, ì‚¬ì‹¤ ROSì˜ í†µì‹  ë©”ì»¤ë‹ˆì¦˜ì—ëŠ” Actionì´ë¼ëŠ” í•œê°€ì§€ê°€ ë” ìˆìŠµë‹ˆë‹¤.\nActionì€ Topicê³¼ Service ëª¨ë‘ì˜ íŠ¹ì§•ì„ ê°–ê³  ìˆëŠ” ì§„ë³´ëœ í†µì‹  ë©”ì»¤ë‹ˆì¦˜ì…ë‹ˆë‹¤. Actionì€ Feedbackì´ë¼ëŠ” ê²ƒìœ¼ë¡œ Goal Request ì´í›„ ê³„ì†ì ì¸ ë°ì´í„° ì†¡ìˆ˜ì‹ ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. Actionì€ ROS 2 ê°•ì˜ì—ì„œ ì‚´í´ë³¼ ì˜ˆì •ìœ¼ë¡œ ì–´ë–»ê²Œ ì‚¬ìš©ë  ìˆ˜ ìˆì„ì§€ í•œë²ˆ ê³ ë¯¼í•´ë³´ì„¸ìš”.\nimage from : docs.rog.org ì°¸ê³ ìë£Œ\nhttp://wiki.ros.org/rospy/Overview/Time https://docs.ros.org/en/foxy/index.html "
},
{
	"uri": "/kr/ros_basic_noetic/lecture8/",
	"title": "Lecture8 - Deal with Open Source Projects, Custom Interfaces",
	"tags": [],
	"description": "",
	"content": "Deal with Open Source Projects ì´ë²ˆ ì‹œê°„ì—ëŠ” ì˜¤í”ˆ ì†ŒìŠ¤ í”„ë¡œì íŠ¸ë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ë°°ì›Œë³´ê² ìŠµë‹ˆë‹¤. ë³´ë‹¤ ì‹¤ì§ˆì ì¸ ì‚¬ìš© ë°©ë²•ì„ ë³´ì—¬ë“œë¦¬ê¸° ìœ„í•´ ì € ë˜í•œ ì—¬ëŸ¬ë¶„ë“¤ê³¼ ê°™ì€ ìƒí™©ì—ì„œ ì²˜ìŒë¶€í„° í•˜ë‚˜ì”© ê°™ì´ í•´ë³´ê² ìŠµë‹ˆë‹¤.\nì˜¤ëŠ˜ ë°ëª¨í•˜ê³ ì í•˜ëŠ” ë¡œë´‡ ì†Œí”„íŠ¸ì›¨ì–´ëŠ” ë“œë¡  ì‹œë®¬ë ˆì´ì…˜ì…ë‹ˆë‹¤. ì§€ê¸ˆê¹Œì§€ ì§€ìƒì„ ì›€ì§ì´ëŠ” ë°”í€´ ë¡œë´‡ë§Œì„ ë‹¤ë£¨ì—ˆê¸° ë•Œë¬¸ì— ìƒˆë¡œìš´ í”Œë ›í¼ì„ ë™ì‘ì‹œì¼œë³´ê³ ì í•©ë‹ˆë‹¤.\ní•­ìƒ ì‹œì‘ì€ êµ¬ê¸€ë§ë¶€í„°!! ê²€ìƒ‰ ê²°ê³¼ ì›í•˜ëŠ” íŒ¨í‚¤ì§€ë¥¼ ì°¾ì€ ê²ƒ ê°™ìŠµë‹ˆë‹¤. \u0026gt; https://github.com/RAFALAMAO/hector-quadrotor-noetic ëª©ì ì— ë¶€í•©í•˜ëŠ” ì˜¤í”ˆì†ŒìŠ¤ë¥¼ ì°¾ê¸° ìœ„í•´ì„œ ì•„ë˜ì™€ ê°™ì€ ê¸°ë³¸ì ì¸ ë‚´ìš©ì„ ê³ ë ¤í•´ì•¼ í•©ë‹ˆë‹¤.\në²„ì „ í˜¸í™˜ì„± êµ¬ì²´ì ì¸ ëª©í‘œì— ë¶€í•©í•˜ëŠ”ì§€ Star, Forkë¥¼ í†µí•´ ê²€ì¦ëœ ì†ŒìŠ¤ì½”ë“œì„ì„ í™•ì¸ Issueë¥¼ í†µí•´ ì‚¬ìš© ì¤‘ ë¬¸ì œê°€ ìˆì§€ëŠ” ì•Šì€ì§€ Readmeë¥¼ ë”°ë¼ package buildë¥¼ ì§„í–‰í•˜ê³  ìµœì´ˆ ì‹¤í–‰ì„ í•´ë³´ê² ìŠµë‹ˆë‹¤.\n# Terminal 1 roslaunch hector_quadrotor_gazebo quadrotor_empty_world.launch # Terminal 2 rosrun hector_ui ui_hector_quad.py ë™ì‘ì—ëŠ” ë¬¸ì œê°€ ì—†ì–´ë³´ì…ë‹ˆë‹¤. ê·¸ëŸ¼ ì´ í”„ë¡œì íŠ¸ê°€ ë‚´ë¶€ì ìœ¼ë¡œ ì–´ë–»ê²Œ êµ¬í˜„ë˜ì–´ìˆëŠ”ì§€ ë¶„ì„í•´ë´…ì‹œë‹¤.\nrqt_graph ë¡œë´‡ì˜ ìœ„ì¹˜ë¥¼ ì•Œë ¤ì£¼ëŠ” topicì¸ /ground_truth/stateì™€ /ground_truth_to_tf/poseë¥¼ íŒŒì•…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. gazeboì—ì„œ ë¬¼ì²´ì˜ ì ˆëŒ€ì ì¸ ìœ„ì¹˜ë¥¼ ì•Œë ¤ì£¼ê¸° ë•Œë¬¸ì— ì´ë¥¼ ground truthë¼ê³  ë¶€ë¥´ê³  ìˆìŠµë‹ˆë‹¤.\nì´ë²ˆì—ëŠ” ì¡°ì¢… í”„ë¡œê·¸ë¨ì˜ ì†ŒìŠ¤ì½”ë“œë¥¼ í™•ì¸í•´ë´…ì‹œë‹¤. (hector_quadrotor_noetic/hector_ui/srcì— ìœ„ì¹˜í•˜ê³  ìˆìŠµë‹ˆë‹¤.) #Callback de pose y orientacion simulador def pose_callback(data): x_p.set(\u0026#34;{0:.2f}\u0026#34;.format(data.pose.pose.position.x)) y_p.set(\u0026#34;{0:.2f}\u0026#34;.format(data.pose.pose.position.y)) z_p.set(\u0026#34;{0:.2f}\u0026#34;.format(data.pose.pose.position.z)) def rot_callback(data): z_o.set(\u0026#34;{0:.2f}\u0026#34;.format( math.degrees(quaterionToRads(data)) )) rospy.init_node(\u0026#39;HectorQ_GUI\u0026#39;, anonymous=False) #Subscribers posicionLider_sub = rospy.Subscriber(\u0026#34;/ground_truth/state\u0026#34;, Odometry , pose_callback) orientaLider_sub = rospy.Subscriber(\u0026#34;/ground_truth_to_tf/pose\u0026#34;, PoseStamped , rot_callback) ë‘ ì¢…ë¥˜ì˜ subscriberê°€ ì¡´ì¬í•˜ë©° ê°ê° UIì˜ ìƒíƒœë¥¼ ì—…ë°ì´íŠ¸í•˜ëŠ” ê²ƒ ê°™ì´ ë³´ì…ë‹ˆë‹¤.\nì´ë²ˆì—ëŠ” launch fileì„ ë¶„ì„í•´ë´…ì‹œë‹¤ - hector_quadrotor/hector_quadrotor_gazebo/launch/quadrotor_empty_world.launch \u0026lt;?xml version=\u0026#34;1.0\u0026#34;?\u0026gt; \u0026lt;launch\u0026gt; \u0026lt;arg name=\u0026#34;paused\u0026#34; default=\u0026#34;false\u0026#34;/\u0026gt; \u0026lt;arg name=\u0026#34;use_sim_time\u0026#34; default=\u0026#34;true\u0026#34;/\u0026gt; \u0026lt;arg name=\u0026#34;gui\u0026#34; default=\u0026#34;true\u0026#34;/\u0026gt; \u0026lt;arg name=\u0026#34;headless\u0026#34; default=\u0026#34;false\u0026#34;/\u0026gt; \u0026lt;arg name=\u0026#34;debug\u0026#34; default=\u0026#34;false\u0026#34;/\u0026gt; \u0026lt;include file=\u0026#34;$(find gazebo_ros)/launch/empty_world.launch\u0026#34;\u0026gt; \u0026lt;arg name=\u0026#34;paused\u0026#34; value=\u0026#34;$(arg paused)\u0026#34;/\u0026gt; \u0026lt;arg name=\u0026#34;use_sim_time\u0026#34; value=\u0026#34;$(arg use_sim_time)\u0026#34;/\u0026gt; \u0026lt;arg name=\u0026#34;gui\u0026#34; value=\u0026#34;$(arg gui)\u0026#34;/\u0026gt; \u0026lt;arg name=\u0026#34;headless\u0026#34; value=\u0026#34;$(arg headless)\u0026#34;/\u0026gt; \u0026lt;arg name=\u0026#34;debug\u0026#34; value=\u0026#34;$(arg debug)\u0026#34;/\u0026gt; \u0026lt;/include\u0026gt; \u0026lt;include file=\u0026#34;$(find hector_quadrotor_gazebo)/launch/spawn_quadrotor.launch\u0026#34; /\u0026gt; \u0026lt;arg name=\u0026#34;model\u0026#34; value=\u0026#34;$(find hector_quadrotor_description)/urdf/quadrotor_hokuyo_utm30lx.gazebo.xacro\u0026#34;/\u0026gt; \u0026lt;/launch\u0026gt; gazebo_rosì˜ empty_world.launch, hector_quadrotor_gazeboì˜ spawn_quadrotor.launchê°€ ì‹¤í–‰ë˜ë©°, modelì´ë¼ëŠ” argumentë¥¼ ê°–ìŠµë‹ˆë‹¤.\nspawn_quadrotor.launchì—ëŠ” ë‹¤ìŒê³¼ ê°™ì€ nodeë“¤ì´ ì‹¤í–‰ë©ë‹ˆë‹¤.\nspawn_model robot_state_publisher ground_truth_to_tf controller.launch â‡’ controller_spawner ì´ë ‡ê²Œ rqt íˆ´ë“¤ê³¼ ì½”ë“œì˜ êµ¬ì¡°ë¥¼ íŒŒí—¤ì¹˜ë©´ì„œ ì „ì²´ êµ¬ì¡°ë¥¼ íŒŒì•…í•  ìˆ˜ ìˆìœ¼ë©° ì›í•˜ëŠ” ë¶€ë¶„ë§Œì„ ê³ ì¹˜ë©´ì„œ Packageë¥¼ ë°œì „ì‹œì¼œë‚˜ê°€ëŠ” ê²ƒì…ë‹ˆë‹¤.\nlaunch fileì˜ ì‘ìš©ì„ ì‹¤ìŠµí•´ë´…ì‹œë‹¤. ì¼ì „ ë°°ì›Œë³¸ husky gazeboì™€ hector gazeboë¥¼ í•¨ê»˜ ì‚¬ìš©í•´ë³´ëŠ” ê²ƒì…ë‹ˆë‹¤.\nhusky gazebo ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ë‚´ìš©ì„ ë‹´ê³  ìˆì—ˆìŠµë‹ˆë‹¤. gazebo_rosë¥¼ ì‹¤í–‰ì‹œí‚¤ê³  husky modelì„ spawní•˜ëŠ” ë˜ë‹¤ë¥¸ launch fileì„ include í•˜ì˜€ìŠµë‹ˆë‹¤. \u0026lt;launch\u0026gt; \u0026lt;arg name=\u0026#34;world_name\u0026#34; default=\u0026#34;worlds/empty.world\u0026#34;/\u0026gt; \u0026lt;include file=\u0026#34;$(find gazebo_ros)/launch/empty_world.launch\u0026#34;\u0026gt; \u0026lt;arg name=\u0026#34;world_name\u0026#34; value=\u0026#34;$(arg world_name)\u0026#34;/\u0026gt; \u0026lt;!-- world_name is wrt GAZEBO_RESOURCE_PATH environment variable --\u0026gt; \u0026lt;arg name=\u0026#34;paused\u0026#34; value=\u0026#34;false\u0026#34;/\u0026gt; \u0026lt;arg name=\u0026#34;use_sim_time\u0026#34; value=\u0026#34;true\u0026#34;/\u0026gt; \u0026lt;arg name=\u0026#34;gui\u0026#34; value=\u0026#34;true\u0026#34;/\u0026gt; \u0026lt;arg name=\u0026#34;headless\u0026#34; value=\u0026#34;false\u0026#34;/\u0026gt; \u0026lt;arg name=\u0026#34;debug\u0026#34; value=\u0026#34;false\u0026#34;/\u0026gt; \u0026lt;/include\u0026gt; \u0026lt;include file=\u0026#34;$(find husky_gazebo)/launch/spawn_husky.launch\u0026#34;\u0026gt; \u0026lt;/include\u0026gt; \u0026lt;/launch\u0026gt; ê·¸ëŸ¼, ê²¹ì¹˜ëŠ” ë¶€ë¶„ì„ ì œì™¸í•˜ê³  quadrotor_empty_world.launchì˜ ë‚´ìš©ì„ ì¶”ê°€í•˜ì—¬ ìƒˆë¡œìš´ launch fileì„ ë§Œë“¤ì–´ ë´…ì‹œë‹¤. (hetero_spawn.launch ìƒì„±) \u0026lt;launch\u0026gt; \u0026lt;include file=\u0026#34;$(find husky_gazebo)/launch/husky_empty_world.launch\u0026#34; /\u0026gt; \u0026lt;include file=\u0026#34;$(find hector_quadrotor_gazebo)/launch/spawn_quadrotor.launch\u0026#34; /\u0026gt; \u0026lt;arg name=\u0026#34;model\u0026#34; value=\u0026#34;$(find hector_quadrotor_description)/urdf/quadrotor_hokuyo_utm30lx.gazebo.xacro\u0026#34;/\u0026gt; \u0026lt;/launch\u0026gt; ì•„ë˜ì™€ ê°™ì€ ì˜¤ë¥˜ê°€ ë°œìƒí•˜ë„¤ìš”, ì´ëŠ” robot_state_publisher nodeê°€ ì¤‘ë³µë˜ê¸° ë•Œë¬¸ì— ë°œìƒí•˜ëŠ” ë¬¸ì œì…ë‹ˆë‹¤. RLException: roslaunch file contains multiple nodes named [/robot_state_publisher]. Please check all \u0026lt;node\u0026gt; \u0026#39;name\u0026#39; attributes to make sure they are unique. Also check that $(anon id) use different ids. The traceback for the exception was written to the log file ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ì„œ, ì €ëŠ” ë‹¤ë¥¸ launch file(spawn_two_quadrotors.launch)ì„ ì°¸ê³ í•´ë³´ì•˜ìŠµë‹ˆë‹¤. group íƒœê·¸ë¥¼ ì‚¬ìš©í•˜ë©´ ê°™ì€ ë¡œë´‡ì˜ ì¤‘ë³µ ì„ ì–¸ì„ namespaceë¥¼ í†µí•´ êµ¬ë¶„í•  ìˆ˜ ìˆê²Œë©ë‹ˆë‹¤. \u0026lt;?xml version=\u0026#34;1.0\u0026#34;?\u0026gt; \u0026lt;launch\u0026gt; \u0026lt;arg name=\u0026#34;model\u0026#34; default=\u0026#34;$(find hector_quadrotor_description)/urdf/quadrotor.gazebo.xacro\u0026#34; /\u0026gt; \u0026lt;group ns=\u0026#34;uav1\u0026#34;\u0026gt; \u0026lt;include file=\u0026#34;$(find hector_quadrotor_gazebo)/launch/spawn_quadrotor.launch\u0026#34;\u0026gt; ... \u0026lt;/group\u0026gt; \u0026lt;group ns=\u0026#34;uav2\u0026#34;\u0026gt; \u0026lt;include file=\u0026#34;$(find hector_quadrotor_gazebo)/launch/spawn_quadrotor.launch\u0026#34;\u0026gt; ... \u0026lt;/group\u0026gt; \u0026lt;/launch\u0026gt; ì´ì œ, hetero_spawn.launchë¥¼ ìµœì¢… ìˆ˜ì •í•´ë´…ì‹œë‹¤. \u0026lt;launch\u0026gt; \u0026lt;include file=\u0026#34;$(find husky_gazebo)/launch/husky_empty_world.launch\u0026#34; /\u0026gt; \u0026lt;arg name=\u0026#34;model\u0026#34; default=\u0026#34;$(find hector_quadrotor_description)/urdf/quadrotor.gazebo.xacro\u0026#34; /\u0026gt; \u0026lt;group ns=\u0026#34;uav1\u0026#34;\u0026gt; \u0026lt;include file=\u0026#34;$(find hector_quadrotor_gazebo)/launch/spawn_quadrotor.launch\u0026#34;\u0026gt; \u0026lt;arg name=\u0026#34;name\u0026#34; value=\u0026#34;uav1\u0026#34; /\u0026gt; \u0026lt;arg name=\u0026#34;tf_prefix\u0026#34; value=\u0026#34;uav1\u0026#34; /\u0026gt; \u0026lt;arg name=\u0026#34;model\u0026#34; value=\u0026#34;$(arg model)\u0026#34; /\u0026gt; \u0026lt;arg name=\u0026#34;z\u0026#34; value=\u0026#34;1.0\u0026#34; /\u0026gt; \u0026lt;/include\u0026gt; \u0026lt;/group\u0026gt; \u0026lt;/launch\u0026gt; ì‹¤í–‰ í›„ topicì„ ì¡°íšŒí•´ë³´ë©´, ì•„ë˜ì™€ ê°™ì´ quadrotorì˜ topic ì•ì— namespaceê°€ ì¶”ê°€ë˜ì–´ ìˆëŠ” ëª¨ìŠµì´ í™•ì¸ ê°€ëŠ¥í•©ë‹ˆë‹¤. ì—¬ëŸ¬ ë¡œë´‡ì„ ì‚¬ìš©í•˜ê²Œ ë˜ë©´ /cmd_vel, /scanë“± ì‚¬ìš©í•˜ëŠ” topicì˜ ì´ë¦„ì´ ì¤‘ë³µë  ìˆ˜ ìˆì–´ namespaceë¥¼ ì¶”ê°€ ì„¤ì •í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ì…ë‹ˆë‹¤.\n$ rostopic list /clock /cmd_vel /husky_velocity_controller/cmd_vel /husky_velocity_controller/odom /husky_velocity_controller/parameter_descriptions /husky_velocity_controller/parameter_updates /imu/data /odometry/filtered ... /uav1/aerodynamics/wrench /uav1/cmd_vel /uav1/command/motor /uav1/command/twist /uav1/command/wrench /uav1/fix_velocity ... ë§ˆì§€ë§‰ìœ¼ë¡œ, ë¡œë´‡ì„ ì œì–´í•´ë³´ë©´ì„œ ì´ë²ˆ ì„¸ì…˜ì„ ë§ˆë¬´ë¦¬í•´ë³´ê² ìŠµë‹ˆë‹¤. gazeboì˜ worldë¥¼ ë°”ê¾¸ê±°ë‚˜, huskyê°€ ì•„ë‹Œ smbë¡œ ëª¨ë¸ì„ ë°”ê¾¸ëŠ” ë“± ì‘ìš© ì˜ˆì‹œë“¤ì„ ì§ì ‘ í•´ë³´ë©´ì„œ launch fileì˜ ì‚¬ìš©ì— ìµìˆ™í•´ì§€ì‹œê¸° ë°”ëë‹ˆë‹¤.\n# husky ì œì–´ rosrun teleop_twist_keyboard teleop_twist_keyboard.py # quadrotor ì œì–´ rosrun hector_ui ui_hector_quad_leader.py ROS Custom Interfaces ROSì—ì„œ ê¸°ë³¸ ì œê³µë˜ëŠ” msgì™€ srvë„ í›Œë¥­í•˜ì§€ë§Œ, ìƒí™©ì— ë”°ë¼ ë‚˜ë§Œì˜ custom msg/srvë¥¼ ì‚¬ìš©í•´ì•¼ í•˜ëŠ” ê²½ìš°ê°€ ìˆìŠµë‹ˆë‹¤. ì´ë²ˆ ì‹œê°„ì—ëŠ” custom interfaceë¥¼ ë§Œë“¤ì–´ë³´ê³ , ì‚¬ìš©í•´ë³´ê² ìŠµë‹ˆë‹¤.\në“œë¡ ì˜ ì´ì°©ë¥™ì„ ì œì–´í•˜ëŠ” srvë¥¼ ë§Œë“¤ì–´ë³´ê³ ì í•©ë‹ˆë‹¤.\nì´ë¥™/ì°©ë¥™ì„ êµ¬ë¶„í•˜ëŠ” stringì´ í•„ìš”í•  ê²ƒì´ë©°, ê¸°ì¤€ì€ ì‹œê°„ì„ ì‚¬ìš©í•˜ê³ ì í•©ë‹ˆë‹¤. ( ex - 2ì´ˆê°„ ì´ë¥™ ) service requestëŠ” ì„±ê³µ ì—¬ë¶€ì¸ bool typeìœ¼ë¡œ í•´ë³´ê² ìŠµë‹ˆë‹¤. custom interfaceë¥¼ ë§Œë“¤ê¸° ìœ„í•´ ì €ëŠ” ë³„ë„ì˜ packageë¥¼ ìƒì„±í•˜ì˜€ìŠµë‹ˆë‹¤. cd ~/catkin_ws/src/du2023-ros1 catkin_create_pkg custom_interfaces package ë‚´ë¶€ì— msg í˜¹ì€ srvë¼ëŠ” í´ë”ë¥¼ ë§Œë“¤ê³ , custom interfaceë¥¼ ì •ì˜í•˜ëŠ”ê²ƒì´ ì¶”ì²œë©ë‹ˆë‹¤. cd custom_interfaces mkdir srv # QuadrotorControl.srv ìƒì„± string command uint8 seconds --- bool success custom_interfaces packageì˜ package.xmlì„ ìˆ˜ì •í•©ë‹ˆë‹¤. \u0026lt;build_depend\u0026gt;message_generation\u0026lt;/build_depend\u0026gt; \u0026lt;exec_depend\u0026gt;message_runtime\u0026lt;/exec_depend\u0026gt; custom_interfaces packageì˜ CMakeLists.txtë¥¼ ìˆ˜ì •í•©ë‹ˆë‹¤. # 1. find_package ìˆ˜ì • find_package(catkin REQUIRED COMPONENTS roscpp rospy std_msgs message_generation ) # 2. catkin_package ì£¼ì„ í•´ì œ í›„ ìˆ˜ì • catkin_package( ... CATKIN_DEPENDS message_runtime ... ...) # 3. add_service_filesì— íŒŒì¼ ë°˜ì˜ add_service_files( FILES QuadrotorControl.srv ) # 4. generate_messages ì£¼ì„ í•´ì œ í›„ ìˆ˜ì • generate_messages( DEPENDENCIES std_msgs # Or other packages containing msgs ) custom interfaceë¥¼ ë¹Œë“œí•˜ê³  ìƒì„±ì„ í™•ì¸í•´ë´…ì‹œë‹¤. $ catkin build custom_interfaces $ rossrv show custom_interfaces/QuadrotorControl string command uint8 seconds --- bool success ì§€ê¸ˆ ìƒì„±í•œ QuadrotorControlì€ catkin_wsì—ì„œë§Œ ì‚¬ìš© ê°€ëŠ¥í•œ srvë¼ëŠ” ì ì— ìœ ì˜í•©ë‹ˆë‹¤. ë‹¤ë¥¸ workspaceì—ì„œëŠ” QuadrotorControlì— ëŒ€í•´ ì•Œ ê¸¸ì´ ì—†ìŠµë‹ˆë‹¤.\nCustom Interfaces ì‚¬ìš©í•´ë³´ê¸° ì‘ì„±í•œ QuadrotorControlë¥¼ ì‚¬ìš©í•˜ì—¬ Service Serverë¥¼ ë§Œë“¤ì–´ë´…ì‹œë‹¤! ì •í•´ì§„ ì‹œê°„ë™ì•ˆ takeoffì™€ land ì›€ì§ì„ì„ ìˆ˜í–‰í•˜ëŠ” Serviceì…ë‹ˆë‹¤. # Terminal 1 roslaunch hector_quadrotor_gazebo quadrotor_empty_world.launch # Terminal 2 rosrun py_service_pkg quadrotor_custom_srv.py # Terminal 3 rqt ì†ŒìŠ¤ ì½”ë“œëŠ” ì´ ë§í¬ì—ì„œ í™•ì¸ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.\ncustom_interfaces packageì—ì„œ QuadrotorControl srvë¥¼ import í•˜ë©°, ë¡œë´‡ì˜ ì œì–´ë¥¼ ìœ„í•´ Twist msgë„ import í•˜ì˜€ìŠµë‹ˆë‹¤. import rospy from geometry_msgs.msg import Twist from custom_interfaces.srv import QuadrotorControl, QuadrotorControlResponse Service Serverì™€ Topic Publisherë¥¼ ìƒì„±í•©ì‹œë‹¤. class QuadRotorUpDown(object): def __init__(self): self.cmd_vel_pub_ = rospy.Publisher(\u0026#34;cmd_vel\u0026#34;, Twist, queue_size=10) self.stop_server_ = rospy.Service(\u0026#34;up_down\u0026#34;, QuadrotorControl, self.up_down_cb) self.twist_msg_ = Twist() self.response_ = QuadrotorControlResponse() rospy.loginfo(\u0026#34;Quadrotor Up-Down Server Started\u0026#34;) callback í•¨ìˆ˜ì¸ up_down_cbì…ë‹ˆë‹¤. commandê°€ land/takeoffì¼ ë•Œì˜ ê²½ìš°ë¥¼ ë‚˜ëˆ„ê³ , ê·¸ ì´ì™¸ì˜ ì…ë ¥ì€ ì˜¤ë¥˜ë¡œ íŒëª…í•©ë‹ˆë‹¤. def up_down_cb(self, request): if request.command == \u0026#34;land\u0026#34;: self.twist_msg_.linear.z = -0.5 self.response_.success = True elif request.command == \u0026#34;takeoff\u0026#34;: self.twist_msg_.linear.z = 0.5 self.response_.success = True else: rospy.logwarn(\u0026#34;Unknown Command\u0026#34;) self.response_.success = False return self.response_ requestì˜ seconds ì‹œê°„ë™ì•ˆ ë¡œë´‡ì´ ì›€ì§ì—¬ì•¼ í•  ê²ƒì´ë©°, ì´ë¥¼ ìœ„í•´ nowë¥¼ ê°±ì‹ í•˜ë©° ì§€ë‚˜ê°„ ì‹œê°„ì„ ê³„ì†í•´ì„œ tracking í•©ë‹ˆë‹¤. start = rospy.Time.now() now = rospy.Time.now() while (now - start).secs \u0026lt; request.seconds: now = rospy.Time.now() self.cmd_vel_pub_.publish(self.twist_msg_) ëª¨ë“  ë™ì‘ì´ ì™„ë£Œëœ ì´í›„ì—ëŠ” ë¡œë´‡ì„ ë‹¤ì‹œ ì •ì§€ì‹œí‚µë‹ˆë‹¤. rospy.loginfo(f\u0026#34;{request.command} done, quadrotor stop\u0026#34;) self.twist_msg_.linear.z = 0.0 self.cmd_vel_pub_.publish(self.twist_msg_) return self.response_ ì°¸ê³ ìë£Œ\nhttp://wiki.ros.org/rospy/Overview/Time https://github.com/RAFALAMAO/hector-quadrotor-noetic https://docs.ros.org/en/foxy/index.html http://wiki.ros.org/ROS/Tutorials/CreatingMsgAndSrv "
},
{
	"uri": "/kr/ros_basic_noetic/lecture9/",
	"title": "Lecture9 - ROS TF and Examples",
	"tags": [],
	"description": "",
	"content": " ëŒ€ë¶€ë¶„ì˜ ë¡œë³´í‹±ìŠ¤ ê³¼ì •ë“¤ì—ì„œ ê°€ì¥ ë¨¼ì € ë‹¤ë£¨ëŠ” ê²ƒì´ ë°”ë¡œ ì¢Œí‘œê³„ ë³€í™˜(Transformation) ì…ë‹ˆë‹¤. ë¡œë´‡ì€ ìˆ˜ë§ì€ jointì™€ linkë¡œ ì´ë£¨ì–´ì ¸ ìˆê¸° ë•Œë¬¸ì— ì¢Œí‘œê³„ë¥¼ ë‹¤ë£¨ëŠ” ì¼ì´ ë§¤ìš° ë¹ˆë²ˆí•©ë‹ˆë‹¤.\nROSì—ì„œëŠ” TFë¼ëŠ” íŠ¹ìˆ˜í•œ í˜•íƒœë¡œ ì´ ì¢Œí‘œê³„ì™€ ì‹œê°„ì„ í•¨ê»˜ ë‹¤ë£¨ê³  ìˆìŠµë‹ˆë‹¤. ì˜ˆì‹œì™€ ì„¤ëª…ì„ í†µí•´ ROSì˜ TFì— ëŒ€í•´ ë°°ì›Œë´…ì‹œë‹¤ ğŸ˜Š\nimage from : eth robot dynamics lecture notes ROSëŠ” ì˜¤í”ˆì†ŒìŠ¤ì´ë‹ˆë§Œí¼ ì‚¬ìš©ìë“¤ì´ ì›í•˜ëŠ” ê¸°ëŠ¥ë“¤ì— ë§ì¶”ì–´ ë³€í™”ê°€ ë¹ ë¦…ë‹ˆë‹¤. í•˜ì§€ë§Œ ì´ê²ƒì´ ë‹¨ì ì´ ë˜ëŠ” ê²½ìš°ë„ ìˆëŠ”ë°, ì´ì „ ë²„ì „ê³¼ ìµœì‹  ë²„ì „ì˜ í˜¸í™˜ì„± ë¬¸ì œê°€ ì¢…ì¢… ë°œìƒí•©ë‹ˆë‹¤.\ntf ë˜í•œ tf2ë¡œ ê°œí¸ë˜ë©´ì„œ ì½”ë“œì˜ ìˆ˜ì •ì´ ìˆì—ˆìœ¼ë©°, ì´ë²ˆ ê°•ì˜ì—ì„œëŠ” tf2ë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.\nimage from : wiki.ros ì˜ˆì‹œë¥¼ ë¨¼ì € ì‚´í´ë´…ì‹œë‹¤.\ntf broadcaster # Terminal 1 rosrun turtlesim turtlesim_node # Terminal 2 rosrun py_tf2_tutorial turtle_tf2_broadcaster.py # Terminal 3 rosrun turtlesim turtle_teleop_key # Terminal 4 rviz rvizë¥¼ ì‹¤í–‰í•œ ë’¤ ì•„ë˜ì™€ ê°™ì´ ì„¤ì •í•©ë‹ˆë‹¤. rvizì—ì„œ ë³´ì´ëŠ” ì„¸ê°€ì§€ ìƒ‰ìƒì˜ ë§‰ëŒ€ê°€ ë°”ë¡œ tf ì…ë‹ˆë‹¤.\nx,y,zì˜ ê° ì¶•ì„ ê°ê¸° ë‹¤ë¥¸ ìƒ‰ìœ¼ë¡œ í‘œí˜„í•˜ì˜€ìœ¼ë©°, ì—°ê´€ëœ ì¢Œí‘œê³„ë¼ë¦¬ëŠ” ë…¸ë€ ì„ ì„ í†µí•´ ì—°ê²°í•œ ëª¨ìŠµì´ ë³´ì…ë‹ˆë‹¤.\nTerminal 1ì—ì„œ ì‹¤í–‰ì‹œí‚¨ í”„ë¡œê·¸ë¨ì€ turtlesimì´ë¼ëŠ” ê²ƒìœ¼ë¡œ, 2ì°¨ì› í‰ë©´ì—ì„œ ê±°ë¶ì´ í˜•íƒœì˜ ë¡œë´‡ì„ ì‹œë®¬ë ˆì´ì…˜í•œ í”„ë¡œê·¸ë¨ì…ë‹ˆë‹¤. ì´ì œ, Terminal 3ì— ì»¤ì„œë¥¼ ë‘ê³  ê±°ë¶ì´ë¥¼ ì›€ì§ì´ë©´ì„œ, rvizì™€ turtlesimì˜ ë³€í™”ë¥¼ ì‚´í´ë³´ì„¸ìš”. ê±°ë¶ì´ë¥¼ ì¡°ì¢…í•¨ì— ë”°ë¼ ë³€í™”í•˜ëŠ” rviz í™”ë©´ì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nì „ì²´ ì½”ë“œëŠ” ì•„ë˜ ë§í¬ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìœ¼ë©°, ì§€ê¸ˆì€ í•„ìš”í•œ ë¶€ë¶„ë§Œ ì§‘ì¤‘ì ìœ¼ë¡œ ë¶„ì„í•´ë³´ê² ìŠµë‹ˆë‹¤.\nhttps://github.com/RB2023ROS/du2023-ros1/blob/main/py_tf2_tutorial/scripts/turtle_tf2_broadcaster.py\ntf ë˜í•œ í•˜ë‚˜ì˜ Packageì…ë‹ˆë‹¤. ì´ì— ë”°ë¼ ê´€ë ¨ëœ python importê°€ í•„ìš”í•©ë‹ˆë‹¤. import rospy # Because of transformations import tf_conversions import tf2_ros import geometry_msgs.msg import turtlesim.msg tfì˜ ë°ì´í„° ì†¡ì¶œì€ broadcastë¼ê³  ë¶€ë¦…ë‹ˆë‹¤. topicì˜ publisherì™€ ê°™ì´ tfì—ì„œëŠ” TransformBroadcasterë¥¼ ì‚¬ìš©í•˜ë©° sendTransformì´ë¼ëŠ” ë©”ì†Œë“œë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. def handle_turtle_pose(msg, turtlename): # tf requires broadbaster # Be Careful, !!TF IS NOT A TOPIC!! br = tf2_ros.TransformBroadcaster() ... br.sendTransform(t) TransformBroadcasterê°€ ì‚¬ìš©í•˜ëŠ” ë°ì´í„° íƒ€ì…ì€ geometry_msgs.msg.TransformStampedì…ë‹ˆë‹¤. í•´ë‹¹ ë°ì´í„° íƒ€ì…ì—ëŠ” 3ì°¨ì› ì¢Œí‘œê³„ì—ì„œì˜ ìœ„ì¹˜, ë°©í–¥, ê·¸ë¦¬ê³  ì‹œê°„ì´ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤. image from : docs.ros.org\ní•´ë‹¹ ë°ì´í„° íƒ€ì…ì— ì ì ˆí•œ ê°’ì„ ì±„ì›Œë„£ì–´ì¤€ ë‹¤ìŒ, ìµœì¢… broadcastê°€ ì§„í–‰ë©ë‹ˆë‹¤. ì£¼ì˜í•  ì ìœ¼ë¡œ ì¿¼í„°ë‹ˆì–¸ ê°ë„ ì²´ê³„ë¥¼ ì‚¬ìš©í–ˆë‹¤ëŠ” ì ì…ë‹ˆë‹¤. # prepare tf msg t = geometry_msgs.msg.TransformStamped() t.header.stamp = rospy.Time.now() t.header.frame_id = \u0026#34;world\u0026#34; t.child_frame_id = turtlename t.transform.translation.x = msg.x t.transform.translation.y = msg.y t.transform.translation.z = 0.0 q = tf_conversions.transformations.quaternion_from_euler(0, 0, msg.theta) t.transform.rotation.x = q[0] t.transform.rotation.y = q[1] t.transform.rotation.z = q[2] t.transform.rotation.w = q[3] ì¿¼í„°ë‹ˆì–¸ì€ ì§ê´€ì ìœ¼ë¡œ ì´í•´í•˜ê¸°ëŠ” í˜ë“  ê°ë„ ì²´ê³„ì…ë‹ˆë‹¤. ê³„ì‚°ì˜ í¸ì˜ë¥¼ ìœ„í•´ ë‹¤ìŒê³¼ ê°™ì€ ì‚¬ì´íŠ¸ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. \u0026gt; 3D Rotation Converter\ntfì˜ ì‚¬ìš© ì‹œ ì£¼ì˜í•´ì•¼ í•  ì ì„ ì–¸ê¸‰í•˜ê³ ì í•©ë‹ˆë‹¤.\nturtle_tf2_broadcaster.py ìˆ˜ì • - Experimentë¼ê³  ë˜ì–´ ìˆëŠ” ë¶€ë¶„ì„ ì£¼ì„ í•´ì œí•œ ë‹¤ìŒ ë‹¤ì‹œ ì‹¤í–‰í•´ë´…ì‹œë‹¤. def handle_turtle_pose(msg, turtlename): # tf requires broadbaster # Be Careful, !!TF IS NOT A TOPIC!! br = tf2_ros.TransformBroadcaster() # prepare tf msg t = geometry_msgs.msg.TransformStamped() # t.header.stamp = rospy.Time.now() # Experiment, Late tf2 t.header.stamp = rospy.Time.now() - rospy.Duration(60) t.header.frame_id = \u0026#34;world\u0026#34; rvizë¥¼ ì‹¤í–‰ì‹œí‚¨ í„°ë¯¸ë„ì—ì„œ ì•„ë˜ì™€ ê°™ì€ ì—ëŸ¬ê°€ ë°œìƒí•©ë‹ˆë‹¤. [ WARN] [1671940248.738235698]: TF_REPEATED_DATA ignoring data with redundant timestamp for frame turtle1 at time 1671940148.738096 according to authority unknown_publisher tfì—ëŠ” ì‹œê°„ ë°ì´í„°ê°€ í¬í•¨ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ í˜„ì¬ ì‹œê°„ê³¼ tfì— ë‹´ê¸° ì‹œê°„ì˜ ì°¨ì´ê°€ í¬ë‹¤ë©´ ROSëŠ” ì´ë¥¼ ì•ˆì •ì ì´ì§€ ëª»í•œ ê²ƒìœ¼ë¡œ íŒë‹¨í•´ ë¬´ì‹œí•©ë‹ˆë‹¤. (ìœ„ ì—ëŸ¬ëŠ” ì•„ë§ˆ ë¡œë´‡ ê°œë°œì„ í•˜ë©´ì„œ ë§ˆì£¼ì¹˜ê²Œ ë˜ëŠ” Warning Top3ì•ˆì— ë“¤ì§€ ì•Šì„ê¹Œ ì‹¶ìŠµë‹ˆë‹¤.)\nì´ë²ˆ ì˜ˆì‹œì—ëŠ” í„°ë¯¸ë„ì´ 4ê°œë‚˜ í•„ìš”í•˜ì˜€ìŠµë‹ˆë‹¤. ì˜ˆì‹œì˜ ë¹ ë¥¸ ì‹¤í–‰ì„ ìœ„í•´ launch fileì„ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. \u0026lt;launch\u0026gt; \u0026lt;node pkg=\u0026#34;turtlesim\u0026#34; type=\u0026#34;turtlesim_node\u0026#34; name=\u0026#34;sim\u0026#34;/\u0026gt; \u0026lt;node pkg=\u0026#34;turtlesim\u0026#34; type=\u0026#34;turtle_teleop_key\u0026#34; name=\u0026#34;teleop\u0026#34; output=\u0026#34;screen\u0026#34;/\u0026gt; \u0026lt;node name=\u0026#34;turtle1_tf2_broadcaster\u0026#34; pkg=\u0026#34;py_tf2_tutorial\u0026#34; type=\u0026#34;turtle_tf2_broadcaster.py\u0026#34; respawn=\u0026#34;false\u0026#34; output=\u0026#34;screen\u0026#34; \u0026gt; \u0026lt;param name=\u0026#34;turtle\u0026#34; type=\u0026#34;string\u0026#34; value=\u0026#34;turtle1\u0026#34; /\u0026gt; \u0026lt;/node\u0026gt; \u0026lt;node name=\u0026#34;rviz\u0026#34; pkg=\u0026#34;rviz\u0026#34; type=\u0026#34;rviz\u0026#34; args=\u0026#34;-d $(find py_tf2_tutorial)/rviz/turtlesim_tf.rviz\u0026#34; /\u0026gt; \u0026lt;/launch\u0026gt; tf listener tf broadcasterì˜ ë‹¤ìŒìœ¼ë¡œ tf listenerì— ëŒ€í•´ ë°°ì›Œë´…ì‹œë‹¤.\nturtlesim follow demo roslaunch py_tf2_tutorial follow_demo.launch ì‚¬ì§„ê³¼ ê°™ì´ ìš°ë¦¬ê°€ ì¡°ì¢…í•˜ëŠ” ì²«ë²ˆì§¸ ê±°ë¶ì´ë¥¼ ë‘ë²ˆì§¸ ê±°ë¶ì´ê°€ ë”°ë¼ì˜¤ê²Œ ë©ë‹ˆë‹¤. rvizë¥¼ í†µí•´ tfë“¤ ì‚¬ì´ì— ì–´ë– í•œ ë³€í™”ê°€ ìˆëŠ”ì§€ë„ ì§ì ‘ í™•ì¸í•´ë³´ì„¸ìš” launch íŒŒì¼ì€ ë‹¤ìŒê³¼ ê°™ì€ ë‚´ìš©ì„ í¬í•¨í•˜ê³  ìˆìŠµë‹ˆë‹¤.\n\u0026lt;launch\u0026gt; \u0026lt;node pkg=\u0026#34;turtlesim\u0026#34; type=\u0026#34;turtlesim_node\u0026#34; name=\u0026#34;sim\u0026#34;/\u0026gt; \u0026lt;node pkg=\u0026#34;turtlesim\u0026#34; type=\u0026#34;turtle_teleop_key\u0026#34; name=\u0026#34;teleop\u0026#34; output=\u0026#34;screen\u0026#34;/\u0026gt; \u0026lt;node name=\u0026#34;turtle1_tf2_broadcaster\u0026#34; pkg=\u0026#34;py_tf2_tutorial\u0026#34; type=\u0026#34;turtle_tf2_broadcaster.py\u0026#34; respawn=\u0026#34;false\u0026#34; output=\u0026#34;screen\u0026#34; \u0026gt; \u0026lt;param name=\u0026#34;turtle\u0026#34; type=\u0026#34;string\u0026#34; value=\u0026#34;turtle1\u0026#34; /\u0026gt; \u0026lt;/node\u0026gt; \u0026lt;node name=\u0026#34;turtle2_tf2_broadcaster\u0026#34; pkg=\u0026#34;py_tf2_tutorial\u0026#34; type=\u0026#34;turtle_tf2_broadcaster.py\u0026#34; respawn=\u0026#34;false\u0026#34; output=\u0026#34;screen\u0026#34; \u0026gt; \u0026lt;param name=\u0026#34;turtle\u0026#34; type=\u0026#34;string\u0026#34; value=\u0026#34;turtle2\u0026#34; /\u0026gt; \u0026lt;/node\u0026gt; \u0026lt;node pkg=\u0026#34;py_tf2_tutorial\u0026#34; type=\u0026#34;turtle_tf2_listener.py\u0026#34; name=\u0026#34;listener\u0026#34; output=\u0026#34;screen\u0026#34;/\u0026gt; \u0026lt;/launch\u0026gt; turtlesim ì‹¤í–‰ teleop key ì‹¤í–‰ turtle1ì˜ tf broadcaster turtle2ì˜ tf broadcaster tf listener ì´ë²ˆ ì˜ˆì œì—ì„œ ì‚´í´ë³´ê³ ì í•˜ëŠ” ê²ƒì€ tf listenerì…ë‹ˆë‹¤.\nTransformListener í´ë˜ìŠ¤ëŠ” ìƒì„±ë˜ëŠ” ìˆœê°„ë¶€í„° /tf topicì— ê·€ê¸°ìš¸ì´ê¸° ì‹œì‘í•©ë‹ˆë‹¤. BufferëŠ” ì •í•´ì§„ ì‚¬ì´ì¦ˆë§Œí¼ tf ë°ì´í„°ë¥¼ í’ˆê²Œ ë˜ë©°, TransformListenerì— ì „ë‹¬í•˜ê²Œ ë˜ë©´, tf topic dataë¥¼ ë°›ì•„ Bufferì— ìŒ“ì•„ë‘ëŠ” ê²ƒì…ë‹ˆë‹¤. if __name__ == \u0026#39;__main__\u0026#39;: rospy.init_node(\u0026#39;tf2_turtle_listener\u0026#39;) tfBuffer = tf2_ros.Buffer() listener = tf2_ros.TransformListener(tfBuffer) Bufferì˜ lookup_transform ë©”ì†Œë“œëŠ” ë‘ frame ì‚¬ì´ì˜ translation, rotation ë³€í™˜ì„ ê³„ì‚°í•´ì¤ë‹ˆë‹¤. while not rospy.is_shutdown(): try: # calculate transformation btw two dynamic tfs # those tfs were broadcasted from TransformBroadcaster trans = tfBuffer.lookup_transform(turtle_name, \u0026#39;turtle1\u0026#39;, rospy.Time(), rospy.Duration(1.0)) except (tf2_ros.LookupException, tf2_ros.ConnectivityException, tf2_ros.ExtrapolationException): rate.sleep() continue lookup_transform ë©”ì†Œë“œì˜ ì›í˜•ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤. image from : docs.ros2.org lookup_transformì˜ ê³„ì‚° ê²°ê³¼ë¥¼ ì§ì ‘ ì‚´í´ë³´ê³ ì print ë¬¸ì„ ì¶”ê°€í•˜ì˜€ìœ¼ë©°, ìº¡ì³ ì‚¬ì§„ì„ í†µí•´ ê°„ë‹¨íˆ í•¨ê»˜ ì‚´í´ë´…ì‹œë‹¤.\ntranslationì€ ë‘ ê±°ë¶ì´ì˜ frameì‚¬ì´ ìˆ˜í‰ ê±°ë¦¬ë¥¼ ë³´ì—¬ì£¼ë©° rotationì€ ë‘ frameì‚¬ì´ íšŒì „ì„ ì¿¼í„°ë‹ˆì–¸ìœ¼ë¡œ ë³´ì—¬ì¤ë‹ˆë‹¤. ê¸°ì¤€ì´ ë˜ëŠ” frameê³¼ ëª©í‘œ frameì€ idë¡œ êµ¬ë¶„í•˜ë©°, í˜„ì¬ turtle1, turtle2ë¡œ êµ¬ë¶„í•˜ê³  ìˆìŠµë‹ˆë‹¤. í˜„ ìƒí™©ì„ ê·¸ë¦¼ìœ¼ë¡œ ê°„ë‹¨íˆ ì •ë¦¬í•˜ìë©´ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.\nlookup_transformì˜ ê³„ì‚° ê²°ê³¼ëŠ” target frameì¸ turtle2ì˜ ìœ„ì¹˜ê°€ source frameì¸ turtle1 ê¸°ì¤€ì—ì„œëŠ” ì–´ë– í•œ ì¢Œí‘œë¥¼ ê°–ëŠ”ì§€ë¥¼ í¬í•¨í•©ë‹ˆë‹¤.\nimage from : CMU Qatar ë¡œë³´í‹±ìŠ¤ì—ì„œ ì´ëŸ¬í•œ ì¢Œí‘œ ë³€í™˜ì€ ë§¤ìš° ìì£¼ ì‚¬ìš©ë˜ë©°, ì¼ë°˜ì ìœ¼ë¡œ Homogeneous Matrixì˜ í˜•íƒœë¡œ í‘œí˜„í•©ë‹ˆë‹¤.\nfrom : eth robotics lecture notes ê·¸ ë°–ì—, ì½”ë“œì—ì„œ êµ¬í˜„ëœ ê¸°ëŠ¥ì„ ê°„ë‹¨íˆ ì‚´í´ë³´ë©° ë§ˆë¬´ë¦¬í•˜ê² ìŠµë‹ˆë‹¤.\në‘ë²ˆì§¸ ê±°ë¶ì´ë¥¼ ë“±ì¥ì‹œí‚¤ëŠ” service client # Spawn second turtle rospy.wait_for_service(\u0026#39;spawn\u0026#39;) spawner = rospy.ServiceProxy(\u0026#39;spawn\u0026#39;, turtlesim.srv.Spawn) turtle_name = rospy.get_param(\u0026#39;turtle\u0026#39;, \u0026#39;turtle2\u0026#39;) spawner(4, 2, 0, turtle_name) ê±°ë¶ì´ë¥¼ ì œì–´í•˜ê¸° ìœ„í•œ Twist msg topic publisher # turtle2 controller turtle_vel = rospy.Publisher(\u0026#39;%s/cmd_vel\u0026#39; % turtle_name, geometry_msgs.msg.Twist, queue_size=1) rate = rospy.Rate(50.0) while not rospy.is_shutdown(): ... turtle_vel.publish(msg) rate.sleep() ì´ë ‡ê²Œ tfì— ëŒ€í•´ì„œ turtlesim ì˜ˆì‹œì™€ í•¨ê»˜ ì‚´í´ë³´ì•˜ìŠµë‹ˆë‹¤. ë¡œë³´í‹±ìŠ¤ì—ì„œ ìì£¼ ì‚¬ìš©ë˜ëŠ” ì¢Œí‘œê³„ì™€ ê·¸ë“¤ ì‚¬ì´ì˜ ë³€í™˜ì„ ì‹œê°„ ë°ì´í„°ì™€ í•¨ê»˜ í‘œí˜„í•˜ëŠ” ê²ƒì´ ROSì˜ tf2ì…ë‹ˆë‹¤.\në‹¤ìŒ ê°•ì˜ì— ê³„ì† ì´ì–´ì§‘ë‹ˆë‹¤.\n"
},
{
	"uri": "/kr/ros_basic_noetic/lecture10/",
	"title": "Lecture10 - TF2 Examples, Outro",
	"tags": [],
	"description": "",
	"content": "tf2 ì‚¬ë¡€ ì œê°€ ê°•ì¡°í•´ì„œ ìê¾¸ ì¢Œí‘œê³„ê°€ tfê°€ ì¤‘ìš”í•˜ë‹¤ê³  ë§í•˜ê³  ìˆëŠ”ë°, ê·¸ ì´ìœ ë¥¼ ì˜ˆì‹œì™€ í•¨ê»˜ ì¢€ ë” ìì„¸íˆ ì‚´í´ë³´ê³ ì í•©ë‹ˆë‹¤.\nhusky slam # ì˜ˆì‹œ ì¢…ì†ì„± ì„¤ì¹˜ sudo apt install ros-noetic-slam-gmapping # Terminal 1 roslaunch smb_gazebo smb_gazebo.launch world:=big_map_summer_school # Terminal 2 roslaunch py_tf2_tutorial slam_gmapping.launch # Terminal 3 rosrun teleop_twist_keyboard teleop_twist_keyboard.py # [option] rviz (ì´ì „ ì˜ˆì‹œì—ì„œ rvizë¥¼ ì¶”ê°€í•˜ì˜€ë‹¤ë©´ ë„˜ì–´ê°€ì…”ë„ ì¢‹ìŠµë‹ˆë‹¤.) rviz rvizë¥¼ ë‹¤ìŒê³¼ ê°™ì´ ì„¸íŒ…í•©ë‹ˆë‹¤. ì´ì œ teleopì„ í†µí•´ ë¡œë´‡ì„ ì´ë™ì‹œí‚¤ë©´ì„œ, rviz í™”ë©´ì˜ ë³€í™”ë¥¼ í™•ì¸í•´ë´…ì‹œë‹¤. ë¡œë´‡ì´ ì›€ì§ì´ë©´ì„œ ìì‹ ì˜ ìœ„ì¹˜ë¥¼ íŒŒì•…í•¨ê³¼ ë™ì‹œì— ì§€ë„ë¥¼ ìƒì„±í•˜ëŠ” ì˜ˆì‹œì…ë‹ˆë‹¤.\në§ˆì§€ë§‰ìœ¼ë¡œ, rqtë¥¼ ì‹¤í–‰í•˜ì—¬ tf treeë¥¼ ì‹¤í–‰ì‹œí‚µë‹ˆë‹¤. tf treeëŠ” tf ê´€ë ¨ ìƒíƒœë¥¼ ì‹œê°í™”í•˜ì—¬ í•œë²ˆì— ë³¼ ìˆ˜ ìˆê²Œ í•´ì£¼ëŠ” ê³ ë§ˆìš´ íˆ´ì…ë‹ˆë‹¤. treeë¥¼ í™•ëŒ€í•´ì„œ ì‚´í´ë³´ìë©´, slam_gmappingì€ map â†’ odomìœ¼ë¡œì˜ tf broadcastë¥¼ ë‹´ë‹¹í•˜ê³  ìˆìŠµë‹ˆë‹¤. ë”ë¶ˆì–´ mapì€ ëª¨ë“  tfì˜ ìµœìƒë‹¨ì— ì¡´ì¬í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì´ëŸ¬í•œ ì´ìœ ë¡œ rvizì—ì„œ fixed frameì„ mapìœ¼ë¡œ ì„¤ì •í•œ ê²ƒì…ë‹ˆë‹¤. í€´ì¦ˆ: ë§Œì•½ tf treeê°€ ì˜¨ì „íˆ ì—°ê²°ë˜ì–´ ìˆì§€ ì•Šë‹¤ë©´ ì–´ë–¤ ì¼ì´ ë°œìƒí• ê¹Œìš”?\nimage from : answers.ros.org ì„¼ì„œ ì…ì¥ì—ì„œë„ tfëŠ” ë§¤ìš° ì¤‘ìš”í•©ë‹ˆë‹¤.\nê°™ì€ ë°ì´í„°ë¼ë„ ê·¸ ê¸°ì¤€ì´ ì–´ë”˜ì§€ì— ë”°ë¼ì„œ ì „í˜€ ë‹¤ë¥¸ ì˜ë¯¸ë¥¼ ê°€ì§ˆ ìˆ˜ ìˆê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.\nì˜ˆë¥¼ ë“¤ì–´, ë¼ì´ë‹¤ì˜ tfë¥¼ 180ë„ ë°˜ëŒ€ë¡œ ì„¤ì •í•´ë²„ë¦¬ë©´ í›„ë°©ì— ìˆëŠ” ì¥ì• ë¬¼ì„ ì „ë°© ì¥ì• ë¬¼ë¡œ ì˜ëª» ì¸ì‹í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nimage from : answers.ros.org ë”ë¶ˆì–´, ë¡œë´‡ íŒ”ê³¼ ê°™ì€ ê´€ì ˆë¡œë´‡ì—ê²Œë„ tfëŠ” ë¬´ì²™ ì¤‘ìš”í•œ ì˜ë¯¸ë¥¼ ê°–ìŠµë‹ˆë‹¤. ê° jointì˜ ìƒíƒœë¥¼ í†µí•´ tfë¥¼ ê³„ì‚°í•˜ê³  ì´ë¥¼ í†µí•´ ìµœì¢…ì ìœ¼ë¡œ ë¡œë´‡ íŒ”ì˜ ëì ì´ ì–´ë””ì— ìœ„ì¹˜í•˜ëŠ”ì§€ ê³„ì‚°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nMoveIt! ì‹¤ìŠµí•´ë³´ê¸° ì´ë²ˆ ì‹œê°„ì—ëŠ” ì¡°ê¸ˆ ì‰¬ì–´ê°€ëŠ” ëŠë‚Œìœ¼ë¡œ ìœ ìš©í•œ ROS Packageë¥¼ ì†Œê°œí•´ë“œë¦¬ê³ ì í•©ë‹ˆë‹¤.\nimage from : moveit github MoveItì€ ë‹¤ê´€ì ˆ ë¡œë´‡ì˜ ëª¨ì…˜ ì œì–´ë¥¼ ìœ„í•œ í”„ë ˆì„ì›Œí¬ì…ë‹ˆë‹¤. ì´ë¦„ë§Œ ë“¤ì–´ì„œëŠ” ê°ì´ ì˜ ì˜¤ì§€ ì•Šì§€ìš”? ê°„ë‹¨í•œ ì˜ˆì‹œë¥¼ í†µí•´ ì‚´í´ë´…ì‹œë‹¤.\nìš°ë¦¬ ì¸ê°„ì€ íŒ”ì„ ì´ìš©í•˜ì—¬ ë¬¼ê±´ì„ ì¡ëŠ” ê²ƒì´ ë§¤ìš° ì‰½ê³  ê°„ë‹¨í•˜ì§€ë§Œ, ì‚¬ì‹¤ ì´ëŠ” ê¸°êµ¬í•™ì ìœ¼ë¡œ, ë™ì—­í•™ì ìœ¼ë¡œ, ì—ë„ˆì§€ ì°¨ì›ì—ì„œ ë§¤ìš° ìµœì í™”ëœ ì›€ì§ì„ì…ë‹ˆë‹¤. ë¡œë´‡ íŒ”ì˜ ê²½ìš° ì¥ì°©ëœ ëª¨í„°ì˜ ë°©í–¥ê°ì´ ì œí•œëœ ê²½ìš°ë„ ìˆê³ , ìê¸° ìì‹ ê³¼ ì–½í˜€ë²„ë¦¬ëŠ” ë¬¸ì œë„ ë°œìƒí•  ìˆ˜ ìˆìœ¼ë©°, ê°™ì€ ëª©í‘œë¥¼ ê°–ë”ë¼ê³  ë‹¤ì–‘í•œ ê²½ë¡œë¡œ ì›€ì§ì¼ ìˆ˜ ìˆê¸° ë•Œë¬¸ì— ìµœì ì˜ ê²½ë¡œì— ëŒ€í•œ ê¸°ì¤€ë„ ê³ ë ¤í•´ì•¼ í•©ë‹ˆë‹¤. image from : mecademic ë¡œë´‡ íŒ”ì˜ ì£¼ìš” êµ¬ì„± Base : ê³ ì •ëœ ì§€ì§€ë¶€ Arm : ì‹¤ì§ˆì ì¸ ë¡œë´‡ íŒ” End Effector : Arm ëì— ë¶€ì°©ë˜ëŠ” ê¸°êµ¬ì˜ í†µì¹­, ì¼ë°˜ì ìœ¼ë¡œ ë¬¼ì²´ë¥¼ ì¡ê³  ë†“ëŠ” ë™ì‘ì„ ìˆ˜í–‰ MoveItì€ ê´€ì ˆ ë¡œë´‡ì˜ ê¸°ë³¸ êµ¬ì„±ê³¼ Mass Matrix, ê° ëª¨í„°ì˜ ì œí•œê³¼ ì›í•˜ëŠ” ì›€ì§ì„ì„ ì§€ì •í•´ì£¼ë©´ ì´ì— ë”°ë¼ ê° ê´€ì ˆì˜ ìœ„ì¹˜, ì†ë„, ê°€ì†ë„ ê²½ë¡œë¥¼ ìµœì í™”(Planning) í•´ì£¼ëŠ” í”„ë ˆì„ì›Œí¬ì´ë©°, ê·¸ ë°–ì—ë„, ë¬¼ì²´ ì¸ì§€, ì¥ì• ë¬¼ íšŒí”¼, End Effectorì— ê°€í•´ì§€ëŠ” í˜ê¹Œì§€ ê³ ë ¤ ê°€ëŠ¥í•œ ê±°ëŒ€í•œ ì˜¤í”ˆì†ŒìŠ¤ í”„ë¡œì íŠ¸ì…ë‹ˆë‹¤.\nMoveIt Motion Planning Framework\nì´ë²ˆ ì˜ˆì œë¡œ ì €ì™€ í•¨ê»˜ MoveItì˜ ê°€ì¥ ê¸°ë³¸ì ì¸ ë°ëª¨ë¥¼ í•¨ê»˜ ì‹¤í–‰í•´ë³´ê² ìŠµë‹ˆë‹¤. ì˜ˆì‹œì— ì‚¬ìš©ë˜ëŠ” ë¡œë´‡ì€ FRANKA EMIKAì˜ PANDAë¼ëŠ” ë¡œë´‡ì…ë‹ˆë‹¤. FRANKA EMIKA - PANDA\nì•„ë˜ ì»¤ë©˜ë“œ ë¼ì¸ì„ í•¨ê»˜ ë”°ë¼ì™€ì£¼ì„¸ìš”.\napt íŒ¨í‚¤ì§€ ì„¤ì¹˜ sudo apt install ros-noetic-moveit-setup-assistant sudo apt install ros-noetic-moveit sudo apt install ros-noetic-gazebo-ros-control joint-state-publisher sudo apt install ros-noetic-controller-manager sudo apt install ros-noetic-ros-controllers sudo apt install ros-noetic-ros-control sudo apt install ros-noetic-robot-state-publisher ì˜ˆì œ íŒ¨í‚¤ì§€ Clone cd ~/catkin_ws git clone https://github.com/ros-planning/moveit_tutorials.git -b master git clone https://github.com/ros-planning/panda_moveit_config.git -b noetic-devel ê´€ë ¨ ì¢…ì†ì„± ì„¤ì¹˜ - rosdep ì¶”ê°€ ì„¤ëª… cd ~/catkin_ws/src rosdep install -y --from-paths . --ignore-src --rosdistro noetic íŒ¨í‚¤ì§€ ë¹Œë“œ cd ~/catkin_ws catkin build source devel/setup.bash ë°ëª¨ ì‹¤í–‰ roslaunch panda_moveit_config demo_gazebo.launch ì—¬ê¸°ê¹Œì§€ ì˜ ë”°ë¼ì˜¤ì…¨ë‚˜ìš”? ê·¸ë ‡ë‹¤ë©´ ê°•ì˜ìì˜ ì„¤ëª…ì— ë”°ë¼ RViz Motion Planning Pluginì„ ì‚¬ìš©í•´ë´…ë‹ˆë‹¤.\nì°¸ê³ ìë£Œ\nhttps://rsl.ethz.ch/education-students/lectures/ros.html https://ros-planning.github.io/moveit_tutorials/ http://wiki.ros.org/tf/Tutorials "
},
{
	"uri": "/kr/categories/",
	"title": "Categories",
	"tags": [],
	"description": "",
	"content": ""
},
{
	"uri": "/kr/tags/",
	"title": "Tags",
	"tags": [],
	"description": "",
	"content": ""
}]