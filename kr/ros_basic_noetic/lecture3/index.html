<!DOCTYPE html>
<html lang="kr" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hugo 0.104.1" />
    <meta name="description" content="COM2018 OOP Class Lecture Note">
<meta name="author" content="Soo Young Kim">

    <link rel="icon" href="/images/favicon.png" type="image/png">

    <title>Lecture3 - Core of ROS - Documentation for Hugo Learn Theme</title>

    
    <link href="/css/nucleus.css?1672829709" rel="stylesheet">
    <link href="/css/fontawesome-all.min.css?1672829709" rel="stylesheet">
    <link href="/css/hybrid.css?1672829709" rel="stylesheet">
    <link href="/css/featherlight.min.css?1672829709" rel="stylesheet">
    <link href="/css/perfect-scrollbar.min.css?1672829709" rel="stylesheet">
    <link href="/css/auto-complete.css?1672829709" rel="stylesheet">
    <link href="/css/atom-one-dark-reasonable.css?1672829709" rel="stylesheet">
    <link href="/css/theme.css?1672829709" rel="stylesheet">
    <link href="/css/tabs.css?1672829709" rel="stylesheet">
    <link href="/css/hugo-theme.css?1672829709" rel="stylesheet">
    
    <link href="/css/theme-green.css?1672829709" rel="stylesheet">
    
    <link href="/css/foo.css?1672829709" rel="stylesheet"><link href="/css/bar.css?1672829709" rel="stylesheet">

    <script src="/js/jquery-3.3.1.min.js?1672829709"></script>

    <style>
      :root #header + #content > #left > #rlblock_left{
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/kr/ros_basic_noetic/lecture3/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <img width="1097" alt="image" src="https://user-images.githubusercontent.com/12381733/209764275-05dcbdbf-cef7-47ad-94a6-6d61febad01e.png">
    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fas fa-search"></i></label>
    <input data-search-input id="search-by" type="search" placeholder="">
    <span data-search-clear=""><i class="fas fa-times"></i></span>
</div>

<script type="text/javascript" src="/js/lunr.min.js?1672829709"></script>
<script type="text/javascript" src="/js/auto-complete.js?1672829709"></script>
<script type="text/javascript">
    
        var baseurl = "\/\/kr";
    
</script>
<script type="text/javascript" src="/js/search.js?1672829709"></script>

    
  </div>
  
    <section id="homelinks">
      <ul>
        <li>
            <a class="padding" href='/kr'><i class='fas fa-home'></i> Home</a>
        </li>
      </ul>
    </section>
  

    <div class="highlightable">
    <ul class="topics">

        
          
          




 
  
    
    <li data-nav-id="/kr/ros_basic_noetic/" title="ROS Basics" class="dd-item
        parent
        
        
        ">
      <a href="/kr/ros_basic_noetic/">
          <b>ROS Noetic. </b>ROS Basics
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/kr/ros_basic_noetic/lecture1/" title="Lecture1 - Introduction to ROS" class="dd-item ">
        <a href="/kr/ros_basic_noetic/lecture1/">
        Lecture1 - Introduction to ROS
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros_basic_noetic/lecture2/" title="Lecture2 - Dev Env Setup" class="dd-item ">
        <a href="/kr/ros_basic_noetic/lecture2/">
        Lecture2 - Dev Env Setup
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros_basic_noetic/lecture3/" title="Lecture3 - Core of ROS" class="dd-item active">
        <a href="/kr/ros_basic_noetic/lecture3/">
        Lecture3 - Core of ROS
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros_basic_noetic/lecture4/" title="Lecture4 - ROS Launch, RViz" class="dd-item ">
        <a href="/kr/ros_basic_noetic/lecture4/">
        Lecture4 - ROS Launch, RViz
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros_basic_noetic/lecture5/" title="Lecture5 - First Programming, ROS Topic" class="dd-item ">
        <a href="/kr/ros_basic_noetic/lecture5/">
        Lecture5 - First Programming, ROS Topic
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros_basic_noetic/lecture6/" title="Lecture6 - ROS Service, Parameter" class="dd-item ">
        <a href="/kr/ros_basic_noetic/lecture6/">
        Lecture6 - ROS Service, Parameter
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros_basic_noetic/lecture7/" title="Lecture7 - Rqt Tools and rosbag, ROS Time" class="dd-item ">
        <a href="/kr/ros_basic_noetic/lecture7/">
        Lecture7 - Rqt Tools and rosbag, ROS Time
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros_basic_noetic/lecture8/" title="Lecture8 - Deal with Open Source Projects, Custom Interfaces" class="dd-item ">
        <a href="/kr/ros_basic_noetic/lecture8/">
        Lecture8 - Deal with Open Source Projects, Custom Interfaces
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros_basic_noetic/lecture9/" title="Lecture9 - ROS TF and Examples" class="dd-item ">
        <a href="/kr/ros_basic_noetic/lecture9/">
        Lecture9 - ROS TF and Examples
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros_basic_noetic/lecture10/" title="Lecture10 - TF2 Examples, Outro" class="dd-item ">
        <a href="/kr/ros_basic_noetic/lecture10/">
        Lecture10 - TF2 Examples, Outro
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
          




 
  
    
    <li data-nav-id="/kr/ros2_basic_foxy/" title="ROS 2 Basics" class="dd-item
        
        
        
        ">
      <a href="/kr/ros2_basic_foxy/">
          <b>ROS 2 Foxy. </b>ROS 2 Basics
          
      </a>
      
      
        <ul>
          
          
          

        
          
            
            




 
  
    
      <li data-nav-id="/kr/ros2_basic_foxy/lecture1/" title="Lecture1 - Introduction to ROS 2" class="dd-item ">
        <a href="/kr/ros2_basic_foxy/lecture1/">
        Lecture1 - Introduction to ROS 2
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros2_basic_foxy/lecture2/" title="Lecture2 - ROS 2 Node, Package" class="dd-item ">
        <a href="/kr/ros2_basic_foxy/lecture2/">
        Lecture2 - ROS 2 Node, Package
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros2_basic_foxy/lecture3/" title="Lecture3 - ROS 2 Node Programming, ROS 2 parameter" class="dd-item ">
        <a href="/kr/ros2_basic_foxy/lecture3/">
        Lecture3 - ROS 2 Node Programming, ROS 2 parameter
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros2_basic_foxy/lecture4/" title="Lecture4 - ROS 2 Node C&#43;&#43; Programming" class="dd-item ">
        <a href="/kr/ros2_basic_foxy/lecture4/">
        Lecture4 - ROS 2 Node C&#43;&#43; Programming
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros2_basic_foxy/lecture5/" title="Lecture5 - ROS 2 Topic and Examples" class="dd-item ">
        <a href="/kr/ros2_basic_foxy/lecture5/">
        Lecture5 - ROS 2 Topic and Examples
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros2_basic_foxy/lecture6/" title="Lecture6 - ROS 2 Service and Examples" class="dd-item ">
        <a href="/kr/ros2_basic_foxy/lecture6/">
        Lecture6 - ROS 2 Service and Examples
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros2_basic_foxy/lecture7/" title="Lecture7 - Useful ROS 2 Example, Navigation2" class="dd-item ">
        <a href="/kr/ros2_basic_foxy/lecture7/">
        Lecture7 - Useful ROS 2 Example, Navigation2
        
        </a>
    </li>
     
  
 

            
          
            
            




 
  
    
      <li data-nav-id="/kr/ros2_basic_foxy/lecture8/" title="Lecture8 - ROS 2 Action and Examples" class="dd-item ">
        <a href="/kr/ros2_basic_foxy/lecture8/">
        Lecture8 - ROS 2 Action and Examples
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
      
    </li>
  
 

          
        
    </ul>

    
    
      <section id="shortcuts">
        <h3></h3>
        <ul>
          
              <li>
                  <a class="padding" href="https://github.com/RB2023ROS/du2023-ros1"><i class='fab fa-fw fa-github'></i> GitHub repo</a>
              </li>
          
        </ul>
      </section>
    

    
    <section id="prefooter">
      <hr/>
      <ul>
      
        <li>
          <a class="padding">
            <i class="fas fa-language fa-fw"></i>
          <div class="select-style">
            <select id="select-language" onchange="location = this.value;">
          
          
          
              
              
                  
                    
                    
                      <option id="kr" value="/kr/ros_basic_noetic/lecture3/" selected>Korean</option>
                    
                  
              
                  
              
          
        </select>
        <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
          width="255px" height="255px" viewBox="0 0 255 255" style="enable-background:new 0 0 255 255;" xml:space="preserve">
          <g>
            <g id="arrow-drop-down">
              <polygon points="0,63.75 127.5,191.25 255,63.75 		" />
            </g>
          </g>
        </svg>
        </div>
        </a>
        </li>
      

      
      </ul>
    </section>
    
    <section id="footer">
      <p>Built with <a href="https://github.com/matcornic/hugo-theme-learn"><i class="fas fa-heart"></i></a> from <a href="https://getgrav.org">Grav</a> and <a href="https://gohugo.io/">Hugo</a></p>

    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                  
                  
                  
                  <div id="top-github-link">
                    <a class="github-link" title='' href="https://github.com/com2018-fa22/hugo-blog/tree/main/content/ros_basic_noetic/lecture3.kr.md" target="blank">
                      <i class="fas fa-code-branch"></i>
                      <span id="top-github-link-text"></span>
                    </a>
                  </div>
                  
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fas fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fas fa-list-alt"></i></span>
                  
                  <span class="links">
                 
                 
                   Lecture3 - Core of ROS
                 
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
  <ul>
    <li><a href="#husky-gazebo">Husky Gazebo</a></li>
    <li><a href="#ros-node">ROS Node</a>
      <ul>
        <li><a href="#eth-super-mega-bot--ros-workspace">ETH Super Mega Bot &amp; ROS Workspace</a></li>
      </ul>
    </li>
    <li><a href="#package-생성-실습">Package 생성 실습</a></li>
  </ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            
        <div id="head-tags">
        
        </div>
        
        <div id="body-inner">
          
            <h1>
              
              Lecture3 - Core of ROS
            </h1>
          

        


<blockquote>
<p>지난 시간 개발환경 세팅을 잘 진행하였는지 확인을 해보면서 강의를 시작해보겠습니다.</p>
</blockquote>
<p>터미널 프로그램을 실행한 뒤, gazebo를 실행해 봅시다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>gazebo
</span></span></code></pre></div><p><img src="/kr/ros_basic_noetic/images3/lec2_0.png?height=400px" alt="img0"></p>
<p>위 사진과 같은 화면이 나오지 않았다면 설치가 제대로 되지 않은 것입니다.</p>
<p>다음으로, ROS 설치는 잘 되었는지도 확인해봅시다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Terminal 1</span>
</span></span><span style="display:flex;"><span>roscore
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Terminal 2</span>
</span></span><span style="display:flex;"><span>rosrun rospy_tutorials talker
</span></span></code></pre></div><p><img src="/kr/ros_basic_noetic/images3/talker.gif?height=400px" alt="talker.gif"></p>
<p>모든 확인이 끝났다면, 예제 프로그램을 실행시켜보겠습니다.</p>
<hr>
<h2 id="husky-gazebo">Husky Gazebo</h2>
<ul>
<li>예제 패키지 설치</li>
</ul>
<pre tabindex="0"><code>sudo apt-get update
sudo apt-get install ros-noetic-husky-desktop
sudo apt-get install ros-noetic-husky-simulator
</code></pre><ul>
<li>예제 프로그램 실행</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Terminal 1</span>
</span></span><span style="display:flex;"><span>roslaunch husky_gazebo husky_empty_world.launch
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Terminal 2</span>
</span></span><span style="display:flex;"><span>roslaunch husky_viz view_robot.launch
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Terminal 3</span>
</span></span><span style="display:flex;"><span>rosrun teleop_twist_keyboard teleop_twist_keyboard.py cmd_vel:<span style="color:#f92672">=</span>/husky_velocity_controller/cmd_vel
</span></span></code></pre></div><p>Terminal 1에서 발생하는 아래 오류는 무시해도 좋습니다.</p>
<p><img src="/kr/ros_basic_noetic/images3/lec2_1.png?height=300px" alt="lec2_1.png"></p>
<ul>
<li>모든 실행이 정상 동작하였다면, Terminal 3에서 키보드를 통해 Husky를 제어할 수 있습니다.</li>
</ul>
<p><img src="/kr/ros_basic_noetic/images3/husky_move.gif?height=400px" alt="husky_move.gif"></p>
<ul>
<li>로봇이 움직임에 따라 두번째 터미널 결과였던 Rviz에 아래와 같은 변화가 생깁니다.</li>
</ul>
<p><img src="/kr/ros_basic_noetic/images3/lec2_2.png?height=400px" alt="lec2_2.png"></p>
<ul>
<li>다음으로, 새로운 터미널에서 아래 커멘드 라인을 실행시켜 봅시다.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>rosrun rqt_graph rqt_graph
</span></span></code></pre></div><p><img src="/kr/ros_basic_noetic/images3/rosgraph.png?height=150px" alt="rosgraph.png"></p>
<p>위 그림은 방금 전 실행한 예제 내부적으로 어떠한 동작들이 이루어지고 있었는지를 보여주는 것으로, 강의를 마칠 때면 여러분들은 위 그림이 어떠한 의미를 갖는지 모두 이해하실 수 있을 것입니다.</p>
<p>다음으로, 터미널을 새로 실행시켜 <code>rosnode list</code>와 <code>rostopic list</code>를 실행시켜 봅시다.</p>
<ul>
<li><strong>rosnode list</strong></li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ rosnode list
</span></span><span style="display:flex;"><span>/base_controller_spawner
</span></span><span style="display:flex;"><span>/ekf_localization
</span></span><span style="display:flex;"><span>/gazebo
</span></span><span style="display:flex;"><span>/gazebo_gui
</span></span><span style="display:flex;"><span>/joy_teleop/joy_node
</span></span><span style="display:flex;"><span>/joy_teleop/teleop_twist_joy
</span></span><span style="display:flex;"><span>/robot_state_publisher
</span></span><span style="display:flex;"><span>/rosout
</span></span><span style="display:flex;"><span>/teleop_twist_keyboard
</span></span><span style="display:flex;"><span>/twist_marker_server
</span></span><span style="display:flex;"><span>/twist_mux
</span></span></code></pre></div><ul>
<li><strong>rostopic list</strong></li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ rostopic list
</span></span><span style="display:flex;"><span>/clock
</span></span><span style="display:flex;"><span>/cmd_vel
</span></span><span style="display:flex;"><span>/diagnostics
</span></span><span style="display:flex;"><span>/e_stop
</span></span><span style="display:flex;"><span>/gazebo/link_states
</span></span><span style="display:flex;"><span>/gazebo/model_states
</span></span><span style="display:flex;"><span>/gazebo/parameter_descriptions
</span></span><span style="display:flex;"><span>/gazebo/parameter_updates
</span></span><span style="display:flex;"><span>/gazebo/performance_metrics
</span></span><span style="display:flex;"><span>/gazebo/set_link_state
</span></span><span style="display:flex;"><span>/gazebo/set_model_state
</span></span><span style="display:flex;"><span>...
</span></span></code></pre></div><blockquote>
<p>앞으로의 강의들에서, 위 명령어들이 어떠한 의미를 갖는지 하나하나씩 함께 살펴보겠습니다.</p>
</blockquote>
<hr>
<h2 id="ros-node">ROS Node</h2>
<p>ROS는 각 프로세스들을 <strong>Node</strong>라는 단위로 관리합니다.</p>
<ul>
<li>로봇을 움직이는 Node, 센서와 통신하는 Node, 시각화 Node 등 다양한 Node들이 얽혀 로봇 시스템을 구성하게 됩니다.</li>
<li>Node들 사이에는 <strong>데이터의 송수신</strong>이 필요합니다. 이를 담당하는 ROS의 통신 메커니즘들이 있으며 각기 다른 특성을 갖고 있습니다.</li>
<li>Node들끼리 데이터를 주고받기 위해서는 어떤 노드가 존재하는지, id는 몇번인지 등의 정보가 공유되어야 할 것입니다. 아래 그림의 <strong>ROS Master</strong>가 이를 관리해주는 것이라고 이해하시면 됩니다.</li>
</ul>
<p><img src="/kr/ros_basic_noetic/images3/lec2_3.png?height=400px" alt="lec2_3.png"></p>
<ul>
<li>image from : <a href="http://www.clearpathrobotics.com/assets/guides/kinetic/ros/Intro%20to%20the%20Robot%20Operating%20System.html">clearpathrobotics</a></li>
</ul>
<p>그렇다면, 방금 우리가 실행한 예시에서도 ROS Master와 Node들이 실행되었겠군요!</p>
<blockquote>
<p>실행되는 Node를 확인하는 방법은 크게 두 가지가 있습니다.</p>
</blockquote>
<ol>
<li><strong>rosnode command</strong></li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ rosnode list
</span></span><span style="display:flex;"><span>/base_controller_spawner
</span></span><span style="display:flex;"><span>/ekf_localization
</span></span><span style="display:flex;"><span>/gazebo
</span></span><span style="display:flex;"><span>/gazebo_gui
</span></span><span style="display:flex;"><span>/joy_teleop/joy_node
</span></span><span style="display:flex;"><span>/joy_teleop/teleop_twist_joy
</span></span><span style="display:flex;"><span>/robot_state_publisher
</span></span><span style="display:flex;"><span>/rosout
</span></span><span style="display:flex;"><span>/teleop_twist_keyboard
</span></span><span style="display:flex;"><span>/twist_marker_server
</span></span><span style="display:flex;"><span>/twist_mux
</span></span></code></pre></div><ol start="2">
<li><strong>rqt_graph</strong></li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>rosrun rqt_graph rqt_graph
</span></span></code></pre></div><p>rqt graph를 살펴보면, 동그란 <strong>Node</strong>와 Node들 사이의 데이터 송수신이 <strong>화살표</strong>로 표현된 것을 알 수 있습니다. 키보드를 통해 제어 데이터를 송신하는 teleop_twist_keyboard는 gazebo node로 데이터를 보내고 있으며, 따라서 gazebo는 이 데이터를 통해 실제 로봇을 움직이게 되는 것입니다.</p>
<p><img src="/kr/ros_basic_noetic/images3/lec2_4.png?height=200px" alt="lec2_4.png"></p>
<ul>
<li>특정 Node에 대해서 더 자세한 정보를 얻고 싶다면, <code>rosnode info</code> 커맨드를 사용합니다.</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ rosnode info /base_controller_spawner
</span></span><span style="display:flex;"><span>--------------------------------------------------------------------------------
</span></span><span style="display:flex;"><span>Node <span style="color:#f92672">[</span>/base_controller_spawner<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>Publications:
</span></span><span style="display:flex;"><span> * /rosout <span style="color:#f92672">[</span>rosgraph_msgs/Log<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Subscriptions:
</span></span><span style="display:flex;"><span> * /clock <span style="color:#f92672">[</span>rosgraph_msgs/Clock<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Services:
</span></span><span style="display:flex;"><span> * /base_controller_spawner/get_loggers
</span></span><span style="display:flex;"><span> * /base_controller_spawner/set_logger_level
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>contacting node http://192.168.55.236:33811/ ...
</span></span><span style="display:flex;"><span>Pid: <span style="color:#ae81ff">63764</span>
</span></span><span style="display:flex;"><span>Connections:
</span></span><span style="display:flex;"><span> * topic: /rosout
</span></span><span style="display:flex;"><span>    * to: /rosout
</span></span><span style="display:flex;"><span>    * direction: outbound <span style="color:#f92672">(</span><span style="color:#ae81ff">43329</span> - 192.168.55.236:34456<span style="color:#f92672">)</span> <span style="color:#f92672">[</span>10<span style="color:#f92672">]</span>
</span></span><span style="display:flex;"><span>    * transport: TCPROS
</span></span><span style="display:flex;"><span> * topic: /clock
</span></span><span style="display:flex;"><span>    * to: /gazebo <span style="color:#f92672">(</span>http://192.168.55.236:33853/<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>    * direction: inbound
</span></span><span style="display:flex;"><span>    * transport: TCPROS
</span></span></code></pre></div><p>이전 예제들은 일단 종료시킨 뒤, 간단한 새로운 예시를 실행해봅시다.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#75715e"># Terminal 1</span>
</span></span><span style="display:flex;"><span>roscore
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Terminal 2</span>
</span></span><span style="display:flex;"><span>rosrun roscpp_tutorials talker
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Terminal 3</span>
</span></span><span style="display:flex;"><span>rosrun roscpp_tutorials listener
</span></span><span style="display:flex;"><span><span style="color:#75715e"># Terminal 4</span>
</span></span><span style="display:flex;"><span>rqt_graph
</span></span></code></pre></div><p><img src="/kr/ros_basic_noetic/images3/talker_listener.gif?height=400px" alt="talker_listener.gif"></p>
<p>rqt_graph를 보면 <strong>talker ⇒ listener</strong>로 데이터가 전송되는 것을 알 수 있습니다.</p>
<p>이제, rqt_graph를 보는 것은 익숙해졌지요?</p>
<p><img src="/kr/ros_basic_noetic/images3/lec2_5.png" alt="lec2_5.png"></p>
<p>첫번째 Gazebo 예시와 다른 점으로 roscore라는 것을 실행해주었습니다.</p>
<ul>
<li>roscore는 ROS Master를 실행시키는 명령어로 모든 ROS Node들은 Master에 의해 관리되기 때문에 roscore를 통해 실행시키거나, roslaunch를 사용해야 합니다.</li>
<li>ROS Master가 실행되고 있지 않다면, 아래와 같이 오류가 발생합니다.</li>
</ul>
<p><img src="/kr/ros_basic_noetic/images3/no_master.gif?height=400px" alt="no_master.gif"></p>
<hr>
<h3 id="eth-super-mega-bot--ros-workspace">ETH Super Mega Bot &amp; ROS Workspace</h3>
<ul>
<li>ROS는 <strong>catkin</strong>이라는 빌드 시스템을 사용합니다. 기존 c/c++ cross-platform 개발을 경험하셨다면 cmake에 익숙하실텐데, 이와 매우 비슷합니다.</li>
<li>catkin을 통해 실행 가능한 프로그램 (C/C++의 빌드), 라이브러리, 인터페이스들을 만들 수 있으며, catkin 시스템을 사용하기 위해서는 <strong>workspace</strong>라는 특별한 폴더가 필요합니다.</li>
</ul>
<p><img src="/kr/ros_basic_noetic/images3/lec2_6.png?height=150px" alt="lec2_6.png"></p>
<ul>
<li>ROS 개발을 하다 보면 여러 프로젝트를 동시에 진행하는 경우가 생깁니다.</li>
<li>새로운 작업은 새로운 폴더를 만들어 작업하듯이 ROS 에서도 새로운 프로젝트는 새로운 WorkSpace에서 작업을 수행하는 것이 일반적입니다.</li>
<li>새로운 WS로 이동하게 되면 ROS에게 이러한 변화를 알려줘야 하며 이 명령어가 <strong>source devel/setup.bash</strong> 입니다.</li>
<li>이번 강의용 WS를 만들어보고, 이후 여러분들만의 WS도 만들어 작업해보세요!</li>
</ul>
<blockquote>
<p>일반적으로 ROS의 workspace는 <strong>name_ws</strong>라는 이름을 갖는 것이 일반적이며, 우리는 <strong>catkin_ws</strong>라는 workspace를 만들어보고자 합니다.</p>
</blockquote>
<ul>
<li>아래 커멘드 라인들을 따라해주세요</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>cd ~/
</span></span><span style="display:flex;"><span>mkdir -p catkin_ws/src
</span></span><span style="display:flex;"><span>cd catkin_ws
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>catkin config --init
</span></span><span style="display:flex;"><span>catkin build
</span></span></code></pre></div><p><img src="/kr/ros_basic_noetic/images3/catkin_ws.gif?height=350px" alt="catkin_ws.gif"></p>
<ul>
<li>다음과 같이 <strong>build, devel, src, log</strong> 폴더가 만들어집니다.</li>
</ul>
<p><img src="/kr/ros_basic_noetic/images3/lec2_7.png?height=200px" alt="lec2_7.png"></p>
<ul>
<li>ROS 코드들은 모두 src 폴더 안에 위치하게 됩니다.</li>
<li>src 폴더 내부에서 코드 개발 ⇒ catkin을 사용한 빌드 ⇒ build 폴더 내부에 실행 가능한 프로그램 생성의 순서로 개발이 이루어집니다.</li>
</ul>
<blockquote>
<p>실습을 통해 개발 프로세스에 익숙해져봅시다.</p>
</blockquote>
<ol>
<li>아래 폴더를 catkin_ws/src 안에 압축 해제합니다.</li>
</ol>
<section class="attachments ">
  <label>
    <i class="fas fa-paperclip" aria-hidden="true"></i>
    Example Packages
  </label>
  <div class="attachments-files">
    <li>
      <a href="/kr/ros_basic_noetic/lecture3.kr.files/smb_common.zip">smb_common.zip</a>
      (2 )
    </li>
  </div>
</section>

<p><img src="/kr/ros_basic_noetic/images3/lec2_8.png?height=200px" alt="lec2_8.png"></p>
<ol start="2">
<li>터미널 프로그램을 실행시키고 아래 커멘드 라인을 따라합니다.</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>catkin build smb_description
</span></span><span style="display:flex;"><span>catkin build smb_gazebo
</span></span><span style="display:flex;"><span>catkin build smb_control
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>source devel/setup.bash
</span></span></code></pre></div><p><img src="/kr/ros_basic_noetic/images3/catkin_build.gif?height=350px" alt="catkin_build.gif"></p>

<div class="notices tip" ><p>source로 시작하는 마지막 라인은 새로운 빌드 후에 항상 실행해줘야 합니다. 1강을 잘 따라했다면 <strong>sds</strong>라는 단축어로 사용이 가능합니다.</p>
</div>

<ol start="3">
<li>예제 프로그램을 실행시킵니다.</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>roslaunch smb_gazebo smb_gazebo.launch
</span></span></code></pre></div><p><img src="/kr/ros_basic_noetic/images3/lec2_9.png?height=300px" alt="lec2_9.png"></p>

<div class="notices note" ><p>실행 시 붉은 에러 메세지가 나오지만 동작만 된다면 문제 없습니다.</p>
</div>

<ol start="4">
<li>이 로봇을 한번 움직여 볼까요? - teleop 실행</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>rosrun teleop_twist_keyboard teleop_twist_keyboard.py
</span></span></code></pre></div><ul>
<li>파일 구조 관점에서, ROS Application은 여러 <strong>Package</strong>들로 이루어집니다. 이들 Package가 소스 파일을 담고 있고, catkin이 이들을 빌드하여 실행 프로그램들을 만들었습니다.</li>
<li>제가 공유한 압축 파일 안에도 3개의 Package가 포함되어있던 것이며, ROS 개발자들은 자신들의 로봇 Package를 개발하고 공유합니다.</li>
</ul>
<hr>
<h2 id="package-생성-실습">Package 생성 실습</h2>
<blockquote>
<p>Package를 생성하는 방법은 다음과 같습니다.</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>cd &lt;your-ws&gt;/src
</span></span><span style="display:flex;"><span>catkin_create_pkg &lt;package_name&gt; <span style="color:#f92672">[</span>depend1<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>depend2<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>depend3<span style="color:#f92672">]</span>
</span></span></code></pre></div><p>my_first_package라는 package를 시험삼아 생성해봅시다.</p>
<pre tabindex="0"><code># exameple

$ catkin_create_pkg my_first_package rospy std_msgs
Created file my_first_package/package.xml
Created file my_first_package/CMakeLists.txt
Created folder my_first_package/src
Successfully created files in /home/kimsooyoung/catkin_ws/src/my_first_package. Please adjust the values in package.xml.
</code></pre><p><img src="/kr/ros_basic_noetic/images3/lec2_10.png?height=200px" alt="lec2_10.png"></p>
<p>depend에는 해당 패키지의 의존성 패키지들이 나열되며, rospy는 파이썬을 통해 ROS를 사용하기 위한 의존성입니다.</p>
<p>미리 제공되었던 Package, smb_gazebo를 살펴봅시다.</p>
<p><img src="/kr/ros_basic_noetic/images3/lec2_11.png?height=200px" alt="lec2_11.png"></p>
<p>Gazebo 실행에 필요한 모델 파일과 환경 파일 등 기능별 정리된 모습을 볼 수 있습니다.</p>
<p>이렇게 Package를 잘 구성해두면 이후 코드의 관리에도 편리하다는 장점이 있습니다.</p>
<hr>
<p><strong>참고자료</strong></p>
<ul>
<li><a href="http://wiki.ros.org/ko/ROS/Tutorials/CreatingPackage">http://wiki.ros.org/ko/ROS/Tutorials/CreatingPackage</a></li>
<li><a href="https://rsl.ethz.ch/education-students/lectures/ros.html">https://rsl.ethz.ch/education-students/lectures/ros.html</a></li>
<li><a href="https://www.clearpathrobotics.com/assets/guides/noetic/ros/Drive%20a%20Husky.html">https://www.clearpathrobotics.com/assets/guides/noetic/ros/Drive a Husky.html</a></li>
</ul>


<footer class="footline">
	
</footer>

        
        </div>
        

      </div>

    <div id="navigation">
        
        

        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        

        


	 
	 
		
			<a class="nav nav-prev" href="/kr/ros_basic_noetic/lecture2/" title="Lecture2 - Dev Env Setup"> <i class="fa fa-chevron-left"></i></a>
		
		
			<a class="nav nav-next" href="/kr/ros_basic_noetic/lecture4/" title="Lecture4 - ROS Launch, RViz" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
		
	
    </div>

    </section>

    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js?1672829709"></script>
    <script src="/js/perfect-scrollbar.min.js?1672829709"></script>
    <script src="/js/perfect-scrollbar.jquery.min.js?1672829709"></script>
    <script src="/js/jquery.sticky.js?1672829709"></script>
    <script src="/js/featherlight.min.js?1672829709"></script>
    <script src="/js/highlight.pack.js?1672829709"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom-3.6.0.js?1672829709"></script>
    <script src="/js/learn.js?1672829709"></script>
    <script src="/js/hugo-learn.js?1672829709"></script>
    
        
            <script src="https://unpkg.com/mermaid@8.8.0/dist/mermaid.min.js"></script>
        
        <script>
            mermaid.initialize({ startOnLoad: true });
        </script>
    
    

  </body>
</html>

